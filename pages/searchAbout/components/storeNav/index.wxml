<view class='scroll-box' wx:if="{{navList.length > 1}}">
    <!-- 内容 -->
    <view class='scroll-width'>
        <scroll-view class='store-wrapper' scroll-x enable-flex scroll-with-animation scroll-anchoring  bindscrolltolower="scrollUpper"	scroll-into-view="{{navScrollLeft}}">
            <view wx:for="{{navList}}" 
                  wx:key="index" 
                  wx:for-item="item" 
                  id='nav{{index}}' 
                  data-item="{{item}}" 
                  data-search-all="{{item.searchAll}}" 
                  data-store-id="{{item.storeId || '未获取到参数'}}" data-org-code="{{item.orgCode || '未获取到参数'}}" data-store-id-list="{{item.storeIdList || '未获取到参数'}}" class="flex-row nav-item {{item.searchAll?'search_all_btn': ''}} {{curNav === 'nav'+ index ? 'selected' : ''}}" 
                  data-layer="{{false}}"
                  data-page-id='{{pageId}}'
                  data-current-page-name='{{currentPageName}}'
                  data-pre-page-name='{{prePageName}}'
                  bindtap="clickNav"
                  aria-label="{{curNav === 'nav'+ index ? '已选中' : ''}}{{item.title}}{{item.searchAll ? '门店': ''}}"
                  aria-role='button'
                  data-user-action="{{item.userAction}}"
                  data-trace-id="{{traceId}}">
                <view class="flex-none" aria-hidden="true">
                    <!-- 全部tab的图标处理占位 -->
                    <block wx:if="{{item.searchAll && curNav !== 'nav'+ index}}"></block>
                    <block wx:elif="{{item.searchAll && curNav === 'nav'+ index}}"></block>
                    <!-- 门店logo -->
                    <image aria-hidden="true" wx:else id='nav{{index}}' data-lazy-img-id="{{'nav' + index}}" class="logo lazy-load  lazy_load_img {{storeImgLazyLoad['nav'+index] ? 'lazy_load_img_active' : ''}}" src="{{storeImgLazyLoad['nav'+index] ? item.majorIcon : ''}}" />
                </view>
                <view aria-hidden="true" class="flex-auto">
                    <view id='nav{{index}}' class="title {{!item.searchAll ? 'title_size' : 'all_title_size'}} ">
                        <view wx:if="{{item.title}}" class="ellipsis" style="line-height:1em;">
                            {{item.title}}
                        </view>
                        <view wx:if="{{item.closeTip.timeText}}" style="font-size:24rpx;color:{{curNav === 'nav'+ index ? '#fff' :item.closeTip.endColor}}">
                            {{item.closeTip.timeText}}
                        </view>
                        <block wx:elif="{{item.expansionCoupon && item.expansionCoupon.iconUrl}}">
                          <view class="store_tag" wx:if="{{item.expansionCoupon && item.expansionCoupon.iconUrl && curNav !== 'nav'+ index}}">
                            <view class="expansion_coupon" style="background: linear-gradient({{item.expansionCoupon.startColorCode}} 0%,{{item.expansionCoupon.endColorCode}} 100%);">
                              <image class="expansion_coupon_icon" src="{{item.expansionCoupon.iconUrl}}"/>
                              <view class="expansion_width">
                                <view class="expansion-text ellipsis">{{item.expansionCoupon.iconText}}</view>
                                <view class="expansion_price ellipsis">{{item.expansionCoupon.price}}</view>
                              </view>
                            </view>
                          </view>
                          <!-- 膨胀券 -->
                          <view class="store_tag" wx:elif="{{item.expansionCoupon && item.expansionCoupon.selectIconUrl && curNav === 'nav'+ index}}">
                            <view class="expansion_coupon" style="border: 1px solid #fff; box-sizing: border-box;">
                              <image class="expansion_coupon_icon" src="{{item.expansionCoupon.selectIconUrl}}"/>
                              <view class="expansion_width">
                                <view class="expansion-text ellipsis">{{item.expansionCoupon.iconText}}</view>
                                <view class="expansion_price ellipsis">{{item.expansionCoupon.price}}</view>
                              </view>
                            </view>
                          </view>
                        </block>

                        <block else>
                          <view
                            class="store_tag ellipsis"
                            wx:if="{{item.promoteTags[0]}}"
                            style="background:{{curNav === 'nav'+ index ? '' : item.promoteTags[0].backgroundColor}};border:{{curNav === 'nav'+ index ? '1px solid #fff' :  '1px solid ' + item.promoteTags[0].outLineColor}};color:{{curNav === 'nav'+ index ? '#fff' : item.promoteTags[0].frontColor}}">
                            {{item.promoteTags[0].words}}
                          </view>
                        </block>
                    </view>
                </view>
                <view wx:if="{{curNav === 'nav'+ index}}" class="store_arrow icon dj_icon ts_arrow_down"></view>
            </view>
            <view wx:if="{{navList.length>3}}" style="padding: 0 50rpx;"></view>
        </scroll-view>
        <!-- 侧边更多箭头 -->
        <view class="side_arrow icon dj_icon ts_down flex-row" wx:if="{{navList.length>3}}" bind:tap="clickShowPop" aria-role='button' aria-label="显示所有门店" aria-haspopup="true"></view>
    </view>
</view>
<block wx:if="{{storeModal}}">
    <!-- 更多门店弹层背景 -->
    <view class="more_case_bg" wx:if="{{storeCount}}" bind:tap="clickClosePop" catchtouchmove="catchtouchmove"></view>
    <!-- 更多门店弹层内容 -->
    <view class="more_case_content flex-col" wx:if="{{storeCount}}">
        <!-- title -->
        <view class="more_case_title flex-none flex-row" bind:tap="clickClosePop">
            <view class="more_case_txt flex-auto" aria-role='text' aria-label="{{storeCount}}个商家有结果">{{storeCount}}个商家有结果</view>
            <view class="more_case_icon icon dj_icon ts_up" aria-role='button' aria-label="关闭弹层"></view>
        </view>
        <!-- 门店列表 -->
        <view class="flex-auto more_case_list">
            <scroll-view class="more_case_scroll" scroll-y="true" scroll-into-view="{{curNav}}" catchtouchmove="catchtouchmove">
                <view class="flex-row more_case_warp">
                    <view wx:for="{{navList}}" 
                        wx:key="index" 
                        wx:for-item="item" 
                        id='nav{{index}}' 
                        data-item="{{item}}" 
                        data-search-all="{{item.searchAll}}" data-store-id="{{item.storeId || '未获取到参数'}}" 
                        data-org-code="{{item.orgCode || '未获取到参数'}}" 
                        data-store-id-list="{{item.storeIdList || '未获取到参数'}}" 
                        data-layer="{{true}}"
                        class="nav_pop_item" bindtap="clickNav"
                        aria-role='button'
                        aria-label="{{curNav === 'nav'+ index ? '已选中' : ''}}{{item.title}}{{item.searchAll ? '门店': ''}}">
                        <store-nav-item
                          index="{{index}}"
                          curNav="{{curNav}}"
                          item="{{item}}"
                          traceId="{{traceId}}"
                          pageId='{{pageId}}'
                          currentPageName='{{currentPageName}}'
                          prePageName='{{prePageName}}'
                          storeImgLazyLoad="{{storeImgLazyLoad}}"/>
                    </view>
                </view>
            </scroll-view>
        </view>
    </view>
</block>