<view class='category-filter-wrapper' wx:if="{{displayFilterFloor.length >= 1}}">
	<scroll-view 
		class="category-filter-scroll" 
		scroll-x
		scroll-left="{{scrollLeft}}"
		enable-flex="true"
		scroll-into-view="{{itemId}}"
		scroll-with-animation
	>
		<view
			wx:for="{{displayFilterFloor}}"
			wx:key="index"
			wx:for-item="item"
			data-item="{{item}}"
			data-trace-id="{{traceId}}"
			data-page-id="{{pageId}}"
			data-current-page-name="{{currentPageName}}"
			data-pre-page-name='{{prePageName}}'
			data-user-action="{{item.nodeType == 1 && item.displayItem && item.displayItem.userAction ? item.displayItem.userAction : '' }}" 
      data-no-need-exposure="{{item.nodeType == 1 && item.displayItem && item.displayItem.userAction ? false: true }}"
			class="category-item ep_search_filternew_item {{ item.nodeType == 2 ? ((item.subFilterName && !categoryModal) ? 'selected' : '') : ( item.status && !item.displayItem.clickIconItem.imgUrl && !item.displayItem.defaultIconItem.imgUrl ? 'selected' : '') }} {{item.nodeType == 1 && item.displayItem.clickIconItem.imgUrl && item.displayItem.defaultIconItem.imgUrl ? 'nobgcolor' : ''}}"
			bindtap="clickCatogory"
			style="background-image: url({{ (item.nodeType == 1 && item.status && item.displayItem.clickIconItem.imgUrl) ? item.displayItem.clickIconItem.imgUrl : (item.nodeType == 1  && item.displayItem.defaultIconItem.imgUrl) ? item.displayItem.defaultIconItem.imgUrl : '' }}) ;background-size: 100% 100%;"
            aria-role='button'
            aria-label="{{item.nodeType == 1 ? item.displayItem.itemName : item.subFilterName ? item.subFilterName : item.filterName}}{{item.itemList && item.itemList.length ? categoryModal ? '.点击收起全部选项' : '.点击展开全部选项'  : ''}}"
		> 
			<view class="caterory-wrapper">
				<view 	
					class="caterory-text {{item.nodeType == 1 && item.displayItem.clickIconItem.imgUrl && item.displayItem.defaultIconItem.imgUrl ? 'notext' : ''}}">
					{{item.nodeType == 1 ? item.displayItem.itemName : item.subFilterName ? item.subFilterName : item.filterName}}
				</view>
				<view wx:if="{{item.itemList && item.itemList.length}}">
					<view
						wx:if="{{(selectItemObj.filterName === item.filterName) && categoryModal}}"
						class="icon dj_icon ts_up caterory-icon"
						style="color: {{item.subFilterName ? (categoryModal ? '' : '#00CF37') : '#000'}}"
					></view>
					<view
						wx:else
						class="icon dj_icon ts_down caterory-icon"
						style="color: {{item.subFilterName ? (categoryModal ? '' : '#00CF37') : ''}}"
					></view>
				</view>
			</view>
			<view wx:if="{{selectItemObj.filterName == item.filterName && categoryModal}}" class="caterory-flag"></view>
		</view>
  	</scroll-view>
	<view wx:if="{{categoryModal}}" class="sub-filter-wrapper" bind:tap="closeModal" catchtouchmove='true'>
		<view class="sub-filter-content" catchtap="stopBubble">
			<scroll-view
				class="sub-filter-scroll"
				scroll-y
				enable-flex="true"
				style="height: {{subFilterScrollHeight}}rpx"
				scroll-with-animations
			>
				<view style="height: 16rpx; width: 100%"></view>
				<view
					wx:for="{{selectItemObj.itemList}}"
					wx:key="index"
					wx:for-item="item"
					class="sub-filter-item"
					data-item="{{item}}"
					data-index="{{index}}"
					bind:tap="clickSubFilter"
                    aria-label="{{item.itemName}}.点击将{{item.itemName}}添加到筛选项中.可多选.点击下方的确认筛选商品"
                    aria-role='button'
				>
					<view aria-hidden="true" class="sub-filter-text {{item.status ? 'activity' : ''}}">
						{{item.itemName}}
					</view>
					<image
                        aria-hidden="true"
						wx:if="{{item.status}}"
						class="sub-filter-icon"
						src="https://storage.360buyimg.com/wximg/storewin/green-right.png"
					/>
				</view>
			</scroll-view>
			<view class="button-wrapper d-flex">
				<view class="button-item btn_black" 
                      bind:tap="resetSubFilter"
                      aria-role='button'
                      aria-label="重置.点击清空已选筛选项.点击确认按钮过滤商品"
                >重置</view>
				<view class="button-item confirm" 
                      bind:tap="confirmSubFilter"
                      aria-role='button'
                      aria-label="确认.点击按筛选项过滤商品">确认</view>
			</view>
		</view>
	</view>
</view>