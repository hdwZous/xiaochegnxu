<!-- 搜索框 -->
<result-searchbox
  channelId="{{channelId}}"
  searchKey="{{searchKey}}"
  fromSource="{{fromSource}}"
  orgCode="{{orgCode}}"
  storeId="{{storeId}}"
  channelType="{{channelType}}"
  fatherFilterList="{{filterList}}"
  bind:getGoodList="getGoodList"
  bind:fetchData="fetchData"
  searchTag="{{searchTag}}"
  styleABMap="{{styleABMap}}"
  onPullDown="{{onPullDown}}"
  isHasTabs="{{!tabResultList || !tabResultList.length}}"
  buriedObj="{{recommendObj}}"/>
<view wx:if="{{backTop && (!tabResultList || !tabResultList.length)}}" class="gap">
</view>
<!-- 小黄条 -->

<!-- <view class="wran_case flex-row" wx:if="{{searchDesc.length}}">
    <view class="warn_txt" style="color: {{item.color || '#713F00'}}" wx:for="{{searchDesc}}" wx:for-index="index" wx:for-item="item" wx:key="item" wx:if="{{item.desc}}">{{item.desc}}</view>
</view> -->

<view class='tab_switch_fix' wx:if="{{tabResultList && tabResultList.length > 1 || (tabResultList.length == 1 &tabResultList[0].tabType == 2) }}">
  <block wx:if="{{tabResultList && tabResultList.length > 1}}">
    <tabSwitch tabResultList="{{tabResultList}}" bind:selectTab="selectTab"/>
  </block>
  
  <view wx:if="{{tabType == 2}}">
    <DdLocal
      nearbyObj="{{nearbyObj}}"
      showNearby="{{showNearby}}"
      recommendObj="{{recommendObj}}"
      keyword="{{searchKey}}"
      bind:selectNearby="selectNearby"/>
  </view>
</view>

<!-- 无数据 -->
<block wx:if="{{showEmpty}}">
  <!-- 医药屏蔽 -->
  <block wx:if="{{showMedicineDefault}}">
    <view class="none-medicine">
      <image src="https://storage.360buyimg.com/wximg/common/Medicine.jpg" mode="widthFix" class="medicine_img"></image>
      <view class="medicine_btn" bindtap="toMedicine">前往医药小程序</view>
    </view>
  </block>
  <!-- 获取门店接口无结果 || 接口异常 -->
  <block wx:else>
    <view  catchtap="elementTracker">
      <default 
        type="{{type}}" 
        tips="{{tips}}" 
        fromPositon='search-result-new'
        btnText="{{btnText}}" 
        guideData="{{guideData}}" 
        buriedObj="{{recommendObj}}"
        bind:defaultBtnEvent="onDefaultBtnEvent">
      </default>
    </view>
  </block>
</block>
<!-- 获取门店接口有数据 -->
<block wx:else>
  <view hidden="{{tabType == 1 || tabType == 2}}" catchtap="elementTracker" class="{{mgTop}} container" style="height:{{height}}px; z-index:{{viewZIndex}}">
      <scroll-view bindscrolltolower="scrollLower" bindscroll="scrollPull" scroll-y style='height:100%' scroll-top='{{allTopNum}}'	scroll-with-animation="true">
        <view class="{{ onPullDown && fromSource == 'seckill' ? 'mgT100': ''}}">
        <!-- 小黄条 -->
          <view class="wran_case flex-row" wx:if="{{searchDesc.length}}">
            <view class="warn_txt" style="color: {{item.color || '#713F00'}}" wx:for="{{searchDesc}}" wx:for-index="index" wx:for-item="item" wx:key="item" wx:if="{{item.desc}}">{{item.desc}}</view>
          </view>
          <!-- 广告banner -->
          <banner
            data="{{bannerData}}" 
            traceId="{{traceIdHomeStoresSearch}}"
            pageId="{{recommendObj.pageIdFirstPage}}"
            currentPageName="{{recommendObj.currentPageName}}"
            prePageName="{{recommendObj.prePageName}}"
            recommendObj="{{recommendObj}}"/>
          <!-- 门店导航栏 -->
          <view class="sticky_case {{onPullDown ? tabResultList && tabResultList.length < 2 ? 'sticky_case_b top94': 'sticky_case_b sticky_case_b_top150' : ''}}" style="z-index:{{zIndexNav}}" wx:if="{{navList.length}}">
            <store-nav
              bind:clickChangeZIndex="clickChangeZIndex"
              storeCount="{{storeCount}}"
              navList="{{navList}}"
              storeModal="{{storeModal}}"
              store-img-lazy-load="{{storeImgLazyLoad}}"
              traceId="{{traceIdHomeStoresSearch}}"
              pageId="{{recommendObj.pageIdFirstPage}}"
              currentPageName="{{recommendObj.currentPageName}}"
              prePageName="{{recommendObj.prePageName}}"
              bind:lazyObserver="lazyObserver"
              bind:getGoodList="getGoodList"
              bind:showModal="showModal"
            />
          </view>
          <!-- 门店信息 -->
            <store-info
            wx:if="{{storeInfo.storeName}}"
            item="{{storeInfo}}"
            traceId="{{traceId}}"
            buriedObj="{{recommendObj}}"
            keyword="{{keyword}}"
            noNeedExposure="{{false}}"
          />
          <view wx:if="{{!storeModal}}" class='{{onPullDown ? "sort-fixed sort-fixed-b" : "sort-fixed"}}' style="top:{{navList.length >1 ? (!tabResultList || tabResultList.length < 2 ? '212rpx':'122rpx'): (!tabResultList || tabResultList.length < 2 ? '94rpx':'136rpx')}};z-index:{{zIndexSort}}" >
            <!-- 排序 -->
            <sort-new 
              class="sort-new"
              isShowFilter="{{isShowFilter}}" 
              sortNodeList="{{sortNodeList}}" 
              searchFilterList="{{searchFilterList}}" 
              fatherFilterList="{{filterList}}" 
              storeId="{{storeInfo.storeId}}"
              sortModal="{{sortModal}}"
              searchKey="{{searchKey}}"
              otherSortModal="{{otherSortModal}}"
              traceId="{{traceId}}"
              pageId="{{recommendObj.pageIdFirstPage}}"
              currentPageName="{{recommendObj.currentPageName}}"
              prePageName="{{recommendObj.prePageName}}"
              tabType="{{tabType}}"
              bind:forbid="forbid" 
              bind:look="lookBury" 
              bind:getGoodList="getGoodList"
              bind:clickChangeZIndex="clickChangeZIndex"
              bind:showModal="showModal"
            />
            <!-- 占位 -->
            <view class='{{onPullDown ? "" :  searchTagFix ? "seat" : ""}}'></view>
            <!-- 品类筛选 -->
            <view class='{{onPullDown ? "" : searchTagFix  ? "category_case top94" : ""}}' id="searchTag">
              <category-filter-new
                wx:if="{{multiDisplayFilterFloor && multiDisplayFilterFloor.length}}"
                fatherFilterList="{{filterList}}"
                multiDisplayFilterFloor="{{multiDisplayFilterFloor}}"
                categoryModal="{{categoryModal}}"
                searchKey="{{searchKey}}"
                storeId="{{storeInfo.storeId}}"
                traceId="{{traceIdHomeStoresSearch}}"
                pageId="{{recommendObj.pageIdFirstPage}}"
                currentPageName="{{recommendObj.currentPageName}}"
                prePageName="{{recommendObj.prePageName}}"
                fromSource="{{fromSource}}"
                bind:buryClick="catogoryBury"
                bind:getGoodList="getGoodList"
                bind:showModal="showModal"
              />
              <category-filter
                wx:else
                searchKey="{{searchKey}}"
                storeId="{{storeInfo.storeId}}"
                fatherFilterList="{{filterList}}"
                displayFilterFloor="{{displayFilterFloor}}"
                pageId="{{recommendObj.pageIdFirstPage}}"
                currentPageName="{{recommendObj.currentPageName}}"
                prePageName="{{recommendObj.prePageName}}"
                bind:buryClick="catogoryBury"
                bind:getGoodList="getGoodList"
              />
            </view>
          </view>

          <!-- 8.9新增楼层 cms关联平铺筛选项 -->
          <view class="search-tag-floor-wrapper" wx:if="{{searchTagFloor && searchTagFloor.length}}">
            <scroll-view
              class="search-tag-floor"
              scroll-x
              enable-flex="true"
              scroll-with-animation
            >
              <view
                wx:for="{{searchTagFloor}}"
                wx:key="index"
                wx:for-item="item"
                data-item="{{item}}"
                class="tag-floor-item"
                bind:tap="searchTagTap"
                aria-role='button'
                aria-label="{{item.itemName}}"
              >
                <search-tag-floor-item
                  item="{{item}}"
                  traceId="{{traceId}}"
                  pageId='{{recommendObj.pageIdFirstPage}}'
                  currentPageName='{{recommendObj.currentPageName}}'
                  prePageName='{{recommendObj.prePageName}}'/>
              </view>
            </scroll-view>
          </view>
          <view wx:if="{{(tabResultList && tabResultList.length < 2) && (fromSource != 'seckill') }}" class='{{onPullDown ? "seat_all_90" : "seat_all_0"}}'></view>
          <!-- 获取商品列表有数据 -->
          <block wx:if="{{!showGoodListEmpty && goodList.length > 0}}">
              <good-list
                FcatIds="{{catIds}}"
                searchAll="{{searchAll}}"
                keyword="{{searchKey}}"
                traceId='{{traceId}}'
                goodList="{{goodList}}"
                FbrandIds="{{brandIds}}"
                fromSource="{{fromSource}}"
                hasNextPage="{{hasNextPage}}"
                bind:getGoodList="getGoodList"
                recommendObj="{{recommendObj}}"
                wx:if="{{goodList.length > 0}}"
                bind:lazyObserver="lazyObserver"
                img-lazy-load="{{goodImgLazyLoad}}"
                FstandardCatIds="{{standardCatIds}}"
                pageId="{{recommendObj.pageIdFirstPage}}"
                currentPageName="{{recommendObj.currentPageName}}"
                prePageName="{{recommendObj.prePageName}}"
              />
          </block>
          <!-- 获取商品列表无数据 -->
          <block wx:else>
              <default isRest="{{true}}" type="{{allDefaultErrObj.type}}" tips="{{allDefaultErrObj.tips}}" btnText="{{allDefaultErrObj.btnText}}" bind:defaultBtnEvent="onDefaultBtnEvent"></default>
          </block>

          <!-- 回到顶部 -->
          <back-top hideBackTop='{{hideBackTop}}' pageMoving='{{pageMoving}}' showMinicar='{{!hoursBuySearchAll}}' bind:handleBackTop='handleBackTop'></back-top>

        </view>
      </scroll-view>

  </view>
  <block wx:if="{{fromSource != 'seckill'}}">
    <view hidden="{{tabType == 0 || tabType == 2}}" catchtap="elementTracker" class="{{mgTop}} container" style="height:{{height}}px;z-index:{{viewZIndex}}">
      <scroll-view bindscrolltolower="scrollLower" bindscroll="hoursBuyScrollPull" scroll-y style='height:100vh' scroll-top='{{hoursBuyTopNum}}' scroll-with-animation="true">
        <view>
          <!-- 小黄条 -->
          <view class="wran_case flex-row" wx:if="{{hoursBuySearchDesc.length}}">
            <view class="warn_txt" style="color: {{item.color || '#713F00'}}" wx:for="{{hoursBuySearchDesc}}" wx:for-index="index" wx:for-item="item" wx:key="item" wx:if="{{item.desc}}">{{item.desc}}</view>
          </view>
          <!-- 广告banner -->
          <banner
            data="{{hoursBuyBannerData}}" 
            traceId="{{traceIdHomeStoresSearch}}"
            pageId="{{recommendObj.pageIdFirstPage}}"
            currentPageName="{{recommendObj.currentPageName}}"
            prePageName="{{recommendObj.prePageName}}"
            recommendObj="{{recommendObj}}"/>
          <!-- 门店导航栏 -->
          <view class="sticky_case {{hoursBuyOnPullDown ? tabResultList && tabResultList.length < 2 ? 'sticky_case_b': 'sticky_case_b sticky_case_b_top150' : ''}}" style="z-index:{{zIndexNav}}" wx:if="{{hoursBuyNavList.length}}">
            <store-nav
              bind:clickChangeZIndex="clickChangeZIndex"
              storeCount="{{hoursBuyStoreCount}}"
              navList="{{hoursBuyNavList}}"
              storeModal="{{hoursBuyStoreModal}}"
              modalTabType="hoursBuyStoreModal"
              store-img-lazy-load="{{storeImgLazyLoad}}"
              traceId="{{traceIdHomeStoresSearch}}"
              pageId="{{recommendObj.pageIdFirstPage}}"
              currentPageName="{{recommendObj.currentPageName}}"
              prePageName="{{recommendObj.prePageName}}"
              bind:lazyObserver="lazyObserver"
              bind:getGoodList="getHoursBuyGoodList"
              bind:showModal="showModal"
            />
          </view>
          <!-- 门店信息 -->
          <store-info
            wx:if="{{hoursBuyStoreInfo.storeName}}"
            item="{{hoursBuyStoreInfo}}"
            traceId="{{hoursBuyTraceId}}"
            buriedObj="{{recommendObj}}"
            keyword="{{keyword}}"
            noNeedExposure="{{false}}"
          />
          <view wx:if="{{!storeModal}}" class='{{hoursBuyOnPullDown ? "sort-fixed sort-fixed-b" : "sort-fixed"}}' style="top:{{hoursBuyNavList.length >1 ? (!tabResultList || tabResultList.length < 2 ? '120rpx':'122rpx'): (!tabResultList || tabResultList.length < 2 ? '94rpx':'136rpx')}};z-index:{{zIndexSort}}" >
            <!-- 排序 -->
            <sort-new 
              class="hours-buy-sort-new"
              isShowFilter="{{isShowFilter}}" 
              sortNodeList="{{sortNodeList}}" 
              searchFilterList="{{hoursBuySearchFilterList}}" 
              fatherFilterList="{{hoursBuyFilterList}}" 
              storeId="{{hoursBuyStoreInfo.storeId}}"
              sortModal="{{hoursBuySortModal}}"
              modalTabType="hoursBuySortModal"
              searchKey="{{searchKey}}"
              otherSortModal="{{hoursBuyOtherSortModal}}"
              otherSortModalTabType="hoursBuyOtherSortModal"
              traceId="{{hoursBuyTraceId}}"
              pageId="{{recommendObj.pageIdFirstPage}}"
              currentPageName="{{recommendObj.currentPageName}}"
              prePageName="{{recommendObj.prePageName}}"
              bind:forbid="forbid" 
              bind:look="lookBury" 
              bind:getGoodList="getHoursBuyGoodList"
              bind:clickChangeZIndex="clickChangeZIndex"
              bind:showModal="showModal"
            />
            <!-- 占位 -->
            <view class='{{hoursBuyOnPullDown ? "" :  searchTagFix ? "seat" : ""}}'></view>
            <!-- 品类筛选 -->
            <view class='{{hoursBuyOnPullDown ? "" : searchTagFix  ? "category_case" : ""}}' id="searchTag">
              <category-filter-new
                wx:if="{{hoursBuyMultiDisplayFilterFloor && hoursBuyMultiDisplayFilterFloor.length}}"
                fatherFilterList="{{hoursBuyFilterList}}"
                multiDisplayFilterFloor="{{hoursBuyMultiDisplayFilterFloor}}"
                categoryModal="{{hoursBuyCategoryModal}}"
                modalTabType="hoursBuyCategoryModal"
                searchKey="{{searchKey}}"
                storeId="{{hoursBuyStoreInfo.storeId}}"
                traceId="{{traceIdHomeStoresSearch}}"
                pageId="{{recommendObj.pageIdFirstPage}}"
                currentPageName="{{recommendObj.currentPageName}}"
                prePageName="{{recommendObj.prePageName}}"
                fromSource="{{fromSource}}"
                bind:buryClick="catogoryBury"
                bind:getGoodList="getHoursBuyGoodList"
                bind:showModal="showModal"
              />
            </view>
          </view>

          <!-- 8.9新增楼层 cms关联平铺筛选项 -->
          <view class="search-tag-floor-wrapper" wx:if="{{searchTagFloor && searchTagFloor.length}}">
            <scroll-view
              class="search-tag-floor"
              scroll-x
              enable-flex="true"
              scroll-with-animation
            >
              <view
                wx:for="{{searchTagFloor}}"
                wx:key="index"
                wx:for-item="item"
                data-item="{{item}}"
                class="tag-floor-item"
                bind:tap="searchTagTap"
                aria-role='button'
                aria-label="{{item.itemName}}"
              >
                <search-tag-floor-item
                  item="{{item}}"
                  traceId="{{hoursBuyTraceId}}"
                  pageId='{{recommendObj.pageIdFirstPage}}'
                  currentPageName='{{recommendObj.currentPageName}}'
                  prePageName='{{recommendObj.prePageName}}'/>
              </view>
            </scroll-view>
          </view>
          <!-- 获取商品列表有数据 -->
          <block wx:if="{{!showGoodListEmpty && hoursBuyGoodList.length > 0}}">
              <good-list
                FcatIds="{{catIds}}"
                searchAll="{{hoursBuySearchAll}}"
                keyword="{{searchKey}}"
                traceId='{{hoursBuyTraceId}}'
                goodList="{{hoursBuyGoodList}}"
                FbrandIds="{{hoursBuyBrandIds}}"
                fromSource="{{fromSource}}"
                hasNextPage="{{hoursBuyHasNextPage}}"
                bind:getGoodList="getGoodList"
                recommendObj="{{recommendObj}}"
                wx:if="{{hoursBuyGoodList.length > 0}}"
                bind:lazyObserver="lazyObserver"
                img-lazy-load="{{goodImgLazyLoad}}"
                FstandardCatIds="{{standardCatIds}}"
                pageId="{{recommendObj.pageIdFirstPage}}"
                currentPageName="{{recommendObj.currentPageName}}"
                prePageName="{{recommendObj.prePageName}}"
              />
          </block>
          <!-- 获取商品列表无数据 -->
          <block wx:else>
              <default isRest="{{true}}" type="{{hoursBuyDefaultErrObj.type}}" tips="{{hoursBuyDefaultErrObj.tips}}" btnText="{{hoursBuyDefaultErrObj.btnText}}" bind:defaultBtnEvent="onDefaultBtnEvent"></default>
          </block>

          <!-- 回到顶部 -->
          <back-top hideBackTop='{{hoursBuyHideBackTop}}' pageMoving='{{pageMoving}}' showMinicar='{{!hoursBuySearchAll}}' bind:handleBackTop='handleBackTop'></back-top>
        </view>
      </scroll-view>
    </view>
    <view wx:if="{{tabType==2 && tabResultList.length < 2}}" class='seat80'></view>
    <view hidden="{{tabType == 1 || tabType == 0}}" class="{{!tabResultList || tabResultList.length < 2 ?(fromSource != 'seckill')?'mgT90': '':'mgT240'}} container" scroll-top='{{DdTopNum}}' scroll-with-animation="true" style="height:{{tabResultList || tabResultList.length < 2 ? (height - 45):(height - 120)}}px;z-index:{{viewZIndex}}">
      <scroll-view bindscrolltolower="scrollLower" bindscroll="DdScrollPull" scroll-y style='height:100vh' scroll-top='{{DdTopNum}}' scroll-with-animation="true">
        <view>
          <block wx:if="{{!showGoodListEmpty && DdGoodList.length > 0}}">
            <DdGoodList
                keyword="{{searchKey}}"
                traceId='{{DdTraceId}}'
                goodList="{{DdGoodList}}"
                hasNextPage="{{DdHasNextPage}}"
                recommendObj="{{recommendObj}}"
                bind:lazyObserver="lazyObserver"
                img-lazy-load="{{goodImgLazyLoad}}"
              />
          </block>
          <block wx:else>
            <default isRest="{{true}}" type="{{DdDefaultErrObj.type}}" tips="{{DdDefaultErrObj.tips}}" btnText="{{DdDefaultErrObj.btnText}}" bind:defaultBtnEvent="onDefaultBtnEvent"></default>
          </block>
          <!-- 回到顶部 -->
            <back-top hideBackTop='{{DdHideBackTop}}' pageMoving='{{pageMoving}}' showMinicar='{{false}}' bind:handleBackTop='handleBackTop'></back-top>
        </view>
        
        <view hidden="{{!showNearby}}" class="filterReach_mask" catchtouchmove="catchtouchmove" catchtap="clickReset"></view>
        <view hidden="{{!showNearby}}" class="{{!tabResultList || tabResultList.length < 2 ? 'filterReach_box filter_top_160' : 'filterReach_box'}}">
        <filterReach 
            bind:clickConfirm="clickConfirm" 
            bind:clickClosePop="clickClosePop"
            recommendObj="{{recommendObj}}"
            compType="nearbyFilter"
            businessName="{{businessName}}"
            filterObj="{{searchFilterDd}}"
            isShow="{{showNearby}}"
        />
        </view>
      </scroll-view>
    </view>
  </block>
  
</block>、
<!-- 腰带楼层 -->
<view hidden="{{tabType == 2}}">
  <belt
    fading="{{fading}}"
    traceId="{{traceId}}"
    searchWord="{{searchKey}}"
    isShow="{{isBeltShow}}"
    currentPage="storeListByKey"
    bind:beltBacktop='beltBackTop'
    recommendObj="{{recommendObj}}"
    refreshBeltFlag='{{refreshBeltTimeFlag}}'
    pageId="{{recommendObj.pageIdFirstPage}}"
    prePageName="{{recommendObj.prePageName}}"
    currentPageName="{{recommendObj.currentPageName}}"
  ></belt>
</view>


<!-- <weconsole /> -->