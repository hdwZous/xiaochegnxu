require("./runtime"),require("./vendors"),(wx["webpackJsonp/pages/myAttention/"]=wx["webpackJsonp/pages/myAttention/"]||[]).push([[2],{100:function(e,t,n){"use strict";n.r(t);n(101);var o=n(1),a=n(5),r=n(88),i=n(4),c=n(89);a.container.get(a.SERVICE_IDENTIFIER.Hooks).initNativeApiImpls=[o.e.initNativeApi];var s={pages:["pages/index/index"],subPackages:[{root:"pages/myCoupons/",pages:["index","subPages/description/index","subPages/disabledCoupon/index"],independent:!0},{root:"pages/storeCouponList/",pages:["index"],independent:!0},{root:"pages/myAttention/",pages:["index"],independent:!0}],permission:{"scope.userLocation":{desc:"你的位置信息将用获取最近的门店信息"}},plugins:{loginPlugin:{version:"1.5.1",provider:"wxefe655223916819e"},"live-player-plugin":{version:"1.3.5",provider:"wx2b03c6e691cd7370"}},window:{backgroundTextStyle:"light",navigationBarBackgroundColor:"#fff",navigationBarTitleText:"WeChat",navigationBarTextStyle:"black"}};a.window.__taroAppConfig=s;class App extends i.Component{render(){return this.props.children}}Object(r.a)(App,i,c.a,s);var l=n(141).default;Page(Object(a.createPageConfig)(l,"pages/myAttention/index",{},{navigationBarTitleText:"我的关注",navigationStyle:"default",onReachBottomDistance:50}||{}))},141:function(e,t,n){"use strict";n.r(t);var o=n(9),a=n(10),r=n(13),i=n(25),c=n(18),s=n(20),l=n(21),d=n(2),_=(n(106),n(3)),u=n(22),g=n(0),m=(n(15),n(4)),h=n.n(m),p=n(37),f=n.n(p),x=h.a.createContext({options:{},observer:null}),b=n(91),j=n.n(b),O=n(65),v=function(e){Object(s.a)(VisibleLogItem,e);var t=Object(l.a)(VisibleLogItem);function VisibleLogItem(){return Object(o.a)(this,VisibleLogItem),t.apply(this,arguments)}return Object(a.a)(VisibleLogItem,[{key:"componentDidMount",value:function componentDidMount(){var e,t=this;this.entry.onVisible=this.props.onVisible,this.entry.onHidden=this.props.onHidden,this.entry.visibleCallback=this.props.visibleCallback,null===(e=this.arr)||void 0===e||e.push((function(e){var n;(null===(n=t.entry)||void 0===n?void 0:n.uid)===e.id&&(null==e?void 0:e.intersectionRatio)>=(null===O.a||void 0===O.a?void 0:O.a.epMTADelayRatio)&&t.props.onVisible(e)}))}},{key:"componentWillUnmount",value:function componentWillUnmount(){}},{key:"render",value:function render(){var e=this,t=this.props,n=t.children,o=t.style,a=t.logSendData,r=void 0===a?{}:a,i=(t.addElClassName,t.innerStyle),c=t.onLayout,s=r.userAction,l=Array.isArray(s);return this.random=Math.random().toString().replace(".","")+"_"+Date.now(),Object(g.jsx)(x.Consumer,{children:function children(t){var a=t.options,r=t.userData,d=t.observer,_=t.arr;return e.options=a,e.userData=r,e.observer=d,e.arr=_,Object(g.jsx)(u.e,{ref:function ref(t){e.entry=t},className:j()("exposure"),"data-useraction":l?"":s,"data-useraction-list":l?JSON.stringify(s):"",style:i,children:Object(g.jsx)(u.e,{style:o,onLayout:c,children:n})})}})}}]),VisibleLogItem}(m.Component);Object(d.a)(v,"propTypes",{onVisible:f.a.func,onHidden:f.a.func,visibleCallback:f.a.func,style:f.a.oneOfType([f.a.array,f.a.object])}),Object(d.a)(v,"defaultProps",{onVisible:function onVisible(){},onHidden:function onHidden(){},visibleCallback:function visibleCallback(){},style:{}});var y=n(11),C=(n(29),n(47)),S=n.n(C),w=function Tip(e){var t=e.type,n=e.callBack,o=e.tipText,a=e.tipDesc,r=void 0===a?"":a,i=e.tipTitle,c=void 0===i?"":i,s=function getImage(e){return{nothing:{url:"https://storage.360buyimg.com/wximg/common/errorbar_icon_nothingV2.png",width:160,height:160,button:"重新加载"},graydog:{url:"https://storage.360buyimg.com/wximg/merchant/vipChannel/graydog.png",width:160,height:160,button:"重新加载"},graydogNoBtn:{url:"https://storage.360buyimg.com/wximg/merchant/vipChannel/graydog.png",width:160,height:160},addNewAddress:{url:"https://storage.360buyimg.com/wximg/merchant/vipChannel/graydog.png",width:160,height:160,msg:"新建收货地址",button:"新建地址"},loadError:{url:"https://storage.360buyimg.com/wximg/merchant/vipChannel/graydog.png",width:160,height:160,button:"重新加载"},noAddress:{url:"https://storage.360buyimg.com/wximg/merchant/vipChannel/graydog.png",width:160,height:160,msg:"地址获取失败",button:"重新加载"},noCoupon:{url:"https://storage.360buyimg.com/wximg/merchant/vipChannel/noCoupon.png",width:160,height:160},noSearch:{url:"https://storage.360buyimg.com/wximg/merchant/vipChannel/noSearch.png",width:160,height:160},unlogin:{url:"https://static-o2o.360buyimg.com/activity/images/fe/emtip_unLogin.png",width:160,height:160,msg:"请您登录",button:"立即登录"},noShop:{url:"https://storage.360buyimg.com/wximg/merchant/vipChannel/noShop.png",width:160,height:160},cartEmpty:{url:"https://storage.360buyimg.com/wximg/merchant/vipChannel/cart_empty.png",width:160,height:160},shopDown:{url:"https://storage.360buyimg.com/wximg/merchant/vipChannel/store_offline.png",width:160,height:160,button:"去首页逛逛",page:"Main",args:{tab:"Home"}},nowifi:{url:"https://storage.360buyimg.com/wximg/merchant/vipChannel/nowifi.png",width:160,height:160,button:"重新加载"},network:{url:"https://storage.360buyimg.com/wximg/merchant/vipChannel/nowifi.png",width:160,height:160,button:"重新加载"},poiAddress:{url:"https://storage.360buyimg.com/wximg/merchant/vipChannel/noAddress.png",width:160,height:160,msg:"请手动输入地址"},noFeed:{url:"https://storage.360buyimg.com/wximg/merchant/vipChannel/noCover.png",width:160,height:160,msg:"很抱歉，当前位置未开通服务"},hasNoActivity:{url:"https://storage.360buyimg.com/wximg/merchant/vipChannel/noSearch.png",width:160,height:160,msg:"这里没有活动，回首页逛逛吧[0001]",button:"返回首页"},hasNoCoupon:{url:"https://storage.360buyimg.com/flutter-mock/tip_noCoupon.196a080c.png",width:160,height:160,msg:"暂无可用优惠券"}}[e]||{}}(t),l=s.url,d=s.width,_=s.height;return l?Object(g.jsxs)(u.e,{className:S.a.tipcontainer,style:{minHeight:e.height},children:[Object(g.jsx)(u.a,{className:S.a.img,style:{width:d,height:_},src:l}),!!c&&Object(g.jsx)(u.d,{className:S.a.tipTitle,children:c}),!!r&&Object(g.jsx)(u.d,{className:S.a.tipDesc,children:r}),!!o&&Object(g.jsx)(u.e,{className:S.a.tipButton,onClick:n,children:o})]}):null},T=n(92),N=n.n(T),k=function Loading(e){return Object(g.jsx)(u.a,{className:N.a.loading,src:"https://storage.360buyimg.com/wximg/merchant/vipChannel/newLoading.gif"})},I=n(14),D=n.n(I),P=n(94),L=n.n(P),B=n(30);function safe_add(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function md5_cmn(e,t,n,o,a,r){return safe_add(function bit_rol(e,t){return e<<t|e>>>32-t}(safe_add(safe_add(t,e),safe_add(o,r)),a),n)}function md5_ff(e,t,n,o,a,r,i){return md5_cmn(t&n|~t&o,e,t,a,r,i)}function md5_gg(e,t,n,o,a,r,i){return md5_cmn(t&o|n&~o,e,t,a,r,i)}function md5_hh(e,t,n,o,a,r,i){return md5_cmn(t^n^o,e,t,a,r,i)}function md5_ii(e,t,n,o,a,r,i){return md5_cmn(n^(t|~o),e,t,a,r,i)}function binl_md5(e,t){var n,o,a,r,i;e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;var c=1732584193,s=-271733879,l=-1732584194,d=271733878;for(n=0;n<e.length;n+=16)o=c,a=s,r=l,i=d,c=md5_ff(c,s,l,d,e[n],7,-680876936),d=md5_ff(d,c,s,l,e[n+1],12,-389564586),l=md5_ff(l,d,c,s,e[n+2],17,606105819),s=md5_ff(s,l,d,c,e[n+3],22,-1044525330),c=md5_ff(c,s,l,d,e[n+4],7,-176418897),d=md5_ff(d,c,s,l,e[n+5],12,1200080426),l=md5_ff(l,d,c,s,e[n+6],17,-1473231341),s=md5_ff(s,l,d,c,e[n+7],22,-45705983),c=md5_ff(c,s,l,d,e[n+8],7,1770035416),d=md5_ff(d,c,s,l,e[n+9],12,-1958414417),l=md5_ff(l,d,c,s,e[n+10],17,-42063),s=md5_ff(s,l,d,c,e[n+11],22,-1990404162),c=md5_ff(c,s,l,d,e[n+12],7,1804603682),d=md5_ff(d,c,s,l,e[n+13],12,-40341101),l=md5_ff(l,d,c,s,e[n+14],17,-1502002290),c=md5_gg(c,s=md5_ff(s,l,d,c,e[n+15],22,1236535329),l,d,e[n+1],5,-165796510),d=md5_gg(d,c,s,l,e[n+6],9,-1069501632),l=md5_gg(l,d,c,s,e[n+11],14,643717713),s=md5_gg(s,l,d,c,e[n],20,-373897302),c=md5_gg(c,s,l,d,e[n+5],5,-701558691),d=md5_gg(d,c,s,l,e[n+10],9,38016083),l=md5_gg(l,d,c,s,e[n+15],14,-660478335),s=md5_gg(s,l,d,c,e[n+4],20,-405537848),c=md5_gg(c,s,l,d,e[n+9],5,568446438),d=md5_gg(d,c,s,l,e[n+14],9,-1019803690),l=md5_gg(l,d,c,s,e[n+3],14,-187363961),s=md5_gg(s,l,d,c,e[n+8],20,1163531501),c=md5_gg(c,s,l,d,e[n+13],5,-1444681467),d=md5_gg(d,c,s,l,e[n+2],9,-51403784),l=md5_gg(l,d,c,s,e[n+7],14,1735328473),c=md5_hh(c,s=md5_gg(s,l,d,c,e[n+12],20,-1926607734),l,d,e[n+5],4,-378558),d=md5_hh(d,c,s,l,e[n+8],11,-2022574463),l=md5_hh(l,d,c,s,e[n+11],16,1839030562),s=md5_hh(s,l,d,c,e[n+14],23,-35309556),c=md5_hh(c,s,l,d,e[n+1],4,-1530992060),d=md5_hh(d,c,s,l,e[n+4],11,1272893353),l=md5_hh(l,d,c,s,e[n+7],16,-155497632),s=md5_hh(s,l,d,c,e[n+10],23,-1094730640),c=md5_hh(c,s,l,d,e[n+13],4,681279174),d=md5_hh(d,c,s,l,e[n],11,-358537222),l=md5_hh(l,d,c,s,e[n+3],16,-722521979),s=md5_hh(s,l,d,c,e[n+6],23,76029189),c=md5_hh(c,s,l,d,e[n+9],4,-640364487),d=md5_hh(d,c,s,l,e[n+12],11,-421815835),l=md5_hh(l,d,c,s,e[n+15],16,530742520),c=md5_ii(c,s=md5_hh(s,l,d,c,e[n+2],23,-995338651),l,d,e[n],6,-198630844),d=md5_ii(d,c,s,l,e[n+7],10,1126891415),l=md5_ii(l,d,c,s,e[n+14],15,-1416354905),s=md5_ii(s,l,d,c,e[n+5],21,-57434055),c=md5_ii(c,s,l,d,e[n+12],6,1700485571),d=md5_ii(d,c,s,l,e[n+3],10,-1894986606),l=md5_ii(l,d,c,s,e[n+10],15,-1051523),s=md5_ii(s,l,d,c,e[n+1],21,-2054922799),c=md5_ii(c,s,l,d,e[n+8],6,1873313359),d=md5_ii(d,c,s,l,e[n+15],10,-30611744),l=md5_ii(l,d,c,s,e[n+6],15,-1560198380),s=md5_ii(s,l,d,c,e[n+13],21,1309151649),c=md5_ii(c,s,l,d,e[n+4],6,-145523070),d=md5_ii(d,c,s,l,e[n+11],10,-1120210379),l=md5_ii(l,d,c,s,e[n+2],15,718787259),s=md5_ii(s,l,d,c,e[n+9],21,-343485551),c=safe_add(c,o),s=safe_add(s,a),l=safe_add(l,r),d=safe_add(d,i);return[c,s,l,d]}function binl2rstr(e){var t,n="";for(t=0;t<32*e.length;t+=8)n+=String.fromCharCode(e[t>>5]>>>t%32&255);return n}function rstr2binl(e){var t,n=[];for(n[(e.length>>2)-1]=void 0,t=0;t<n.length;t+=1)n[t]=0;for(t=0;t<8*e.length;t+=8)n[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return n}function rstr2hex(e){var t,n,o="";for(n=0;n<e.length;n+=1)t=e.charCodeAt(n),o+="0123456789abcdef".charAt(t>>>4&15)+"0123456789abcdef".charAt(15&t);return o}function str2rstr_utf8(e){return unescape(encodeURIComponent(e))}function raw_md5(e){return function rstr_md5(e){return binl2rstr(binl_md5(rstr2binl(e),8*e.length))}(str2rstr_utf8(e))}function raw_hmac_md5(e,t){return function rstr_hmac_md5(e,t){var n,o,a=rstr2binl(e),r=[],i=[];for(r[15]=i[15]=void 0,a.length>16&&(a=binl_md5(a,8*e.length)),n=0;n<16;n+=1)r[n]=909522486^a[n],i[n]=1549556828^a[n];return o=binl_md5(r.concat(rstr2binl(t)),512+8*t.length),binl2rstr(binl_md5(i.concat(o),640))}(str2rstr_utf8(e),str2rstr_utf8(t))}var A=function md5(e,t,n){return t?n?raw_hmac_md5(t,e):function hex_hmac_md5(e,t){return rstr2hex(raw_hmac_md5(e,t))}(t,e):n?raw_md5(e):function hex_md5(e){return rstr2hex(raw_md5(e))}(e)},F=(new Date).getTime(),M=function generateId(){var e=(D.a.getStorageSync("login_info")||{}).deviceid_pdj_jd;return F+++e+Math.random().toString().substr(1)+"."+(new Date).getTime()};function pageIdFormation(e,t,n,o,a){var r="string"==typeof n?n:n===GOTO?"g":n===GOBACK?"b":"u";return A((e?e+"-":"")+(a?a+"-":"")+t+"-"+r+(o?"-"+o:""))}var W=function(){function PageStackClass(){var e=this;Object(o.a)(this,PageStackClass),this.pages=[],this.getReferPage=function(t){if(!e.pages.length)return{ref_page_name:"",ref_path:"",refPageSource:""};var n;if(e.pages.forEach((function(e,o){e.page_name==t&&(n=o-1)})),n<0)return{ref_page_name:"",ref_path:"",refPageSource:""};var o=e.pages[n]||{};return{ref_page_name:o.page_name||"",ref_path:o.cur_path||"",refPageSource:o.pageSource}}}return Object(a.a)(PageStackClass,null,[{key:"generate",value:function generate(){return PageStackClass.instance||(PageStackClass.instance=new PageStackClass),PageStackClass.instance}}]),PageStackClass}().generate(),R=n(36),V=["lat","lng","city_id","poi","lat_pos","lng_pos","pageId","ref_page","$taroTimestamp","city_name","transparentenable","ref_par","userAction"],E=function(e){Object(s.a)(Page,e);var t=Object(l.a)(Page);function Page(){var e;Object(o.a)(this,Page);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),Object(d.a)(Object(r.a)(e),"$instance",Object(I.getCurrentInstance)()),Object(d.a)(Object(r.a)(e),"firstMount",!0),Object(d.a)(Object(r.a)(e),"getPageName",(function(){return e.page_name})),Object(d.a)(Object(r.a)(e),"getPageSource",(function(){return e.pageSource})),Object(d.a)(Object(r.a)(e),"pageId",pageIdFormation(e.getPageName(),M(),"GOTO","","")),Object(d.a)(Object(r.a)(e),"getPageParams",(function(){return{pageId:e.pageId,page_name:e.getPageName(),pageSource:e.getPageSource(),request_par:Object.assign(e.isPageHome&&(D.a.getLaunchOptionsSync()||{}).query||{},(e.$instance.router||{}).params||{}),cur_path:(e.$instance.router||{}).path}})),Object(d.a)(Object(r.a)(e),"pageInfoValue",Object(_.a)(Object(_.a)({},e.getPageParams()),W.getReferPage(e.getPageName()))),e}return Object(a.a)(Page,[{key:"componentWillMount",value:function componentWillMount(){this.sendPvData("goto")}},{key:"componentDidShow",value:function componentDidShow(){this.firstMount||this.sendPvData("back")}},{key:"componentDidHide",value:function componentDidHide(){Object(R.d)(Object(_.a)({},this.pageInfoValue)),this.firstMount=!1}},{key:"sendPvData",value:function sendPvData(e){try{var t=this.getPageParams(),n=W.pages,o=W.getReferPage,a=t.page_name;if(n.length)n[n.length-1].page_name!==a&&n.push(t);else n.push(t);var r=o(a),i="";(i=(t.request_par||{}).ref_page)&&(r.ref_page_name=i),this.pageInfoValue.ref_page_name=r.ref_page_name||"",this.pageInfoValue.ref_path=r.ref_path,this.pageInfoValue.page_name=this.getPageName();var c=t.request_par,s=(c.lat,c.lng,c.city_id,c.poi,c.lat_pos,c.lng_pos,c.pageId,c.ref_page,c.$taroTimestamp,c.city_name,c.transparentenable,c.ref_par),l=c.userAction,d=Object(B.a)(c,V);if(s){var u="{}";try{"string"==typeof s?(u=decodeURIComponent(s),u=JSON.parse(u)):u=s}catch(e){u=JSON.parse("{}")}d.ref_par=u}else if(l)try{d.ref_par={userAction:decodeURIComponent(l)}}catch(e){d.ref_par={userAction:l}}t.request_par=d,"back"==e&&(t.request_par.ret_Type="back",d.ref_par={}),Object(R.c)(Object(_.a)(Object(_.a)({},t),r))}catch(e){}}}]),Page}(m.Component),z=h.a.createContext({pageId:""}),H=n(17),G=n(24),U=n(31),q=(n(136),n(95)),J=n(99),X=function requestAdpter(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={xcxVersion:"8.28.0",appVersion:"8.28.0"};return Object(q.a)(Object(_.a)(Object(_.a)({},e),t))},$=n(97),Q=function isJDLogin(){var e=(jd.getUUIdSync&&jd.getUUIdSync()||{}).deviceUUId||Object($.a)();return new Promise((function(t,n){var o=Object(G.b)("login_info")||{deviceid_pdj_jd:e};if(console.log("获取缓存现有的",o),console.log("isJDApp",H.c),H.c||"devtools"===H.d.brand){var a=Object(G.b)("address_info")||{},r={method:"GET",functionId:"login/jdMini",body:{fromPath:"djwchat_coupon",latitude:a.latitude,refPar:"",longitude:a.longitude}};o.pt_key?X(r).then((function(e){if(e&&e.result){var a=e.result||{},r=Object.assign(o,a);Object(G.c)("login_info",r),console.log("京东里设置数据222",r),t(!0)}else n(!1)})).catch((function(e){console.log("err",JSON.stringify(e)),n(!1)})):jd.requestWebCookie({needpin:1,success:function success(e){if(e){var a=e.pt_pin,i=void 0===a?"":a,c=e.ticket,s=void 0===c?"":c,l={pt_pin:encodeURI(i),pt_key:s},d=Object.assign(o,l);Object(G.c)("login_info",d),X(r).then((function(e){if(e&&e.result){var a=e.result||{},r=Object.assign(o,a);Object(G.c)("login_info",r),console.log("京东里设置数据111",r),t(!0)}else n(!1)})).catch((function(e){console.log("err",JSON.stringify(e)),n(!1)}))}else console.log("get pin fail:1 "),n(!1)},fail:function fail(e){console.log("get pin fail:2 ",e),n(!1)}})}else H.b&&(o.PDJ_H5_PIN&&o[U.e]?t(!0):jd.requestWebCookie({needpin:1,success:function success(e){if(e){var a=e.pt_pin,r=void 0===a?"":a,i=e.ticket,c=void 0===i?"":i;console.log("到家pin success==2",e);var s={};s="string"==typeof c&&c?JSON.parse(c):c;var l={pt_pin:encodeURI(r),ticket:c};l[U.d]=(s||{}).o2o_app_mobile_sid,l[U.c]=(s||{}).o2o_app_mobile_pin,l[U.e]=(s||{}).tgt,console.error("strogeLogin","data","=============="),console.error(o,l);var d=Object.assign(o,l);Object(G.c)("login_info",d),console.error("到家 setStorage成功，===",d),t(!0)}else n(!1)},fail:function fail(e){n(!1)}}))}))},Y=function withHomePage(e){return function(t){Object(s.a)(_class2,t);var n=Object(l.a)(_class2);function _class2(){var e;Object(o.a)(this,_class2);for(var t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];return e=n.call.apply(n,[this].concat(a)),Object(d.a)(Object(r.a)(e),"state",{isLoading:!1}),Object(d.a)(Object(r.a)(e),"mainPage",null),Object(d.a)(Object(r.a)(e),"$instance",D.a.getCurrentInstance()),Object(d.a)(Object(r.a)(e),"firstMount",!0),e}return Object(a.a)(_class2,[{key:"componentWillMount",value:function componentWillMount(){var e=this;H.c||H.b||"devtools"===H.d.brand?Q().then((function(){e.setState({isLoading:!0})})).catch((function(){e.setState({isLoading:!0})})):this.setState({isLoading:!0})}},{key:"componentDidMount",value:function componentDidMount(){}},{key:"componentDidShow",value:function componentDidShow(){var e=this;this.firstMount||(H.c||H.b||"devtools"===H.d.brand?Q().then((function(){e.mainPage&&e.mainPage.componentDidShow&&e.mainPage.componentDidShow()})).catch((function(){e.mainPage&&e.mainPage.componentDidShow&&e.mainPage.componentDidShow()})):this.mainPage&&this.mainPage.componentDidShow&&this.mainPage.componentDidShow())}},{key:"componentDidHide",value:function componentDidHide(){this.firstMount=!1,this.mainPage&&this.mainPage.componentDidHide&&this.mainPage.componentDidHide()}},{key:"onLoad",value:function onLoad(){this.mainPage&&this.mainPage.onLoad&&this.mainPage.onLoad()}},{key:"onUnload",value:function onUnload(){this.mainPage&&this.mainPage.onUnload&&this.mainPage.onUnload()}},{key:"onReachBottom",value:function onReachBottom(){this.mainPage&&this.mainPage.onReachBottom&&this.mainPage.onReachBottom()}},{key:"onPageScroll",value:function onPageScroll(){this.mainPag&&this.mainPage.onPageScroll&&this.mainPage.onPageScroll()}},{key:"render",value:function render(){var t=this;return this.state.isLoading?Object(g.jsx)(e,Object(_.a)(Object(_.a)({},this.props),{},{ref:function ref(e){return t.mainPage=e}})):Object(g.jsx)(k,{})}}]),_class2}(h.a.Component)},K=(n(52),n(98)),Z=n(6),ee=n(12),te=n(27),ne=n.n(te),oe=n(38),ae=n.n(oe),re=n(76),ie=n.n(re);var ce=function Badge(e,t){var n=Object(m.useState)(!!e.show),o=Object(y.a)(n,2),a=(o[0],o[1],e.style),r=e.type,i=e.text,c=e.fontSize;if(("num"==r||"navNum"==r)&&!i)return null;var s=i;return parseInt(i)>99&&(s="99+"),"num"==r&&i?Object(g.jsx)(u.e,{className:ie.a.wrapper,style:a,children:Object(g.jsx)(u.d,{className:ie.a.text,style:c,children:s})}):null},se={1:"home_icon_guanzhu.png",2:"home_icon_changguang.png",3:"home_icon_tuijian.png",4:"home_icon_new.png",5:"home_icon_24h.png"},le=function StoreLogo(e){var t=Object(m.useState)(e.item&&e.item.inCartNum||2),n=Object(y.a)(t,2),o=n[0];n[1];Object(m.useEffect)((function(){}),[]);var a,r=e.item,i=void 0===r?{}:r,c=e.hideCartNum,s="1";1!=i.isfollow&&1!=i.attentionStatus||(s="1"),1==i.recommendType&&(s="2"),2==i.recommendType&&(s="3"),6==i.recommendType&&(s="4"),7==i.recommendType&&(s="5"),a=se[s];return Object(g.jsxs)(u.e,{className:ae.a.storeLogoContainer,children:[1==(null==i?void 0:i.closeStatus)&&Object(g.jsx)(u.e,{className:ae.a.storeCloseTag,children:Object(g.jsx)(u.d,{className:ae.a.txtStoreCloseTag,children:"门店休息中"})}),Object(g.jsx)(u.a,{src:"".concat("https://static-o2o.360buyimg.com/activity/images/fe","/").concat(a),className:ae.a.storeAttention}),!c&&o>0&&Object(g.jsx)(ce,{type:"num",style:{position:"absolute",top:"-7px",right:"-7px","z-index":100},text:o}),Object(g.jsx)(u.e,{className:ae.a.storeLogoWrap,children:Object(g.jsx)(u.a,{src:i.imgUrl,className:ae.a.storeLogo})})]})},de=n(48),_e=n.n(de),ue=n(66),ge=n.n(ue),me=n(67),he=n.n(me);function DJStars(e){for(var t=e.score||e.score4,n=[],o=1;o<=5;o++){var a=40;t>=o?a=0:o-t<1&&(t%(o-1)>=.75?a=10:t%(o-1)>=.5?a=20:t%(o-1)>=.25&&(a=30)),n.push("-".concat(a/10*100,"%"))}return Object(g.jsx)(u.e,{className:he.a.starContainer,style:e.style,children:n.map((function(e,t){return Object(g.jsx)(u.e,{className:he.a.starWrap,children:Object(g.jsx)(u.a,{src:"https://img12.360buyimg.com/imagetools/jfs/t1/184843/21/31163/1909/638ef5f5E1810f063/f4aa8e2c5331e811.png",className:he.a.star,style:{left:e}})},t)}))})}function Star(e){var t=e.item,n=e.fontSize;return t.starGrade&&t.starGrade>0||t.storeStar&&t.storeStar>0?Object(g.jsxs)(u.e,{className:ge.a.storeStarContainer,children:[Object(g.jsx)(DJStars,{score4:t.storeStar||t.starGrade}),t.scoreAvg&&t.scoreAvg>0&&Object(g.jsx)(u.d,{className:ge.a.txtScoreAvg,style:{fontSize:n,marginTop:11==n?-1:0},children:t.scoreAvg})]}):Object(g.jsx)(u.d,{className:ge.a.txtStoreStar,children:"暂无评价"})}var pe=n(39),fe=n.n(pe);function StoreDistance(e){var t=(e||{}).item;return t.deliveryFirst&&t.distance?Object(g.jsxs)(u.e,{className:fe.a.startAndMonth,children:[Object(g.jsx)(u.d,{className:fe.a.txtDeliveryFirst,children:t.deliveryFirst}),Object(g.jsx)(u.d,{className:fe.a.txtDeliveryFirstLine,children:"|"}),Object(g.jsx)(u.d,{className:fe.a.txtDistance,children:t.distance})]}):t.deliveryFirst?Object(g.jsx)(u.d,{className:fe.a.txtDistance,children:t.deliveryFirst}):t.distance?Object(g.jsx)(u.d,{className:fe.a.txtDistance,children:t.distance}):null}function StoreStar(e){var t=e.item,n=e.fontSize,o=void 0===n?10:n,a=e.wrapStyle;return Object(g.jsxs)(u.e,{className:_e.a.storeStarWrap,style:a,children:[!!t.storeBrandLogo&&Object(g.jsx)(u.e,{className:_e.a.authIconView,children:Object(g.jsx)(u.a,{mode:"aspectFit",src:t.storeBrandLogo,className:_e.a.storeBrandLogo})}),Object(g.jsxs)(u.e,{className:_e.a.startAndMonth,children:[Object(g.jsx)(Star,{fontSize:o,item:t}),!!t.monthSale&&Object(g.jsx)(u.d,{className:_e.a.txtMonthSale,style:{fontSize:o},children:t.monthSale})]}),Object(g.jsx)(StoreDistance,{item:t})]})}var xe=n(77),be=n.n(xe),je=n(28),Oe=n.n(je);function Freight(e){var t=e.item,n=e.fontSize,o=void 0===n?10:n,a=e.style,r=t.freightWords||t.ferightDesc,i=t.freightDescForLine,c=void 0===i?"":i,s=t.carrierTag;if(!r)return null;return-1!=r.indexOf("|")&&r.split("|").length>0?Object(g.jsxs)(u.d,{className:Oe.a.container,style:a,children:[Object(g.jsx)(u.d,{className:Oe.a.txtFreightWords,style:{fontSize:o},children:r.split("|")[0]}),Object(g.jsx)(u.d,{className:Oe.a.freightLine,children:"|"}),Object(g.jsx)(u.d,{className:Oe.a.txtFreightWords,style:{flexShrink:1,fontSize:o},children:r.split("|")[1]})]}):Object(g.jsxs)(u.d,{className:Oe.a.container,style:a,children:[Object(g.jsx)(u.d,{className:Oe.a.txtFreightWords,style:{fontSize:o},children:r}),!!c&&Object(g.jsx)(u.d,{className:Oe.a.txtFreightForLineWords,style:{fontSize:o},children:c}),function deliveryType(){return null!=s&&s.iconText?Object(g.jsxs)(g.Fragment,{children:[(t.freightWords||t.ferightDesc||t.distance)&&Object(g.jsx)(u.d,{className:Oe.a.freightLine,children:"|"}),Object(g.jsx)(u.d,{className:Oe.a.txtFreightWords,children:null==s?void 0:s.iconText})]}):null}(),function distance(){return t.distance?Object(g.jsxs)(g.Fragment,{children:[(t.freightWords||t.ferightDesc)&&Object(g.jsx)(u.d,{className:Oe.a.freightLine,children:"|"}),Object(g.jsx)(u.d,{className:Oe.a.txtDistance,children:t.distance})]}):null}()]})}function StoreFreight(e){var t=e.item,n=(e.hasDeliveryTag,e.fontSize),o=e.wrapStyle;(t||{}).carrierTag;return Object(g.jsx)(u.e,{className:" ".concat(be.a.storeStarWrap," ").concat(t.freightWords||t.ferightDesc?null:be.a.flexEnd),style:o,children:Object(g.jsx)(Freight,{item:t,fontSize:n})})}var ve=n(78),ye=n.n(ve),Ce=n(79),Se=n.n(Ce),we=n(53),Te=n.n(we);function transferColorToRgb(e,t,n){if("string"!=typeof e&&!(e instanceof String))return console.error("请输入16进制字符串形式的颜色值");if(6!==(e="#"===e.charAt(0)?e.substring(1):e).length&&3!==e.length)return e;3===e.length&&(e=e.replace(/(\w)(\w)(\w)/,"$1$1$2$2$3$3"));for(var o=e.match(/\w{2}/g),a=0;a<o.length;a++)o[a]=parseInt(o[a],16).toString();return null!=t&&t>=0&&t<=1?"rgba(".concat(o.join(),",").concat(t,")"):"array"==n?o:"rgb("+o.join()+")"}function changeColorCode(e){return"transparent"!=e&&e?-1!=e.indexOf("#")?e:"#".concat(e):"transparent"}function EmptyTag(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t||{},o=(n.fontStyle,n.style,n.numberLines,n.forOlder),a=n.forOlderStyle,r=(null==t?void 0:t.tagOptions)||{},i=r.iconText,c=r.strokeColorCode,s=r.strokeNameColorCode,l=r.iconTextColorCode,d=r.borderOpacity;return i?(o=o||!!a&&!(null===(e=Object.keys(a))||void 0===e||!e.length),Object(g.jsx)(u.e,{className:"".concat(o?Te.a.olderStyle:Te.a.tagBox," ").concat(Te.a.emptyTagStyle),style:{borderColor:d?transferColorToRgb(c,d):changeColorCode(c)},children:Object(g.jsx)(u.d,{className:Te.a.fontSize10,style:{color:changeColorCode(s||l)},children:i})})):null}var Ne=n(33),ke=n.n(Ne);function GoldCoupon(e){var t,n=e.couponInfo,o=(e.skuInfo,null==n||n.markState,e.style,e.height||e.style&&e.style.height,e.fontSize,Object(m.useState)(!0)),a=Object(y.a)(o,2),r=a[0],i=(a[1],Object(m.useState)(null==n||null===(t=n.couponTagVOMap)||void 0===t?void 0:t[null==n?void 0:n.markState])),c=Object(y.a)(i,2),s=c[0];c[1];function renderSide(t){var o,a=s,r=a.strokeColorCode,i=a.colorCode,c=e.isOver,l=n.showButton,d={left:{borderColor:c?"#cccccc":r||"#FF8E8C",backgroundColor:c?"#ffffff":i||""},right:{borderColor:c?"#cccccc":r||"#FF8E8C",backgroundColor:c?"#ffffff":l?(null==s||null===(o=s.couponButtonTagVO)||void 0===o?void 0:o.colorCode)||"#FFF5F4":(null==s?void 0:s.colorCode)||""}}[t].borderColor;return"left"==t?Object(g.jsx)(u.e,{className:ke.a.borderLeft,style:{backgroundColor:e.parentBackgroundColor||"#fff",borderColor:d}}):Object(g.jsx)(u.e,{className:ke.a.bordersRight,style:{backgroundColor:e.parentBackgroundColor||"#fff",borderColor:d}})}function renderMiddle(){var t=s.iconText,o=s.iconTextColorCode,a=s.colorCode,r=s.strokeColorCode,i=s.couponButtonTagVO;r=r||"#FF8E8C",a=a||"",o=o||"#FF1E19";null==i||i.iconText,null==i||i.iconTextColorCode,null==i||i.colorCode;return e.isOver&&(r=o="#ccc","#E5E5E5",a="#fff"),Object(g.jsx)(u.e,{className:"".concat(ke.a.wrapper,"  ").concat(ke.a.middleWrapper),style:{borderColor:r,backgroundColor:a,paddingRight:n.showButton?0:2},children:Object(g.jsx)(u.e,{className:ke.a.left,style:{borderRightColor:a,backgroundColor:a},children:Object(g.jsx)(u.d,{className:ke.a.text,style:{color:o},children:t})})})}var l=s.iconText;return r&&s&&l?function renderCoupon(){return Object(g.jsxs)(u.e,{className:"".concat(ke.a.wrapper," ").concat(ke.a.wrapperMargin),children:[renderSide("left"),renderMiddle(),renderSide("right")]})}():null}function GoldTag(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e||{},n=t.style,o=void 0===n?{}:n,a=t.forOlder,r=t.forOlderStyle,i=t.fontStyle,c=(null==e?void 0:e.tagOptions)||{},s=c.iconText,l=c.iconTextColorCode,d=c.strokeColorCode,u=c.strokeNameColorCode,m=c.backgroundColor,h=r||{},p=h.height,f=i||{},x=f.fontSize,b=a?{height:p,fontSize:x}:{};return Object(g.jsx)(GoldCoupon,Object(_.a)({couponInfo:{couponTagVOMap:{2:{iconText:s,iconTextColorCode:u||l,strokeColorCode:d,colorCode:m},3:{iconText:s,iconTextColorCode:u||l,strokeColorCode:d,colorCode:m}},markState:2},style:a?r:o},b))}var Ie=n(40),De=n.n(Ie),Pe={goodsImgTag:De.a.extraGoodsImgTag,solidTag:De.a.extraSolidTag,goodsImgTagReverse:De.a.extraGoodsImgTagReverse};function ToothTag(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t||{},o=(n.fontStyle,n.style,n.start,n.end,n.type),a=n.forOlder,r=n.forOlderStyle,i=(null==t?void 0:t.tagOptions)||{},c=i.startColor,s=i.endColor,l=i.iconText,d=i.iconColor;if(!l)return null;a=a||!!r&&!(null===(e=Object.keys(r))||void 0===e||!e.length);var _=null;o&&(_=Pe[o]);var m=[changeColorCode(c),changeColorCode(s)];return Object(g.jsx)(u.e,{className:" ".concat(De.a.tagBox," ").concat(De.a.toothTagStyle," ").concat(_),style:{backgroundImage:"linear-gradient(135deg, ".concat(m[0]," 0%,").concat(m[1]," 100%)")},children:Object(g.jsx)(u.d,{className:De.a.tagName,style:{color:changeColorCode(d)||"#fff"},children:l})})}function Tag(e){var t=e||{},n=t.tags,o=void 0===n?{}:n,a=t.type,r=o||{},i=r.startColorCode,c=r.endColorCode,s=r.colorCode,l=(r.icon,i||s),d=c||s,u=r.iconTextColorCode||"#fff",m=Object(_.a)({startColor:l,endColor:d,iconColor:u},o);return"emptyTag"===a||"dadaDeliverTag"===a?Object(g.jsx)(EmptyTag,Object(_.a)({tagOptions:m},e)):"goldtag"===a?Object(g.jsx)(GoldTag,Object(_.a)({tagOptions:m},e)):"solidTag"===a||"toothTag"===a||"goodsImgTag"===a||"goodsImgTagReverse"===a?Object(g.jsx)(ToothTag,Object(_.a)({tagOptions:m},e)):void 0}function StoreCoupon(e){var t=e||{},n=t.item,o=(t.containerStyle,t.headTag),a=t.expanded,r=n||{},i=r.coupons,c=r.promoteTags,s=o?c:i,l=a?void 0:"24px";if(!s||s&&0==s.length)return null;var d=s.map((function(e,t){var n=e||{},o=n.words,a=n.outLineColor,r=n.backgroundColor,i=void 0===r?"transparent":r,c=n.frontColor,s=4!=n.couponMode?"goldtag":"emptyTag";return o?Object(g.jsx)(u.e,{className:Se.a.tagItem,children:Object(g.jsx)(Tag,{tags:{strokeNameColorCode:c,strokeColorCode:a,iconText:o,backgroundColor:i},fontStyle:{color:c},type:s},"coupons".concat(t))},"view".concat(t)):null}));return Object(g.jsx)(u.e,{style:{width:"100%",height:l,overflow:"hidden"},id:"testHeight",children:Object(g.jsx)(u.e,{className:Se.a.container,children:d})})}var Le=n(68),Be=n.n(Le),Ae=n(34),Fe=n.n(Ae);function CouponExpand(e){var t=e.middleWidth,n=e.wrapStyle,o=void 0===n?{}:n,a=e.textStyle,r=void 0===a?{}:a,i=e.textSize,c=void 0===i?11:i,s=e.data,l=void 0===s?{}:s,d=e.isChecked,m=void 0!==d&&d,h=e.priceSize,p=void 0===h?11:h,f=null==l?void 0:l.startColorCode,x=null==l?void 0:l.endColorCode,b=null==l?void 0:l.iconUrl;m&&(f="#4BD662",x="#4BD662",b=null==l?void 0:l.selectIconUrl);var j=[f||"#FF6963",x||"#FF6963"];return Object(g.jsx)(u.e,{className:Fe.a.wrapper,children:Object(g.jsx)(u.e,{className:Fe.a.wrap,style:Object(_.a)(Object(_.a)({},o),{borderWidth:.5,borderColor:"#fff"}),children:Object(g.jsx)(u.e,{style:{backgroundImage:"linear-gradient(135deg, ".concat(j[0]," 0%,").concat(j[1]," 100%)")},children:Object(g.jsxs)(u.e,{className:Fe.a.bg,children:[Object(g.jsx)(u.a,{src:b,className:Fe.a.img}),Object(g.jsxs)(u.e,{className:Fe.a.textWrap,style:Object(_.a)({},r),children:[Object(g.jsx)(u.d,{style:{fontSize:c,maxWidth:t&&t},className:Fe.a.iconText,children:null==l?void 0:l.iconText}),Object(g.jsx)(u.d,{style:{fontSize:p},className:Fe.a.price,children:null==l?void 0:l.price})]})]})})})})}var Me=Object(m.memo)(CouponExpand);function StoreTags(e){var t=e||{},n=t.item,o=t.expanded,a=n.tags||n.tag,r=[],i=o?21*(a.length||10)+25:21;21==i?r.push(a[0]||{}):r=a||[];var c=r&&r.length>0&&r.map((function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;return Object(g.jsxs)(u.e,{className:Be.a.tagBox,children:[Object(g.jsx)(Tag,{tags:n,type:"solidTag",fontStyle:{fontSize:10}}),Object(g.jsx)(u.d,{className:Be.a.tagWords,children:null==n||null===(e=n.words)||void 0===e||null===(t=e.replace)||void 0===t?void 0:t.call(e,/###/gi,",")})]},o)}));return Object(g.jsxs)(u.e,{className:Be.a.container,style:{maxHeight:i},children:[!!n.expansionCoupon&&Object(g.jsx)(Me,{data:n.expansionCoupon,wrapStyle:{marginTop:4},textStyle:{marginTop:-1},priceSize:12,textSize:11}),c]})}function IconArrow(e){var t=e.direction,n=e.size,o=e.style,a=e.arrowStyle,r=e.color,i=[],c=0;switch(t){case"bottom":i.push({translateY:-n/4}),c=45;break;case"top":c=-135,i.push({translateY:n/4});break;case"left":c=135,i.push({translateX:n/4});break;case"right":c=-45,i.push({translateX:-n/4});break;default:i.push({translateX:-n/4}),c=-45}i.push({rotate:"".concat(c,"deg")});var s=Math.round((n-2)/(2*Math.cos(Math.PI/4))),l="".concat(n,"px"),d="".concat(s,"px"),m="translateY(".concat(i[0].translateY,"px) rotate(").concat(i[1].rotate,")");return Object(g.jsx)(u.e,{style:Object(_.a)({width:l,height:l,alignItems:"center",justifyContent:"center",display:"flex"},o),children:Object(g.jsx)(u.e,{style:Object(_.a)(Object(_.a)({width:d,height:d,borderRight:"1px solid ".concat(r),borderBottom:"1px solid ".concat(r),transform:m},{transformOrigin:"center center"}),a)})})}function StoreCouponTag(e){var t=e||{},n=t.item,o=t.hasStoreTags,a=void 0===o||o,r=t.needArrow,i=void 0===r||r,c=Object(m.useState)(!1),s=Object(y.a)(c,2),l=s[0],d=s[1],_=Object(m.useState)(!1),h=Object(y.a)(_,2),p=h[0],f=h[1],x=n||{},b=x.tag,j=void 0===b?[]:b,O=x.tags,v=void 0===O?[]:O;return Object(m.useEffect)((function(){var e=D.a.createSelectorQuery();e.select("#testHeight").boundingClientRect(),e.exec((function(e){var t=e[0]&&e[0].height;f(parseInt(t,10)>50||j.length>1||v.length>1)}))}),[]),Object(g.jsxs)(u.e,{className:ye.a.container,children:[Object(g.jsxs)(u.e,{style:{flex:1},children:[Object(g.jsx)(StoreCoupon,{item:n,expanded:l}),!!a&&Object(g.jsx)(StoreTags,{item:n,expanded:l})]}),p&&i&&Object(g.jsx)(u.e,{onClick:function toggle(e){e.stopPropagation(),d(!l)},children:Object(g.jsx)(u.e,{className:ye.a.iconBox,children:Object(g.jsx)(IconArrow,{direction:l?"top":"bottom",size:10,color:"#666"})})})]})}var We=n(49),Re=n.n(We),Ve=["colors","style","deg"],Ee=function LinearGradient(e){var t=e||{},n=t.colors,o=t.style,a=t.deg,r=void 0===a?"135deg":a,i=Object(B.a)(t,Ve);return Object(g.jsx)(u.e,Object(_.a)(Object(_.a)({},i),{},{style:Object(_.a)(Object(_.a)({},o),{},{background:"linear-gradient(".concat(r,", ").concat(n[0]," 0%,").concat(n[1]," 100%)")})}))};function DJAcceptTomorrow(e){var t=e||{},n=(t.start,t.end,t.style,t.data),o=(t.fontStyle,n||{}),a=o.reserveText,r=o.timeText,i=o.startColor,c=o.endColor;return a?Object(g.jsxs)(u.e,{className:Re.a.content,children:[Object(g.jsx)(Ee,{colors:[i,c],className:Re.a.tagBox,children:Object(g.jsx)(u.d,{className:Re.a.tagText,children:a})}),Object(g.jsx)(u.e,{className:Re.a.timeBox,children:Object(g.jsx)(u.d,{className:Re.a.timeText,children:r})})]}):null}var ze=n(63),He=function StoreInfoItem(e){var t=e.item,n=void 0===t?{}:t,o=Object(m.useState)(0),a=Object(y.a)(o,2),r=a[0],i=a[1],c=Object(m.useState)(!1),s=Object(y.a)(c,2),l=s[0],d=s[1],_=Object(m.useContext)(z)||{};Object(m.useEffect)((function(){D.a.eventCenter.on("_useTouchEvent",Object(ee.a)(Object(Z.a)().mark((function _callee(){return Object(Z.a)().wrap((function _callee$(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,setAnimationAsync(!0);case 2:i(0);case 3:case"end":return e.stop()}}),_callee)}))))}),[]);var h=Object(m.useRef)(0),p=Object(m.useRef)(0),f=Object(m.useRef)(0),x=Object(m.useRef)(null);function setAnimationAsync(e){return new Promise((function(t){d((function(){return t(e),e}))}))}function _handleTouchStart(){return(_handleTouchStart=Object(ee.a)(Object(Z.a)().mark((function _callee2(t){return Object(Z.a)().wrap((function _callee2$(n){for(;;)switch(n.prev=n.next){case 0:return e.setTransformXCB&&e.setTransformXCB(),n.next=3,setAnimationAsync(!1);case 3:h.current=t.touches[0].pageX,p.current=t.touches[0].pageY,f.current=r,x.current=null;case 7:case"end":return n.stop()}}),_callee2)})))).apply(this,arguments)}var b=Object(m.useRef)(0),j=Object(m.useRef)(0),O=Object(m.useRef)(0),v=Object(m.useRef)(30);function _handleTouchEnd(){return(_handleTouchEnd=Object(ee.a)(Object(Z.a)().mark((function _callee3(e){var t;return Object(Z.a)().wrap((function _callee3$(e){for(;;)switch(e.prev=e.next){case 0:if("X"===x.current){e.next=2;break}return e.abrupt("return");case 2:return t=0,t=O.current+f.current>=0?0:O.current+f.current<=-v.current?-v.current:0===f.current&&Math.abs(O.current)<v.current/2||f.current===-v.current&&Math.abs(O.current)>v.current/2?0:-v.current,e.next=6,setAnimationAsync(!0);case 6:i(t);case 7:case"end":return e.stop()}}),_callee3)})))).apply(this,arguments)}return Object(g.jsxs)(u.e,{className:ne.a.itemContainer,children:[Object(g.jsx)(u.e,{className:"".concat(ne.a.itemContainerView," ").concat(l?ne.a.animate:""),onTouchStart:function handleTouchStart(e){return _handleTouchStart.apply(this,arguments)},onTouchMove:function handleTouchMove(e){b.current=e.touches[0].pageX,j.current=e.touches[0].pageY,O.current=b.current-h.current,Math.abs(j.current-p.current)>Math.abs(O.current)?x.current="Y":(x.current="X",0===f.current&&O.current>0||f.current===-v&&O.current<0||(Math.abs(O.current)>=v.current?(O.current=O.current<0?-v.current:v.current,i(O.current)):i(b.current-h.current+f.current)))},onTouchEnd:function handleTouchEnd(e){return _handleTouchEnd.apply(this,arguments)},style:{transform:"translateX(".concat(2*r,"px)")},children:Object(g.jsxs)(u.e,{className:ne.a.storeContainer,style:e.containerStyle,onClick:function onClick(){!function clickEv(e){Object(ze.a)({to:"store",params:{storeId:e.storeId||"",skuId:e.skuId||"",orgCode:e.orgCode||"",needAnchorSku:!0,addCart:!0,isAddCart:!0,needAddCar:!0},extraParams:{ref_page:"applet",ref_par:{traceId:e.traceId,userAction:"",pageId:_.pageId}}})}(n)},children:[Object(g.jsx)(le,{item:n}),Object(g.jsxs)(u.e,{className:ne.a.storeSkuContainer,children:[Object(g.jsx)(u.e,{className:ne.a.storeNameWrap,children:Object(g.jsx)(u.d,{className:"".concat(ne.a.storeName," ").concat(1==n.closeStatus?ne.a.txtStoreClose:""),children:n.storeName})}),Object(g.jsx)(DJAcceptTomorrow,{data:n.closeTip}),Object(g.jsx)(StoreStar,{item:n}),Object(g.jsx)(StoreFreight,{item:n}),Object(g.jsx)(StoreCouponTag,{item:n})]})]})}),Object(g.jsx)(u.e,{className:ne.a.itemContainerOhterView,children:Object(g.jsx)(u.e,{className:ne.a.itemContainerDelView,onClick:function onClick(){return function storeCancelFollowEv(t){i(0),d(!1),e.cancelFollowCb&&e.cancelFollowCb(t)}(n)},children:Object(g.jsx)(u.d,{className:ne.a.itemContainerDelText,children:"取消关注"})})})]})},Ge=function getFollowStoreList(e){var t=Object(G.b)("serverConfig");return null!=t&&t.colorSwitch?function colorRequest(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={xcxVersion:"8.28.0",appVersion:"8.28.0"};return new Promise((function(n,o){var a,r=null===(a=e.body)||void 0===a?void 0:a.pageValue;console.log(r,"requestParams?.pageValue?.page_name"),Object(J.a)(Object(_.a)(Object(_.a)({},e),t)).then((function(e){n(e)})).catch((function(t){o(t),t.data.echo&&Object(R.a)({click_id:"spclError_color",click_par:{functionId:null==e?void 0:e.functionId,code:t.data.code,echo:t.data.echo},pageName:null==r?void 0:r.page_name})}))}))}({functionId:"dj_store_getFollowStoreList",body:e}):X({functionId:"store/getFollowStoreList",body:e})},Ue=n(80),qe=n.n(Ue),Je=function StoreItem(e){var t=Object(m.useContext)(z)||{},n=Object(m.useState)([]),o=Object(y.a)(n,2),a=o[0],r=o[1],i=Object(m.useState)(!1),c=Object(y.a)(i,2),s=c[0],l=c[1],d=Object(m.useState)(!1),h=Object(y.a)(d,2),p=h[0],f=h[1],x=Object(m.useState)(e.defaultPage),b=Object(y.a)(x,2),j=b[0],O=b[1],v=Object(m.useState)(0),C=Object(y.a)(v,2),S=C[0],T=C[1],N=Object(m.useState)(!0),k=Object(y.a)(N,2),I=k[0],P=k[1],L=Object(m.useState)(!1),B=Object(y.a)(L,2),A=B[0],F=B[1],M=Object(m.useRef)(!1),W=1;var R=function useDebounce(){Ge({currentPage:W,pageSize:10,pageValue:t}).then((function(e){var t=e.isColor?e.data:e;return V(!1),new Promise((function(e){var n,o;if(null!==(n=t.result)&&void 0!==n&&null!==(o=n.data)&&void 0!==o&&o.length){var a=t.result.data.map((function(e){return Object(_.a)(Object(_.a)({},e),{},{traceId:t.traceId})}));a&&a.length?M.current=!0:(M.current=!1,1!=W&&F(!0)),r((function(t){var n=t.concat(a);return e(n),n}))}else 1!=W&&F(!0),e(!1)}))})).then((function(e){e||1!==W&&!e||(f(!0),O({tipTitle:"暂无关注商家",tipText:"现在就去逛逛",tipDesc:"哦莫，那么多丰富好物的商店都没有你喜欢的吗？",type:"nothing",callBack:function callBack(){!function jumpHome(){Object(ze.a)({to:"home"})}()}}),D.a.eventCenter.trigger("isDefault",e.length||0))})).catch((function(e){var t=e.isColor?e.data:e;V(!1),"201"==t.code||"202"==t.code?(P(!1),f(!0),O({tipTitle:"暂未登录",tipText:"立即登录",tipDesc:"快去登录，迫不及待与你相见啦~",type:"unlogin",callBack:function callBack(){Object(K.a)()}})):a.length||(f(!0),O({tipTitle:"网络请求失败",tipText:"重新加载",tipDesc:"网络离家出走啦？我要把TA找回来~",type:"nothing",callBack:function callBack(){V(!0);var e=++S;T(e),useDebounce()}}))}))},V=function showLoading(e){e?(D.a.eventCenter.trigger("_isShowLoading",!0),l(!1)):(D.a.eventCenter.trigger("_isShowLoading",!1),l(!0))};Object(m.useEffect)((function(){return D.a.eventCenter.trigger("_isShowLoading",!0),function _useReachBottom(){D.a.eventCenter.on("_useReachBottom",(function(e){M.current&&(++W,R())}))}(),R(),function(){E()}}),[]);var E=function offEventCenter(){D.a.eventCenter.off("_useReachBottom"),D.a.eventCenter.off("_handleTag")};function cancelFollowCb(e){console.log("item",e,e.storeId),function doFollow(e){return X({functionId:"store/doFollow",body:e})}({isFollow:!1,storeId:e.storeId}).then((function(t){if("0"===t.code){var n=a.filter((function(t){return e.storeId!==t.storeId}));console.log("datalistNew",n,n.length),n.length||(W=1,R()),r(n)}})).catch((function(){console.log("取消关注失败")}))}function setTransformXCB(){D.a.eventCenter.trigger("_useTouchEvent")}return s&&Object(g.jsxs)(u.e,{style:e.style,children:[p&&Object(g.jsx)(w,Object(_.a)(Object(_.a)({type:"hasNoCoupon",isHideBtn:!0,tipTitle:"暂无关注商家"},j),{},{height:"60vh"})),function showFollowStoreList(){return Object(g.jsx)(u.e,{children:a&&a.map((function(e,t){return Object(g.jsx)(He,{cancelFollowCb:cancelFollowCb,setTransformXCB:setTransformXCB,item:e},"coupon"+t)}))})}(),I&&!p&&Object(g.jsx)(u.e,{className:qe.a.bottom_txt,children:A&&Object(g.jsx)(u.e,{className:qe.a._noneCoupon,children:"没有更多门店了"})})]})},Xe=function(e){Object(s.a)(Index,e);var t=Object(l.a)(Index);function Index(){var e;Object(o.a)(this,Index);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),Object(d.a)(Object(r.a)(e),"state",{configData:[],isDefault:!1,isLoading:!1}),Object(d.a)(Object(r.a)(e),"statusBarH",0),Object(d.a)(Object(r.a)(e),"toBar",0),Object(d.a)(Object(r.a)(e),"page_name","my_favorite"),Object(d.a)(Object(r.a)(e),"pageSource","my_favorite"),Object(d.a)(Object(r.a)(e),"isPageHome",!0),e}return Object(a.a)(Index,[{key:"componentWillMount",value:function componentWillMount(){!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.taroGlobalData||{},n={},o={},a="",r=(wx.getEnterOptionsSync()||{}).query||{},i=(wx.getEnterOptionsSync()||{}).scene||"";o={wechat_version:H.d.version,app_version:"8.28.0",app_ver:"8.28.0",openId:""},n={dj_par_key:r.dj_par_key,business:r.business,sourcefrom:"index",scene:i,wxScene:i,wetchat_type:"jdTaro"};var c=function dynamicFunc(){var e=Object(G.b)(U.a)||{},n=Object(G.b)(U.f)||{},o={lat_pos:n.latitude||"",lng_pos:n.longitude||"",city_name_pos:n.cityName||"",lat_select:e.latitude||"",lng_select:e.longitude||"",poi_select:e.poi||"",city_name_select:e.cityName||"",city_id_select:e.cityId||e.areaCode||""},r="",i="",c=Object(G.b)(U.b)||{};r=c.PDJ_H5_PIN||"",i=c.o2o_m_h5_sid||"";var s=t.channel;return a||(console.log("network==",a),D.a.getNetworkType({success:function success(e){a=e.networkType},fail:function fail(){console.log("network失败")}})),Object.assign(o,{user_id:r,session_id:i,channel_name:s,network:a})};console.log("埋点初始化==="),Object(R.b)(o,c,n)}({taroGlobalData:this.getPageParams().request_par}),Object(i.a)(Object(c.a)(Index.prototype),"componentWillMount",this).call(this)}},{key:"componentDidMount",value:function componentDidMount(){var e=this;D.a.eventCenter.on("_isShowLoading",(function(t){e.setState({isLoading:!!t})}))}},{key:"onReachBottom",value:function onReachBottom(){D.a.eventCenter.trigger("_useReachBottom")}},{key:"componentDidHide",value:function componentDidHide(){Object(i.a)(Object(c.a)(Index.prototype),"componentDidHide",this).call(this)}},{key:"componentDidShow",value:function componentDidShow(){try{var e=D.a.getSystemInfoSync();e.statusBarHeight&&(this.statusBarH=e.statusBarHeight),"ios"==e.platform?this.toBar=44:"android"==e.platform?this.toBar=48:this.toBar=44}catch(e){}console.log("componentDidShow+++++++++"),Object(i.a)(Object(c.a)(Index.prototype),"componentDidShow",this).call(this)}},{key:"render",value:function render(){var e=this.state.isLoading,t=this.pageInfoValue;H.a;return Object(g.jsxs)(z.Provider,{value:t,children:[Object(g.jsxs)(u.e,{className:L.a.bg,style:!1,children:[!1,Object(g.jsx)(Je,{})]}),e&&Object(g.jsx)(k,{})]})}}]),Index}(E);t.default=Y(Xe)},15:function(e,t,n){e.exports={container:"index-module__container___2lNI1",coupon:"index-module__coupon___aCYv4",left_icon:"index-module__left_icon___2JgKX",circleIcon:"index-module__circleIcon___1Fycg",circleIconImage:"index-module__circleIconImage___3kzPT",amount_box:"index-module__amount_box___K0nPA",amount:"index-module__amount___2MsFc",unit:"index-module__unit___i9ZSH",limit:"index-module__limit___34icU",coupon_detail:"index-module__coupon_detail___32-WP",coupon_title:"index-module__coupon_title___2spLt",coupon_type:"index-module__coupon_type___pKm5c",sumTag:"index-module__sumTag___3Nt1W",coupon_date:"index-module__coupon_date___1ExOv",right_icon:"index-module__right_icon___385Vq",to_use:"index-module__to_use___dxonP",couponDetail:"index-module__couponDetail___3nNtM",line:"index-module__line___2LCGz",detailTitle:"index-module__detailTitle___P9gLm",text:"index-module__text___qBiHB",detailList:"index-module__detailList___1j7bE",tapArea:"index-module__tapArea___24TfG",icon_arrow:"index-module__icon_arrow___3SsMr",icon_arrow_up:"index-module__icon_arrow_up___OqSZW"}},27:function(e,t,n){e.exports={itemContainer:"index-module__itemContainer___2zG8E",itemContainerView:"index-module__itemContainerView___1FFKa",itemContainerOhterView:"index-module__itemContainerOhterView___30d7k",animate:"index-module__animate___2H7Kj",itemContainerDelView:"index-module__itemContainerDelView___1ueQt",itemContainerDelText:"index-module__itemContainerDelText___3R66W",storeContainer:"index-module__storeContainer___2o8wV",storeSkuContainer:"index-module__storeSkuContainer___4J8cR",storeNameWrap:"index-module__storeNameWrap___1QFgQ",storeName:"index-module__storeName___2d9ry",txtStoreClose:"index-module__txtStoreClose___NUW1a",authIconView:"index-module__authIconView___56cu4",storeBrandLogo:"index-module__storeBrandLogo___qOayp",bizTag:"index-module__bizTag___UtBUM"}},28:function(e,t,n){e.exports={container:"index-module__container___aOkfg",freightLine:"index-module__freightLine___337U2",txtFreightWords:"index-module__txtFreightWords___12GQ-",txtFreightForLineWords:"index-module__txtFreightForLineWords___1BGaa"}},29:function(e,t,n){e.exports={bg:"index-module__bg___vuVex",content:"index-module__content___8-LTS",title:"index-module__title___vLdGx",input_box:"index-module__input_box___3ZSEP",input_class:"index-module__input_class___3jvng",btn_box:"index-module__btn_box___2__5y",confirm_btn:"index-module__confirm_btn___2I8q7",cancel_btn:"index-module__cancel_btn___2Fo-o"}},33:function(e,t,n){e.exports={borderLeft:"index-module__borderLeft___1z3C5",bordersRight:"index-module__bordersRight___2Klb0",rnshuimage:"index-module__rnshuimage___Lt1SU",rnshu:"index-module__rnshu___Omuh7",shu:"index-module__shu___1hdIr",wrapper:"index-module__wrapper___2_gyh",middleWrapper:"index-module__middleWrapper___29LLS",wrapperMargin:"index-module__wrapperMargin___9rZ-t",text:"index-module__text___1K5Ls",left:"index-module__left___uU4fA"}},34:function(e,t,n){e.exports={wrapper:"index-module__wrapper___2Ms-C",wrap:"index-module__wrap___1rYj_",img:"index-module__img___2DRwf",bg:"index-module__bg___NfEua",textWrap:"index-module__textWrap___28khe",iconText:"index-module__iconText___3rYIA",price:"index-module__price___25Xpg"}},38:function(e,t,n){e.exports={storeLogoContainer:"index-module__storeLogoContainer___2rrKW",storeCloseTag:"index-module__storeCloseTag___plEeF",txtStoreCloseTag:"index-module__txtStoreCloseTag___3zSsw",storeAttention:"index-module__storeAttention___34roC",cartNum:"index-module__cartNum___3HqCM",storeLogoWrap:"index-module__storeLogoWrap___zmNBy",storeLogo:"index-module__storeLogo___t2aeN"}},39:function(e,t,n){e.exports={startAndMonth:"index-module__startAndMonth___GB_sz",txtDeliveryFirst:"index-module__txtDeliveryFirst___3nG8M",txtDeliveryFirstLine:"index-module__txtDeliveryFirstLine___2oEyD",txtDistance:"index-module__txtDistance___3Dy9C"}},40:function(e,t,n){e.exports={tagBox:"index-module__tagBox___2nYrB",tagName:"index-module__tagName___XRQD2",toothTagStyle:"index-module__toothTagStyle___KqQHM",extraGoodsImgTag:"index-module__extraGoodsImgTag___1jqHL",extraSolidTag:"index-module__extraSolidTag___3FlcQ",extraGoodsImgTagReverse:"index-module__extraGoodsImgTagReverse___2Q2AD"}},47:function(e,t,n){e.exports={tipcontainer:"index-module__tipcontainer___2ADbc",img:"index-module__img___1GIbW",tipButton:"index-module__tipButton___14tpa",tipTitle:"index-module__tipTitle___nIgAo",tipDesc:"index-module__tipDesc___3k4i-"}},48:function(e,t,n){e.exports={storeStarWrap:"index-module__storeStarWrap___15R0R",startAndMonth:"index-module__startAndMonth___s5Mtz",txtMonthSale:"index-module__txtMonthSale___34j69",authIconView:"index-module__authIconView___2d1tv",storeBrandLogo:"index-module__storeBrandLogo___cr1Xb"}},49:function(e,t,n){e.exports={content:"index-module__content___fj5nW",tagBox:"index-module__tagBox___1_sYi",tagText:"index-module__tagText___1x39S",timeBox:"index-module__timeBox___2sux9",timeText:"index-module__timeText___1CN_O"}},52:function(e,t,n){e.exports={ch_top:"index-module__ch_top___3NOrD",tobar:"index-module__tobar___1RhOH",back:"index-module__back___M_57p",left_custom_class:"index-module__left_custom_class___1r5KW",title:"index-module__title___3MOZ3"}},53:function(e,t,n){e.exports={tagBox:"index-module__tagBox___3hkvZ",olderStyle:"index-module__olderStyle___1wac3",emptyTagStyle:"index-module__emptyTagStyle___3-MjX",tagStyleForAndroid:"index-module__tagStyleForAndroid___toJyC",fontSize10:"index-module__fontSize10___RmfBQ"}},66:function(e,t,n){e.exports={storeStarContainer:"index-module__storeStarContainer___TTIed",txtScoreAvg:"index-module__txtScoreAvg___RsQq4",txtStoreStar:"index-module__txtStoreStar___37IWu"}},67:function(e,t,n){e.exports={starContainer:"index-module__starContainer___3XfGa",starWrap:"index-module__starWrap___1F41v",star:"index-module__star___yLZIg"}},68:function(e,t,n){e.exports={container:"index-module__container___3cQiT",tagBox:"index-module__tagBox___Owfhm",tagWords:"index-module__tagWords___32pFC"}},76:function(e,t,n){e.exports={wrapper:"index-module__wrapper___2Gm_g",text:"index-module__text___2lZ0G"}},77:function(e,t,n){e.exports={storeStarWrap:"index-module__storeStarWrap___1WGIL",flexEnd:"index-module__flexEnd___3eJUl",freightTag:"index-module__freightTag___2I788",freightTagText:"index-module__freightTagText___389ww",freightLine:"index-module__freightLine___1Z3ci",txtFreightWords:"index-module__txtFreightWords___369eQ",txtDistance:"index-module__txtDistance___3JeTv"}},78:function(e,t,n){e.exports={container:"index-module__container___sNrxS",iconBox:"index-module__iconBox___3cYVj"}},79:function(e,t,n){e.exports={container:"index-module__container___1N8AL",tagItem:"index-module__tagItem___10ln7",tag:"index-module__tag___1fg70"}},80:function(e,t,n){e.exports={bottom_txt:"index-module__bottom_txt___8tvGx",bottom_h:"index-module__bottom_h___1DSjz",_noneCoupon:"index-module___noneCoupon___15asJ",itemContainer:"index-module__itemContainer___hw0Z9",itemContainerView:"index-module__itemContainerView___M6mJv",itemContainerOhterView:"index-module__itemContainerOhterView___1ip8A",animate:"index-module__animate___CenQs"}},92:function(e,t,n){e.exports={loading:"index-module__loading___2hJGS"}},94:function(e,t,n){e.exports={apibox:"index-module__apibox___1wiyP",index:"index-module__index___3VC_5",bg:"index-module__bg___30jit",jdTitle:"index-module__jdTitle___ifeqj"}},97:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return o}));var o=function genDeviceId(){for(var e=[],t="0123456789abcdefghijklmnopqrstuv",n=0;n<36;n++)e[n]=t.substr(Math.floor(16*Math.random()),1);return e[14]="4",e[19]=t.substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="-",e.join("")}}).call(this,n(5).document)}},[[100,0,3]]]);