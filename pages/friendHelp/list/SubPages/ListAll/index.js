"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _class,_temp2,_createClass=function(){function r(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,i){return t&&r(e.prototype,t),i&&r(e,i),e}}(),_get=function e(t,i,r){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,i);return void 0!==n?"value"in n?n.value:void 0!==(n=n.get)?n.call(r):void 0:null!==(n=Object.getPrototypeOf(t))?e(n,i,r):void 0},_index=require("../../../../../npm/@tarojs/taro-weapp/index.js"),_index2=_interopRequireDefault(_index),_indexWeapp=require("../../../../../npm/@jd/djmp/common-t/js/share/index.weapp.js"),_indexWeapp2=require("../../../../../npm/@jd/djmp/common-t/js/bi/index.weapp.js"),_indexWeapp3=require("../../../../../npm/@jd/djmp/common-t/js/env/index.weapp.js"),_indexWeapp4=require("../../../../../npm/@jd/djmp/common-t/js/epBi/index.weapp.js"),_indexWeapp5=_interopRequireDefault(_indexWeapp4);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}_temp2=_class=function(){function a(){var e,t;_classCallCheck(this,a);for(var i=arguments.length,r=Array(i),n=0;n<i;n++)r[n]=arguments[n];return(e=t=_possibleConstructorReturn(this,(t=a.__proto__||Object.getPrototypeOf(a)).call.apply(t,[this].concat(r)))).$usedState=["loopArray60","listArr","isExposure","list","refreshList"],t.customComponents=["Card"],_possibleConstructorReturn(t,e)}return _inherits(a,_index.Component),_createClass(a,[{key:"_constructor",value:function(e){_get(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"_constructor",this).call(this,e),this.shareFlag=!0,this.Exposure=null,this.$$refs=[]}},{key:"componentDidMount",value:function(){1==this.props.isExposure&&(this.Exposure=new _indexWeapp5.default(".content >>> .exposure",this.$scope),this.callInitObserver())}},{key:"callInitObserver",value:function(){this.Exposure&&this.Exposure.initObserver&&this.Exposure.initObserver()}},{key:"_createData",value:function(){var a=this,o=(this.__state=arguments[0]||this.state||{},this.__props=arguments[1]||this.props||{},this.$prefix),e=this.__props.list||[],s=this.__props.isExposure,t=0<e.length?e.map(function(e,t){e={$original:(0,_index.internal_get_original)(e)};var i=s?JSON.stringify(e.$original.userAction):null,r=s?t+"index":null,n=(0,_index.genCompid)(o+"uVOdGHOywG"+t),t=(s||_index.propsManager.set({result:e.$original,refreshList:a.__props.refreshList,onClickBtn:a.onClickBtn.bind(a,e.$original),onClickCard:a.onClickCard.bind(a,e.$original),onShareSubscribEvent:a.onClickShareSubscribe.bind(a)},n),(0,_index.genCompid)(o+"BBkOuagmEl"+t));return s&&_index.propsManager.set({result:e.$original,refreshList:a.__props.refreshList,onClickBtn:a.onClickBtn.bind(a,e.$original),onClickCard:a.onClickCard.bind(a,e.$original),onShareSubscribEvent:a.onClickShareSubscribe.bind(a)},t),{$loopState__temp2:i,$loopState__temp4:r,$compid__238:n,$compid__239:t,$original:e.$original}}):[];return Object.assign(this.__state,{loopArray60:t,listArr:e,isExposure:s}),this.__state}},{key:"onClickShareSubscribe",value:function(e){this.props.onShareSubscribEvent(e)}},{key:"_throttle",value:function(e){var t=this;this.shareFlag&&(this.shareFlag=!1,e.apply(this,arguments),setTimeout(function(){t.shareFlag=!0},1e3))}},{key:"onClickBtn",value:function(e){this.onClickShare(e),(0,_indexWeapp2.clickReport)({create_time:new Date,click_id:"ClickInviteFriend",click_par:{is_start:e.status}})}},{key:"onClickShare",value:function(t){var i=this,r="https://storage.360buyimg.com/wximg/friendhelp/default_share_img.jpg",e=t.shareAb,n=void 0===e?{}:e,a=""+window.location.origin+window.location.pathname+"#/pages/sharePreview-t/index?image="+r+"&title=好友助力";this._throttle(function(){var e={djNewShare:1,appId:"gh_5103b94a8a56",title:t.shareText||t.name||"好友助力",mpImgUrl:t.shareUrl||"https://imgcps.jd.com/xappcms/image_37782570/image_37783007/image_37782570/IA/IA/IA/IA/IA/IA/t-5dca76a51439a4d971f5e4b9/75c75d51.jpg",path:"/pages/friendHelp/detail/index?activityId="+t.activityId+"&groupId="+t.groupId+"&channel="+i.taroShareCode().cardChannel+"&sceneId="+t.sceneId+"&materialId="+t.materialId+"&tempId="+t.tempId+"&strategyName="+n.strategyName+"&experimentName="+n.experimentName,imgUrl:t.shareUrl||"https://imgcps.jd.com/xappcms/image_37782570/image_37783007/image_37782570/IA/IA/IA/IA/IA/IA/t-5dca76a51439a4d971f5e4b9/75c75d51.jpg",desc:t.shareText||t.name||"",shareUrl:a,pyqImg:r,channel:"Wxfriends",callback:"",clickcallback:""};(0,_indexWeapp.openShare)(e)})}},{key:"onClickCard",value:function(e){this.props.onClickCard(e,"list")}},{key:"taroShareCode",value:function(){var e="00",t="00",i={},t=_indexWeapp3.isJDApp?_indexWeapp3.isJDReactNativeWebView?(e="01","02"):(e="03","04"):_indexWeapp3.isDaojiaApp?_indexWeapp3.isIOS?(e="05","06"):(e="07","08"):_indexWeapp3.isWeixin?(e="09","10"):(e="11","12");return i.circleChannel=e,i.cardChannel=t,i}}]),a}(),_class.$$events=[],_class.options={addGlobalClass:!0},_class.$$componentPath="pages/friendHelp/list/SubPages/ListAll/index";var ListAll=_temp2;exports.default=ListAll,Component(require("../../../../../npm/@tarojs/taro-weapp/index.js").default.createComponent(ListAll));