"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_indexH=require("../env/index.h5.js"),_indexH2=require("../cookie/index.h5.js"),_indexH3=require("../../constants/index.h5.js"),_indexH4=require("../plaintextList/index.h5.js");function sync(){try{_indexH.isDaojiaApp?(0,_indexH2.getCookie)(_indexH3.PDJ_H5_DEVICEID_KEY)&&(0,_indexH2.getCookie)(_indexH3.PDJ_H5_SID_KEY)?(0,_indexH4.getPlaintextList)():(console.log("getAppCookiesSync"),new Promise(function(o,i){var n="";try{_indexH.isIOS?_indexH.supportDJSHWK?(window.syncIosAppCookie=function(e){e&&0!=e.length?o(n=e):i(e)},window.webkit.messageHandlers.MobileNavi.postMessage({method:"getAppCookie",params:JSON.stringify(""),callBackName:"syncIosAppCookie",callBackId:null})):(n=getAppCookie(),o(n)):_indexH.isAndroid&&(n=window.djJava.getAppCookie(),console.log(" window.djJava.getAppCookie()",n),o(n))}catch(e){i(e)}}).then(function(e){var o;console.log("getAppCookiesSync then",e),o=e,console.log("syncCookies",o,void 0===o?"undefined":_typeof(o)),o?(e=o||{},(e="string"==typeof o?JSON.parse(o):o||{})&&e.deviceId&&((0,_indexH2.getCookie)(_indexH3.PDJ_H5_DEVICEID_KEY)&&(console.error("getCookie(PDJ_H5_DEVICEID_KEY)",(0,_indexH2.getCookie)(_indexH3.PDJ_H5_DEVICEID_KEY)),(0,_indexH2.removeCookie)(_indexH3.PDJ_H5_DEVICEID_KEY)),console.error("pin.deviceId",e.deviceId),(0,_indexH2.setCookie)(_indexH3.PDJ_H5_DEVICEID_KEY,e.deviceId,365)),e&&e.o2o_app_mobile_pin&&((0,_indexH2.getCookie)(_indexH3.PDJ_H5_JDPIN_KEY)&&(console.error("getCookie(PDJ_H5_JDPIN_KEY)",(0,_indexH2.getCookie)(_indexH3.PDJ_H5_JDPIN_KEY)),(0,_indexH2.removeCookie)(_indexH3.PDJ_H5_JDPIN_KEY)),console.error("pin.deviceId",e.o2o_app_mobile_pin),(0,_indexH2.setCookie)(_indexH3.PDJ_H5_JDPIN_KEY,e.o2o_app_mobile_pin,365)),e&&e.o2o_app_mobile_sid&&((0,_indexH2.getCookie)(_indexH3.PDJ_H5_SID_KEY)&&(console.error("getCookie(PDJ_H5_SID_KEY)",(0,_indexH2.getCookie)(_indexH3.PDJ_H5_SID_KEY)),(0,_indexH2.removeCookie)(_indexH3.PDJ_H5_SID_KEY)),console.error("pin.o2o_app_mobile_sid",e.o2o_app_mobile_sid),(0,_indexH2.setCookie)(_indexH3.PDJ_H5_SID_KEY,e.o2o_app_mobile_sid,365))):console.log("返回数据为空"),(0,_indexH2.getCookie)(_indexH3.PDJ_H5_DEVICEID_KEY)||(0,_indexH2.setCookie)(_indexH3.PDJ_H5_DEVICEID_KEY,_indexH.djDeviceId),(0,_indexH4.getPlaintextList)()}).catch(function(e){console.log("getAppCookiesSync catch",JSON.stringify(e)),(0,_indexH2.getCookie)(_indexH3.PDJ_H5_DEVICEID_KEY)||(0,_indexH2.setCookie)(_indexH3.PDJ_H5_DEVICEID_KEY,_indexH.djDeviceId),(0,_indexH4.getPlaintextList)()})):_indexH.isJDApp?(console.error("isJDApp---------------",_indexH.isJDApp),(0,_indexH2.getCookie)(_indexH3.PDJ_H5_DEVICEID_KEY)?(console.error("走到了这里-22222222--------------"),(0,_indexH4.getPlaintextList)()):(console.error("getJdSysInfoSync"),new Promise(function(i,n){try{window.getJdAppInfoCallback=function(e){console.error(e);var o=JSON.parse(e),e=o.status,o=o.data;0==e?i(o):n()},_indexH.isIOS?window.webkit.messageHandlers.JDAppUnite.postMessage({method:"getPhoneBasicInfo",params:"getJdAppInfoCallback"}):_indexH.isAndroid&&window.JDAppUnite&&window.JDAppUnite.getPhoneBasicInfo("getJdAppInfoCallback")}catch(e){n(e)}}).then(function(e){console.error("then",e),(0,_indexH2.setCookie)(_indexH3.PDJ_H5_DEVICEID_KEY,e.uuid),(0,_indexH4.getPlaintextList)()}).catch(function(){console.error("catch",res),(0,_indexH4.getPlaintextList)()}))):(console.error("走到了这里-333333333333333--------------"),(0,_indexH4.getPlaintextList)())}catch(e){(0,_indexH4.getPlaintextList)()}}sync();