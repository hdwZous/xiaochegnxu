"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _class,_temp2,_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a,o=arguments[t];for(a in o)Object.prototype.hasOwnProperty.call(o,a)&&(e[a]=o[a])}return e},_createClass=function(){function o(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,a){return t&&o(e.prototype,t),a&&o(e,a),e}}(),_get=function e(t,a,o){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,a);return void 0!==n?"value"in n?n.value:void 0!==(n=n.get)?n.call(o):void 0:null!==(n=Object.getPrototypeOf(t))?e(n,a,o):void 0},_index=require("../../../npm/@tarojs/taro-weapp/index.js"),_index2=_interopRequireDefault(_index),_indexModuleScssMap=require("./index.module.scss.map.js"),_indexModuleScssMap2=_interopRequireDefault(_indexModuleScssMap),_indexWeapp=require("../../../npm/@jd/djmp/common-t/js/bi/index.weapp.js"),_vpayMember=require("../api/vpayMember.js"),_indexWeapp2=require("../../../npm/@jd/djmp/common-t/js/taroapi/index.weapp.js"),_indexWeapp3=require("../../../npm/@jd/djmp/common-t/js/login/index.weapp.js"),_indexWeapp4=require("../../../npm/@jd/djmp/common-t/js/location/index.weapp.js"),_indexWeapp5=require("../../../npm/@jd/djmp/common-t/js/jump/index.weapp.js"),_indexWeapp6=require("../../../npm/@jd/djmp/common-t/js/storage/index.weapp.js"),_indexWeapp7=require("../../../npm/@jd/djmp/common-t/js/env/index.weapp.js");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _asyncToGenerator(e){return function(){var s=e.apply(this,arguments);return new Promise(function(i,r){return function t(e,a){try{var o=s[e](a),n=o.value}catch(e){return void r(e)}if(!o.done)return Promise.resolve(n).then(function(e){t("next",e)},function(e){t("throw",e)});i(n)}("next")})}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var vStartTime=(new Date).getTime(),vipHome=(_temp2=_class=function(){function i(){var e,o;_classCallCheck(this,i);for(var t=arguments.length,a=Array(t),n=0;n<t;n++)a[n]=arguments[n];return(e=o=_possibleConstructorReturn(this,(e=i.__proto__||Object.getPrototypeOf(i)).call.apply(e,[this].concat(a)))).$usedState=["_$anonymousState__temp3","$compid__134","tipType","_$_$anonymousState__temp","openedData","_$_$anonymousState__temp2","vipFlag","channel","style","className","anonymousState__temp3","anonymousState__temp4","notOpenData","anonymousState__temp5","addressObj","tipMsg","isLoading","tipsText","userCardType","toStoreHide","merchantNewData","loadingStore","shouldGetShopFlag","vipGoodsList","isLoginFlag","storeRpList","vipGoodsListTotal","shopQuata","showMoreFlag","showRpListLoad"],o.config={navigationBarTitleText:"会员中心",navigationBarBackgroundColor:"#ffffff",navigationBarTextStyle:"black"},o.handleInit=function(){(0,_indexWeapp4.getLocation)().then(function(e){o.getPlusMain(e)}).catch(function(e){o.setState({isLoading:!1,tipType:"noWifi",tipMsg:"未获取到地理位置"})})},o.getPlusMain=function(e){var t=o.$router.params.channel,a={longitude:e.longitude||"",latitude:e.latitude||"",cityId:e.cityId||e.areaCode||e.cityCode||e.code||e.RNuserCityId||"",userCardType:-1,requestor:"vplus-home",pageVersion:"V8",pointChannel:t};(0,_vpayMember.api_plus_main_new)(a).then(function(){var e,t=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).result;t.floorList&&0==t.floorList.length?(o.setState({isLoading:!1,tipType:"noWifi",tipMsg:"活动结束啦，下次早点来哦~"}),(0,_indexWeapp2.hideLoading)()):(e={isLoading:!1,vipFlag:t.vipFlag,addressObj:{longitude:a.longitude,latitude:a.latitude,cityId:a.cityId},tipType:"",tipMsg:"",tipsText:t.tipsText||"",userCardType:t.userCardType},o.dealData(t,a,e)),(0,_indexWeapp2.hideLoading)()}).catch(function(e){o.setState({isLoading:!1,tipType:"noWifi",tipMsg:(e||{}).msg||""}),(0,_indexWeapp2.hideLoading)()})},o.customComponents=["Tip","MemberBoxNew","ExchangeShopCoupon","Loading","Swipe","RightsArea","VipDay","MerchantEnvelopesNew","ReturnToStore","Goods"],_possibleConstructorReturn(o,e)}var a,e;return _inherits(i,_index.Component),_createClass(i,[{key:"_constructor",value:function(e){_get(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"_constructor",this).call(this,e),this.state={addressObj:{},tipType:"",tipMsg:"",isLoading:!0,tipsText:"",userCardType:"",toStoreHide:!0,merchantNewData:{showMerchantMore:!0,floorItem:[]},loadingStore:!1,shouldGetShopFlag:!1,openedData:{},notOpenData:{},vipGoodsList:[],isLoginFlag:!1,storeRpList:[],vipGoodsListTotal:0,shopQuata:"",showMoreFlag:!0,showRpListLoad:!0},this.jumpUrl="/pages/vpayMember-t/home/index",this.pageCount=1,this.$$refs=[]}},{key:"componentDidShow",value:(e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(a=this.$router.params).userAction&&(this.userAction=decodeURIComponent(a.userAction)),t="",a.userCardType&&(t=a.userCardType),a=!1,e.prev=6,e.next=9,(0,_indexWeapp3.isLogin)();case 9:a=e.sent,e.next=15;break;case 12:e.prev=12,e.t0=e.catch(6),a=!1;case 15:this.handleInit(),this.setState({isLoginFlag:a,userCardType:t}),(0,_indexWeapp.pvReport)({create_time:new Date}),(0,_indexWeapp.clickReport)({create_time:new Date,click_id:"show_old_vip_home"});case 19:case"end":return e.stop()}},e,this,[[6,12]])})),function(){return e.apply(this,arguments)})},{key:"goBack",value:function(){_index2.default.navigateBack({delta:2})}},{key:"componentDidMount",value:function(){var i=this,e=this.$router.params,t=e.payState,t=void 0===t?"":t,a=e.business,a=void 0===a?"":a,o=e.storeId,o=void 0===o?"":o,n=e.fromChannel,n=void 0===n?"":n;e.channel,(0,_indexWeapp6.getStorageSync)("vp_pay_success");getApp().globalData.qrcode.business=a,"paySuccess"==t&&(0,_indexWeapp2.showToast)({title:"恭喜！您已开通会员 快去使用会员特权吧"}),n&&(_index2.default.showModal({title:"",content:"已开通V+会员，可享会员权益",confirmText:"查看权益",cancelText:"返回上级",success:function(e){e.confirm?(0,_indexWeapp.clickReport)({create_time:new Date,click_id:"clickLayer",click_par:{type:"viewRights"}}):e.cancel&&i.goBack()}}),(0,_indexWeapp.clickReport)({create_time:new Date,click_id:"showLayer",click_par:{type:"viewRights"}})),"paySuccess"==t&&o&&""!=o&&((0,_vpayMember.storeInfoFun)({storeId:o||""}).then(function(e){if(0==e.code&&e.result){e=e.result||{};if(e.storeStar){for(var t,a=[],o=Math.floor(e.storeStar),n=0;n<o;n++)a[n]=n;t=0<e.storeStar%1?e.storeStar%1*100:0,e.allStartNum=a,e.halfStartNum=t}i.setState({toStoreHide:!1,toStoreItem:e})}}).catch(function(e){}),(0,_indexWeapp.clickReport)({create_time:new Date,click_id:"show_storepop",click_par:{storeId:o}}))}},{key:"_createData",value:function(){this.__state=arguments[0]||this.state||{},this.__props=arguments[1]||this.props||{};var e,t,a,o=this.$prefix,n=(0,_index.genCompid)(o+"$compid__134"),i=this.$router.params.channel,r=this.__state,s=r.tipType,p=r.tipMsg,d=r.addressObj,l=r.vipFlag,c=r.openedData,c=void 0===c?{}:c,r=r.notOpenData,r=void 0===r?{}:r,s=(s&&_index.propsManager.set({type:s,msg:p,style:e={height:"100vh"},longitude:d.longitude,cityId:d.cityId,latitude:d.latitude,jumpUrl:this.jumpUrl,handlerReload:this.handleInit},n),1==l&&(a=void 0,t=this._createVipData(o+"asxXKokwnY")(),a=c.btnData&&c.btnData.floorItem?this._createOpenBtnData(o+"TPlNINeijP")(c.btnData):null),[_indexModuleScssMap2.default.vipMemberBoxNotOpen]),p=(r.btnData&&(3==l?s.push("findpage"==i?_indexModuleScssMap2.default.pdbtm_find_overtime:_indexModuleScssMap2.default.pdbtm_overtime):s.push("findpage"==i?_indexModuleScssMap2.default.pdbtm_find:_indexModuleScssMap2.default.pdbtm)),0==l?this._createNotOpenData(o+"egxrxoOUGJ")():null),d=3==l?this._createNotOpenData(o+"vDGmwrNTHB")():null,c=r.btnData&&r.btnData.floorItem?this._createOpenBtnData(o+"vjTATPxwvA")(r.btnData):null;return Object.assign(this.__state,{_$anonymousState__temp3:e,$compid__134:n,_$_$anonymousState__temp:t,_$_$anonymousState__temp2:a,vipFlag:l,channel:i,style:_indexModuleScssMap2.default,className:s,anonymousState__temp3:p,anonymousState__temp4:d,anonymousState__temp5:c}),this.__state}},{key:"_createNotOpenData",value:function(x){var b=this;return function(){var e=(0,_index.genCompid)(x+"$compid__135"),t=(0,_index.genCompid)(x+"$compid__136"),a=(0,_index.genCompid)(x+"$compid__137"),o=(0,_index.genCompid)(x+"$compid__138"),n=(0,_index.genCompid)(x+"$compid__139"),i=b.state,r=i.userCardType,s=i.storeRpList,p=i.shopQuata,d=i.notOpenData,l=i.vipFlag,c=i.showRpListLoad,i=(i.isLoginFlag,d.headData),u=d.vipCouppons,_=(d.vipRights,d.btnData),g=d.marqueeData,m=d.shopsData,h=d.bannerData,d=d.vipGoodsListObj,g=g&&g.floorItem?g.floorItem:[],f=m.secondTitle,f=void 0===f?"":f,m=m.title,m=void 0===m?"":m,v=u&&u.floorItem&&u.floorItem.rpList&&u.floorItem.rpList.length?b._createCouponsData(x+"PenfjqQpyc")(u):null,y=d?b._createVipGoodsData(x+"jJrmzpWYXg")():null;return i&&_index.propsManager.set({vipFlag:l,marqueeData:g,headData:i,userCardType:r},e),s&&s.length&&_index.propsManager.set({loadMore:b.getNearBigCouponFn.bind(b,"more"),vipFlag:l,data:s,shopQuata:p,secondTitle:f,title:m},t),s&&!s.length&&c&&_index.propsManager.set({selfStyle:!0},a),h&&h.floorItem&&_index.propsManager.set({imgArr:h.floorItem,indicatorDots:h.floorItem&&1<h.floorItem.length,form:"vip",autoplay:!0,jumpPage:b.jumpPage.bind(b)},o),_&&_.floorItem&&_.floorItem.buttonStyleResult&&_.floorItem.buttonStyleResult.floorConfigDataList.length&&_index.propsManager.set({vipFlag:l,type:"newStyle",data:_.floorItem.buttonStyleResult.floorConfigDataList},n),{$compid__135:e,$compid__136:t,$compid__137:a,$compid__138:o,$compid__139:n,style:_indexModuleScssMap2.default,headData:i,vipFlag:l,vipCouppons:u,anonymousState__temp7:v,storeRpList:s,showRpListLoad:c,bannerData:h,vipGoodsListObj:d,anonymousState__temp8:y,btnData:_}}}},{key:"_createVipData",value:function(b){var D=this;return function(){var e=(0,_index.genCompid)(b+"$compid__140"),t=(0,_index.genCompid)(b+"$compid__141"),a=(0,_index.genCompid)(b+"$compid__142"),o=(0,_index.genCompid)(b+"$compid__143"),n=(0,_index.genCompid)(b+"$compid__144"),i=(0,_index.genCompid)(b+"$compid__145"),r=D.state,s=r.userCardType,p=r.toStoreHide,d=r.toStoreItem,l=r.merchantNewData,c=r.addressObj,r=r.vipFlag,u=l.showMerchantMore,_=D.state.openedData,g=_.headData,m=_.bannerData,h=_.couponInfoData,f=(_.couponPlusData,_.vipRights),v=_.btnData,y=_.aountInfoData,_=_.vipGoodsListObj,y=y&&y.floorItem?_extends({},g,y.floorItem):g,x=_?D._createVipGoodsData(b+"zcWRqlXLrI")():null;return g&&_index.propsManager.set({vipFlag:r,headData:y,userCardType:s},e),f&&f.floorItem&&f.floorItem.length&&_index.propsManager.set({vipFlag:r,type:"nowrap",data:f},t),m&&m.floorItem&&_index.propsManager.set({imgArr:m.floorItem,indicatorDots:m.floorItem&&1<m.floorItem.length,form:"vip",autoplay:!0,jumpPage:D.jumpPage.bind(D)},a),h&&_index.propsManager.set({couponInfoData:h,handleInit:D.handleInit.bind(D)},o),l&&l.floorItem&&l.floorItem.length&&_index.propsManager.set({vipFlag:r,showMerchantMore:u,addressObj:c,item:l,userCardType:s,loadMore:D.getStoreList.bind(D,!0),refreshPage:D.handleInit.bind(D)},n),p||_index.propsManager.set({toStoreHide:p,item:d,closePop:D.closePop.bind(D)},i),{$compid__140:e,$compid__141:t,$compid__142:a,$compid__143:o,$compid__144:n,$compid__145:i,headData:g,btnData:v,style:_indexModuleScssMap2.default,vipRights:f,bannerData:m,vipGoodsListObj:_,anonymousState__temp9:x,couponInfoData:h,merchantNewData:l,toStoreHide:p}}}},{key:"_createVipGoodsData",value:function(s){var p=this;return function(){var e=p.state,a=e.vipGoodsList,o=e.isLoginFlag,n=e.vipFlag,e=e.vipGoodsListTotal,t=(1==n?p.state.openedData:p.state.notOpenData).vipGoodsListObj,i="",r="";return t&&t.title&&(i=t.title.substring(0,t.title.length-4),r=t.title.substring(t.title.length-4)),{loopArray18:a&&a.length?a.map(function(e,t){e={$original:(0,_index.internal_get_original)(e)};t=(0,_index.genCompid)(s+"bKUdrhwuPQ"+t);return a&&a.length&&_index.propsManager.set({vipFlag:n,isLoginFlag:o,toLogin:p._goLogin.bind(p),goodsInfo:e.$original},t),{$compid__146:t,$original:e.$original}}):[],vipGoodsList:a,style:_indexModuleScssMap2.default,vipGoodsListObj:t,firT:i,secT:r,vipGoodsListTotal:e}}}},{key:"_createCouponsData",value:function(e){return function(e){var t=e.secondTitle,a=e.title,e=e.floorItem,o="",n="",a=(a&&(o=a.substring(0,a.length-5),n=a.substring(a.length-5)),e&&e.rpList&&e.rpList.length?e.rpList[0]:"");return{style:_indexModuleScssMap2.default,showTxt:a,firT:o,secT:n,secondTitle:t,floorItem:e}}}},{key:"_createOpenBtnData",value:function(e){var s=this;return function(e){var t=s.$router.params.channel,a=s.state,o=a.vipFlag,a=(a.hasTitleHeight,e.floorItem),e=a.priceWord,n=a.cardName,i=a.tipText,r=a.userCardType,a=a.joinWord;return{channel:t,style:_indexModuleScssMap2.default,vipFlag:o,userCardType:r,tipText:i,priceWord:e,cardName:n,joinWord:void 0===a?"立即开通":a}}}},{key:"toGoodsList",value:function(){(0,_indexWeapp2.navigateTo)("/pages/vpaymember_t/memberGoods/index?vipFlag="+this.state.vipFlag)}},{key:"toDiscountPage",value:function(){var e=this.state,t=e.addressObj,a=e.userCardType,e=e.vipFlag;(0,_indexWeapp.clickReport)({create_time:new Date,click_id:"clickGift",click_par:{type:{1:"open",0:"notOpen",3:"past "}[e]}}),(0,_indexWeapp2.navigateToBySelf)("/pages/vpayMember-t/discountList/index?cityId="+t.cityId+"&userCardType="+a+"&latitude="+t.latitude+"&longitude="+t.longitude,"findpage"==this.$router.params.channel?"openNewWebview":"")}},{key:"dealData",value:function(t,e,a){var o=this,n=(this.state.isLoginFlag,{}),i={},r="",s="",p=[],d=!1,l=!1;try{var c={125:"bannerData",130:"vipCouppons",140:"shopsData",145:"vipRights",200:"btnData",210:"vipGoodsListObj",300:"headData",400:"marqueeData",610:"headData",620:"aountInfoData",630:"bannerData",635:"couponInfoData",660:"couponPlusData",690:"vipRights"};t.floorList.map(function(e){0==t.vipFlag||3==t.vipFlag?n[c[e.floorType]]=e:1==t.vipFlag&&(i[c[e.floorType]]=e),210==e.floorType&&(l=!0),635==e.floorType&&(p=e.floorItem||""),700==e.floorType&&(d=!0)})}catch(e){}var u={};1==t.vipFlag?(i.headData&&i.headData.floorItem?(i.headData=_extends({},t.topFloor,i.headData.floorItem),u=_extends({openedData:i},a)):i.headData=t.topFloor,p&&p.couponInfoResultList&&p.couponInfoResultList.length&&p.couponInfoResultList.map(function(e){1==e.couponType?r+=e.couponId+",":s+=e.couponId+","}),(0,_indexWeapp.clickReport)({create_time:new Date,click_id:"exchangeVipDay",click_par:{platCouponList:s,storeCouponList:r,type:"open"}})):(n.headData=n.headData&&n.headData.floorItem?_extends({},t.topFloor,n.headData.floorItem):t.topFloor,u=_extends({notOpenData:n},a)),this.setState(u,function(){}),d&&(this.setState({loadingStore:!0,shouldGetShopFlag:d}),setTimeout(function(){o.getStoreList(!0)},300)),n.shopsData?setTimeout(function(){o.getNearBigCouponFn("firstLoad",e)},300):this.setState({showRpListLoad:!1}),l&&this.getGoodsList()}},{key:"getNearBigCouponFn",value:(a=_asyncToGenerator(regeneratorRuntime.mark(function e(t,a){var o,n,i,r,s,p,d,l,c,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=this.state,l=i.showMoreFlag,o=i.storeRpList,n=i.notOpenData,p=i.addressObj,i=i.shopQuata,r=(p=a||p).longitude,s=p.latitude,p=p.cityId,l){e.next=4;break}return e.abrupt("return");case 4:if(d=n.btnData?n.btnData.redPacketId:"",e.prev=5,"more"==t)return e.next=9,(0,_vpayMember.getNearBigCouponListMore)({longitude:r,latitude:s,cityId:p,redPacketId:d});e.next=12;break;case 9:e.t0=e.sent,e.next=15;break;case 12:return e.next=14,(0,_vpayMember.getNearBigCouponList)({longitude:r,latitude:s,cityId:p,redPacketId:d});case 14:e.t0=e.sent;case 15:0==(l=e.t0).code?(c="more"==t?l.result.merchantsLoadMoreResult:l.result.storeRpList,c=c?o.concat(c):o,u=l.result.showMore,"more"==t&&(u=!!l.result.merchantsLoadMoreResult.length),this.setState({storeRpList:c,showMoreFlag:u,shopQuata:"more"==t?i:l.result.quota,showRpListLoad:!1},function(){})):this.setState({showRpListLoad:!1}),e.next=24;break;case 20:e.prev=20,e.t1=e.catch(5),this.setState({showRpListLoad:!1});case 24:case"end":return e.stop()}},e,this,[[5,20]])})),function(e,t){return a.apply(this,arguments)})},{key:"postMessageToNative",value:function(){for(var t=this,a=[],e=arguments.length,o=Array(e),n=0;n<e;n++)o[n]=arguments[n];o.forEach(function(e){t.getElePosition(e)&&a.push(t.getElePosition(e))}),_indexWeapp7.isAndroid&&window.djJava.setDispatchEventArea(JSON.stringify(a))}},{key:"getElePosition",value:function(e){var t,a,e=document.getElementById(e);return e?{x1:t=e.clientLeft,y1:a=this.getOffsetT(e),x2:t+screen.width,y2:a+e.offsetHeight}:""}},{key:"getOffsetT",value:function(e){for(var t=e.offsetTop,a=e.offsetParent;null!=a;)t+=a.offsetTop,a=a.offsetParent;return t}},{key:"getGoodsList",value:function(){var t=this;this.state.vipFlag;(0,_vpayMember.api_vip_goods_list)({page:1,size:9}).then(function(e){0==e.code&&t.setState({vipGoodsList:e.result.skuVipPriceVos,vipGoodsListTotal:e.result.total})}).catch(function(e){})}},{key:"getStoreList",value:function(){var a=this,e=this.state.merchantNewData,t=e.showMerchantMore,e=e.floorItem,o=void 0===e?[]:e;if(t)try{(0,_vpayMember.api_nearbystore_list)({pageCount:this.pageCount}).then(function(e){var t;0==e.code&&(t=o.concat(e.result.storeExtInfoList),e=!!e.result.storeExtInfoList.length&&e.result.showMore,a.pageCount++,a.setState({merchantNewData:{showMerchantMore:e,floorItem:t}})),a.setState({loadingStore:!1})}).catch(function(e){a.setState({loadingStore:!1})})}catch(e){}}},{key:"onReachBottom",value:function(){this.state.shouldGetShopFlag&&this.getStoreList()}},{key:"goRule",value:function(){(0,_indexWeapp.clickReport)({create_time:new Date,click_id:"clickRule",click_par:{site:"down"}}),(0,_indexWeapp2.navigateToBySelf)("/pages/vpayMember-t/instructions/index?page=question","findpage"==this.$router.params.channel?"openNewWebview":"")}},{key:"toExchangePage",value:function(){var e=this.state.vipFlag;(0,_indexWeapp.clickReport)({create_time:new Date,click_id:"clickButton",click_par:{text:"兑换会员",type:{1:"open",0:"notOpen",3:"past "}[e]}}),"findpage"==this.$router.params.channel?(0,_indexWeapp2.navigateToBySelf)("/pages/vpayMember-t/exchangePage/index?fromPage=appTab&vipFlag="+e,"openNewWebview"):(0,_indexWeapp2.navigateTo)("/pages/vpayMember-t/exchangePage/index?vipFlag="+e)}},{key:"toOpen",value:function(e){var t=this.state,a=t.isLoginFlag,t=t.vipFlag;a?((0,_indexWeapp.clickReport)({create_time:new Date,click_id:"clickOpen",click_par:{type:{1:"open",0:"notOpen",3:"past "}[t],site:"down"}}),a="",a="findpage"==this.$router.params.channel?e?"payFrom=appTab&vipFlag="+t+"&userCardType="+e+"&h5=#newPay":"payFrom=appTab&vipFlag="+t+"&h5=#newPay":e?"vipFlag="+t+"&userCardType="+e+"&h5=#newPay":"vipFlag="+t+"&h5=#newPay",(0,_indexWeapp2.navigateToBySelf)("/pages/vpayMember-t/packageSelection/index?"+a,"findpage"==this.$router.params.channel?"openNewWebview":"")):this._goLogin()}},{key:"_goLogin",value:function(){var e,t="";for(e in this.$router.params)t=t+"&"+e+"="+this.$router.params[e];t=t.substring(1),(0,_indexWeapp3.goToLogin)({localTargetUrl:"/pages/vpayMember-t/home/index?fromAppLogin=1&"+t})}},{key:"jumpPage",value:function(e){var t,a;e.to&&(t=e.param.url||"",a=this.state.vipFlag,(0,_indexWeapp.clickReport)({create_time:new Date,click_id:"click_vipbanner",click_par:{bannerurl:t,vipstatus:a,type:{1:"open",0:"notOpen",3:"past "}[a]}}),"web"==e.to?-1<t.indexOf("activityPage")?(a=t.split("?")[1],(0,_indexWeapp2.navigateTo)("/pages/activity/homeFocus/index?"+a)):(0,_indexWeapp2.showToast)({title:"抱歉，暂不支持跳转"}):"activityDetail"==e.to?(0,_indexWeapp5.jump)({to:"activityDetail",params:{activityId:e.param.activityId}}):"store"==e.to&&(0,_indexWeapp5.jump)({to:"store",params:{storeId:e.param.storeId,orgCode:e.param.orgCode,skuId:e.skuId||"",needAnchorSku:!0}}))}},{key:"closePop",value:function(){this.setState({toStoreHide:!0})}}]),i}(),_class.$$events=["toGoodsList","toOpen"],_class.multipleSlots=!0,_class.$$componentPath="pages/vpayMember-t/home/index",_temp2);exports.default=vipHome,Component(require("../../../npm/@tarojs/taro-weapp/index.js").default.createComponent(vipHome,!0));