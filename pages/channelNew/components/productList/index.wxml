<wxs module="tool" src="../../../../common/util/tools.wxs"></wxs>
<view
  class="product-list"
  aria-label='商品列表'
  aria-role='listbox'
  wx:if="{{styleTpl == 'tpl2'}}"
  style="background:url({{floorBgImg}}) no-repeat;center;background-size:100% 100%;margin:0 auto">
  <view
    class="list-header"
    style="margin:0 auto;justify-content:{{titleLocation}}">
    <view wx:if="{{tabList && tabList.length > 0}}" class="tab-wrapper">
      <view
        wx:for="{{tabList}}"
        wx:for-index="index"
        wx:for-item="item"
        wx:key="item"
        aria-label='{{item.title}}'
        aria-role='tab'
        class="tab-item{{tabIndex == item.index ? ' active-item': ''}}"
        bindtap="onTabChange"
        data-item="{{item}}"
        data-index="{{item.index}}">
      <view style="color:{{item.color}}">{{item.title}}</view>
      <view wx:if="{{tabIndex == item.index}}" class="tab-flag" style="background:{{item.color}}"></view>
      </view>
    </view>
  </view>
  <scroll-view
    class="product-wrapper"
    scroll-x
    scroll-anchoring="true"
    scroll-with-animation
    style="background:{{styleTpl == 'tpl3' ? '#fff': ''}}">
    <view
      wx:for="{{productList}}"
      wx:for-index="index"
      wx:for-item="item"
      wx:key="item"
      class="product-item log_product_item channel_comp_ep"
      data-to="{{item.data.to}}"
      data-trace-id="{{traceId}}"
      data-params="{{item.data.params}}"
      data-user-action="{{item.data.userAction}}"
      data-page-id="{{pageId}}"
      data-current-page-name="{{currentPageName}}"
      data-pre-page-name='{{prePageName}}'
      bindtap="jumper"
      style="background:{{item.bgColor}}">
      
      <goods
        item='{{item}}'
        traceId="{{traceId}}"
        pageId="{{pageId}}"
        currentPageName="{{currentPageName}}"
        prePageName='{{prePageName}}'
      ></goods>
      
    </view>
    <view
      wx:if="{{btnDescGroups[tabIndex]}}"
      class="more-product"
      data-to="{{data.data && data.data[tabIndex].to}}"
      data-params="{{data.data && data.data[tabIndex].params}}"
      data-user-action="{{data.data && data.data[tabIndex].userAction}}"
      bindtap="jumper">
      <view class="more-icon">
        <image src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC0AAAAtBAMAAADINP+pAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAkUExURUdwTJiYmJmZmZmZmZiYmJmZmZmZmZmZmZiYmJmZmZiYmJiYmCITlyQAAAALdFJOUwDyFeJ7RcetLluRG1l5wwAAAYBJREFUOMuFVLFKA0EQHZZEg5VFIsg1MRqDVqYwItcYIbGwCQTBUgRBucbEJpImKkTsktpGG0XSOLmYQObnvL29vb3duDjN7r6bffNmduYAhLGdzzJWvgqgW7ruELe1mgZn7igyv5OA2ZCwUiuwYr1MeKzwZ8L7XrjbadGsF5N7dJOP9kWP9iXepKy6m3L8RuTu+oNEsKa80KdrTZvniwhdv6eJ3qR2SEjrRo7uhC8PdGQkf4qcoDs1YFii2yCMmzPxtJPj9G1xOlcfunOAEgr6FCpVw2keNiKVVWwopYHPqwi74szyMb5MAxhNhDYZRqT0Bt4P320l3SFNF+COQ/akOzDaA2ccXowtG+KrQN/BZlvhPucLQJu/4H9f4Bd6Ugt6hH42QkN/nO9cz9dWnxKKZtg16hnX/0zxj+b297K9r7UfbP3DzH7r02W4PkWrLI7sT1s/G/3v4iAORFeJ2Tn8b76AVQkP+Dye6PMImZZ8Ruzog/33vAdULx/8//Aoz7/RBq8QTUsZEAAAAABJRU5ErkJggg==" class="image" lazy-load />
      </view>
      <view class="more-text">{{btnDescGroups[tabIndex]}}</view>
    </view>
  </scroll-view>
</view>
<!-- 新商品楼层样式 -->
<view wx:else class="product-list">
  <view wx:if="{{showTitle && tabList && tabList.length > 0}}" class="tab-wrapper-tpl3">
    <view
      wx:for="{{tabList}}"
      wx:for-index="index"
      wx:for-item="item"
      wx:key="item"
      aria-label='{{item.title}}'
      aria-role='tab'
      class="tab-item-tpl3{{tabIndex == item.index ? ' active-item-tpl3': ''}}"
      bindtap="onTabChange"
      data-item="{{item.data}}"
      data-index="{{item.index}}">
      <view class="circular-flag circular-left" wx:if="{{tabIndex == item.index && item.index != 0}}"></view>
      <view style="color:{{tabIndex == item.index ? '#00CF37' : '#666666'}}">
        <view>{{item.title}}</view>
      </view>
      <view class="circular-flag circular-right" wx:if="{{tabIndex == item.index && item.index != tabList.length}}"></view>
      <view wx:if="{{tabIndex == item.index}}" class="activity-flag-tpl3"></view>
    </view>
  </view>
  <scroll-view
    class="product-wrapper-tpl3"
    scroll-x
    scroll-anchoring="true"
    scroll-with-animation
    style="background:{{styleTpl == 'tpl3' ? '#fff': ''}}">
    <view
      wx:for="{{productList}}"
      wx:for-index="index"
      wx:for-item="item"
      wx:key="item"
      class="product-item-tpl3 log_product_item"
      data-to="{{item.data.to}}"
      data-params="{{item.data.params}}"
      data-user-action="{{item.data.userAction}}"
      bindtap="jumper"
      style="padding:{{item.type == 1 ? '0' : '8rpx'}}">
      <view wx:if="{{item.type == 1}}">
          <!-- <image
              src="{{item.data && item.data.sourceImgUrl}}"
              class="image"
              lazy-load
          ></image> -->
        <webp-img src="{{item.data && item.data.sourceImgUrl}}" webp-img='source-image-tpl3' ></webp-img>
      </view>
      <view wx:else class="product-info-tpl3">
        <view class="top_left_tag" 
          style="background:linear-gradient(135deg, {{item.data.topLeftCornerTag.componentTag.startColorCode}} 0%, {{item.data.topLeftCornerTag.componentTag.endColorCode}} 100%);"
          wx:if="{{item.data.topLeftCornerTag && item.data.topLeftCornerTag.componentTag}}">
          <!-- <image src="{{item.data.topLeftCornerTag.componentTag.iconUrl}}" class="top_left_tag-icon"/> -->
          <webp-img src="{{item.data.topLeftCornerTag.componentTag.iconUrl}}" webp-img='top_left_tag-icon' ></webp-img>  
          <view style="color:{{item.data.topLeftCornerTag.componentTag.iconTextColorCode}};font-size:20rpx;">{{item.data.topLeftCornerTag.componentTag.iconText}}</view>
        </view>
        <view class="product-img-tpl3">
          <!-- <image src="{{item.data && item.data.imgUrl}}" class="image" lazy-load></image> -->
          <webp-img src="{{item.data && item.data.imgUrl}}" webp-img='product-img-tpl3_image' ></webp-img>
            <view
            class="product-tag"
            wx:if="{{item.data && item.data.tags && item.data.tags.length > 0}}"
            style="background: linear-gradient(to right, {{item.data.tags[0].startColorCode}} 0%,  {{item.data.tags[0].endColorCode}} 100%);">
            {{item.data.tags[0].iconText}}
          </view>
        </view>
        <image mode="aspectFill" class="product-logo-tpl3" src="{{item.data && item.data.storeLogo}}" 
        lazy-load="true"/>
        <view class="product-origin-price-tpl3" wx:if="{{item.data && item.data.majorPrice && item.data.majorPrice.price}}">
          ¥{{item.data.majorPrice.price}}
        </view>
      </view>
    </view>
    <view
      wx:if="{{btnDescGroups[tabIndex]}}"
      class="more-product-tpl3"
      data-to="{{data.data && data.data[tabIndex].to}}"
      data-params="{{data.data && data.data[tabIndex].params}}"
      data-user-action="{{data.data && data.data[tabIndex].userAction}}"
      bindtap="jumper"
    >
      <view class="more-icon">
        <image src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC0AAAAtBAMAAADINP+pAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAkUExURUdwTJiYmJmZmZmZmZiYmJmZmZmZmZmZmZiYmJmZmZiYmJiYmCITlyQAAAALdFJOUwDyFeJ7RcetLluRG1l5wwAAAYBJREFUOMuFVLFKA0EQHZZEg5VFIsg1MRqDVqYwItcYIbGwCQTBUgRBucbEJpImKkTsktpGG0XSOLmYQObnvL29vb3duDjN7r6bffNmduYAhLGdzzJWvgqgW7ruELe1mgZn7igyv5OA2ZCwUiuwYr1MeKzwZ8L7XrjbadGsF5N7dJOP9kWP9iXepKy6m3L8RuTu+oNEsKa80KdrTZvniwhdv6eJ3qR2SEjrRo7uhC8PdGQkf4qcoDs1YFii2yCMmzPxtJPj9G1xOlcfunOAEgr6FCpVw2keNiKVVWwopYHPqwi74szyMb5MAxhNhDYZRqT0Bt4P320l3SFNF+COQ/akOzDaA2ccXowtG+KrQN/BZlvhPucLQJu/4H9f4Bd6Ugt6hH42QkN/nO9cz9dWnxKKZtg16hnX/0zxj+b297K9r7UfbP3DzH7r02W4PkWrLI7sT1s/G/3v4iAORFeJ2Tn8b76AVQkP+Dye6PMImZZ8Ruzog/33vAdULx/8//Aoz7/RBq8QTUsZEAAAAABJRU5ErkJggg==" class="image" lazy-load />
      </view>
      <view class="more-text more-text-tpl3">{{btnDescGroups[tabIndex]}}</view>
    </view>
  </scroll-view>
</view>
  