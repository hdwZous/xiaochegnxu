(wx.webpackJsonp=wx.webpackJsonp||[]).push([[16],{195:function(e,o,n){"use strict";n.d(o,"a",(function(){return l}));var i=n(46),t=n(35),c=n(12),s=n(98),l=function isJDLogin(){var e=(jd.getUUIdSync&&jd.getUUIdSync()||{}).deviceUUId||Object(s.a)();return new Promise((function(o,n){var s=Object(t.b)("login_info")||{deviceid_pdj_jd:e};if(console.log("获取缓存现有的",s),c.e||"devtools"===c.j.brand){var l=Object(t.b)("address_info")||{},a={method:"GET",functionId:"login/jdMini",body:{fromPath:"djwchat_coupon",latitude:l.latitude,refPar:"",longitude:l.longitude}};s.pt_key?Object(i.a)(a).then((function(e){if(e&&e.result){var i=e.result||{},c=Object.assign(s,i);Object(t.c)("login_info",c),console.log("京东里设置数据222",c),o(!0)}else n(!1)})).catch((function(e){console.log("err",JSON.stringify(e)),n(!1)})):jd.requestWebCookie({needpin:1,success:function success(e){if(e){var c=e.pt_pin,l=void 0===c?"":c,r=e.ticket,d=void 0===r?"":r,f={pt_pin:encodeURI(l),pt_key:d},u=Object.assign(s,f);Object(t.c)("login_info",u),Object(i.a)(a).then((function(e){if(e&&e.result){var i=e.result||{},c=Object.assign(s,i);Object(t.c)("login_info",c),console.log("京东里设置数据111",c),o(!0)}else n(!1)})).catch((function(e){console.log("err",JSON.stringify(e)),n(!1)}))}else console.log("get pin fail:1 "),n(!1)},fail:function fail(e){console.log("get pin fail:2 ",e),n(!1)}})}else c.c&&(s.PDJ_H5_PIN?o(!0):jd.requestWebCookie({needpin:1,success:function success(e){if(e){var i=e.pt_pin,c=void 0===i?"":i,l=e.ticket,a=void 0===l?"":l;console.log("到家pin success==2",e);var r={};r="string"==typeof a&&a?JSON.parse(a):a;var d={pt_pin:encodeURI(c),ticket:a};d.o2o_m_h5_sid=(r||{}).o2o_app_mobile_sid,d.PDJ_H5_PIN=(r||{}).o2o_app_mobile_pin;var f=Object.assign(s,d);Object(t.c)("login_info",f),console.log("到家 setStorage成功，===",f),o(!0)}else n(!1)},fail:function fail(e){n(!1)}}))}))}}}]);