<view class="container">
    <view class="topBg" style="background:{{!locCodeFloorInfo && '#fff'}};border-radius:{{!locCodeFloorInfo && '24rpx'}};height:{{!locCodeFloorInfo && '100%'}}">
        <image wx:if="{{locCodeFloorInfo}}" mode="widthFix" src="https://storage.360buyimg.com/wximg/order/popBgTop5.png" />
    </view>
    <view class="infoBox" style="min-height:{{!locCodeFloorInfo? '0' : '324rpx'}};padding-bottom:{{!locCodeFloorInfo? '28rpx' : '0'}}">
        <view class="title_wrap">
            <view class="left ellipsis" 
                aria-role='link'
                aria-label="{{initData.storeName}}，点击进入门店"
                bind:tap="handleGotoStore">
                {{initData.storeName}}
                <image src="https://storage.360buyimg.com/wximg/order/arrow_right.png" lazy-load="{{true}}" wx:if="{{!initData.medicineTag}}" />
            </view>
            <view class="right">
                <image src="{{initData.storeInfo.locIcon}}" lazy-load="{{true}}" />
            </view>
        </view>
        <view class="list_and_price_wrap">
            <view class="list_item" 
                wx:for="{{initData.productInfos}}" 
                wx:key="index" wx:if="{{ isFold ? index <=1 : index>=0 }}" 
                bind:tap="handleGotoProductDetail" 
                data-skuid="{{item.sku}}"
                data-order-type="{{initData.locOrderType}}"
                data-org-code="{{initData.orgCode}}"
                data-jump-params="{{item.params}}"
                data-jump-to="{{item.to}}"
                >
                <view aria-hidden="true" class="top_left_tag" 
                    style="background:linear-gradient(135deg, {{item.componentTag.startColorCode}} 0%, {{item.componentTag.endColorCode}} 100%);"
                    wx:if="{{item.componentTag}}">
                        <image wx:if="{{item.componentTag.iconUrl}}" src="{{item.componentTag.iconUrl}}" class="top_left_tag-icon"/>
                        <view style="color:{{item.componentTag.iconTextColorCode}};font-size:16rpx;padding-left:{{!item.componentTag.iconUrl&&'4rpx'}};padding-right:{{!item.componentTag.iconUrl&&'4rpx'}}">{{item.componentTag.iconText}}</view>
                </view>
                <webp-img aria-hidden="true" webp-img="list_item_img" src="{{item.imgPath}}" needOverlay='{{true}}' />
                <!-- <image class="list_item_img" lazy-load="{{true}}" src="{{item.imgPath}}" /> -->
                <view class="list_item_right"               
                    aria-role='link'
                    aria-label="{{item.name}},现价{{item.totalPrice}}，点击进入商品详情页">
                    <view class="name ellipsis" aria-hidden="true">
                        <text wx:if="{{item.startColorCode}}" style="background:linear-gradient(135deg,{{item.startColorCode}} 0%,{{item.endColorCode}} 100%);color:#fff" class="promotion_label">{{item.promotionText}}</text>
                        {{item.name}}
                    </view>
                    <view class="skuSpecification" wx:if="{{item.skuSpecification}}" aria-hidden="true">{{item.skuSpecification}}</view>
                    <view class="price_wrap" wx:for="{{item.priceInfos}}" wx:key="index" wx:for-item="item02" aria-hidden="true">
                        <view class="left_price" style="color:#1C4988">
                            <view style="height:30rpx;">
                                <text >{{item02.promotionWeightTotalPrice || item02.weightTotalPrice || item02.priceStr || item02.promotionPriceStr}}</text>
                                <text wx:if="{{!item02.promotionTotalWeight && !item02.totalWeight}}"> x {{item02.num || item02.promotionNum}}</text>
                                <!-- <text wx:if="{{item02.promotionTotalWeight || item02.totalWeight}}" class="weight_unit">{{item02.promotionTotalWeight || item02.totalWeight}}</text> -->
                                <image wx:if="{{item02.memberIcon}}" class="member_icon" src="{{item02.memberIcon}}"/>
                            </view>
                        </view>
                        <view class="right_price" wx:if="{{index != (item.priceInfos.length -1) }}"></view>
                        <view class="right_price" wx:else>
                            <text class="origin_price" wx:if="{{item.totalBasicPrice}}">{{item.totalBasicPrice}}</text><text class="pay_price">{{item.totalPrice}}</text>
                        </view>
                    </view>
                </view>
            </view>
        </view>
    </view>

    <view class="codeContainer">
        <view class="codeInfo" wx:if="{{locCodeFloorInfo.locCodeInfo.qrCodeNum}}">
            <view class="codeBox">
                <slot name="qrcode" class="qrcode"></slot>
                <slot name="barcode" class="barcode"></slot>
            </view>
            <view class="reloadBtn" catchtap="reloadCode">
                <image class="reloadIcon" src="https://storage.360buyimg.com/wximg/order/reload.png" mode="widthFix" />
                刷新
            </view>
        </view>
        <view class="codeCount">
            <view class="codeBox">
                <view class="codeTotal">
                    <view class="todal">{{locCodeFloorInfo.title}}</view>
                    <view class="date">{{locCodeFloorInfo.effectiveTimeDisplay}}</view>
                </view>
                <view class="consumerCount" wx:for="{{locCodeFloorInfo.locCodeGroupList}}" wx:for-item="item" wx:for-index="index">
                    <view class="consumerTitle">
                        <view class="typeTitle">
                            {{item.locCodeGroupStateName}}
                        </view>
                        <block wx:for="{{item.buttonInfoList}}" wx:for-item="btnItem" wx:for-index="index">
                            <view class="afterSale"  data-jump-params="{{btnItem}}" catchtap="afterSale" style="background-color:{{btnItem.backGroundColor}};border-color:{{btnItem.borderColor}};color:{{btnItem.fontColor}}">
                                {{btnItem.title}}
                            </view> 
                        </block>
                    </view>

                    <view class="cardBox" wx:for="{{item.locCodeInfoList}}" wx:for-item="subItem" wx:for-index="index" style="border:{{index+1 === item.locCodeInfoList.length ? 'none':''}}" >
                        <view class="cardInfo">
                            <view class="cardNumber {{subItem.strikeThrough ? 'disabled' : ''}}" wx:if="{{subItem.cardNum}}">{{subItem.cardNum}}</view>
                            <view class="cardPassword {{subItem.strikeThrough ? 'disabled' : ''}}" wx:if="{{subItem.pwdNum}}">{{subItem.pwdNum}}</view>
                        </view>
                         <view class="cardType" wx:if="{{subItem.locCodeStateName}}">{{subItem.locCodeStateName}}</view>
                    </view>
                </view>
            </view>
        </view>
    </view>
</view>