"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _class,_temp2,_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o,n=arguments[t];for(o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},_createClass=function(){function n(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,o){return t&&n(e.prototype,t),o&&n(e,o),e}}(),_get=function e(t,o,n){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,o);return void 0!==s?"value"in s?s.value:void 0!==(s=s.get)?s.call(n):void 0:null!==(s=Object.getPrototypeOf(t))?e(s,o,n):void 0},_index=require("../../../../npm/@tarojs/taro-weapp/index.js"),_index2=_interopRequireDefault(_index),_indexWeapp=require("../../../../npm/@jd/djmp/common-t/js/taroapi/index.weapp.js"),_indexWeapp2=require("../../../../npm/@jd/djmp/common-t/js/bi/index.weapp.js"),_goToByCouponWeapp=require("../../../../npm/@jd/djmp/common-t/js/utils/goToByCoupon.weapp.js"),_indexModuleScssMap=require("./index.module.scss.map.js"),_indexModuleScssMap2=_interopRequireDefault(_indexModuleScssMap);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}_temp2=_class=function(){function p(){var e,t;_classCallCheck(this,p);for(var o=arguments.length,n=Array(o),s=0;s<o;s++)n[s]=arguments[s];return(e=t=_possibleConstructorReturn(this,(t=p.__proto__||Object.getPrototypeOf(p)).call.apply(t,[this].concat(n)))).$usedState=["$compid__259","userRightsResps","anonymousState__temp","showShopFlag","showNotHelp","anonymousState__temp2","currentPercent","storeIdList","showShopTitle","update","cutAmountNew","helpCutAmount","description","headImage","helpStatus","isHelpCut","cutStatus","addressInfo"],t.anonymousFunc5Map={},t.anonymousFunc6Map={},t.customComponents=["StoreListPop","Pop"],_possibleConstructorReturn(t,e)}return _inherits(p,_index.Component),_createClass(p,[{key:"_constructor",value:function(e){_get(p.prototype.__proto__||Object.getPrototypeOf(p.prototype),"_constructor",this).call(this,e),this.state={currentPercent:"0",storeIdList:"",showShopFlag:!0,showShopTitle:!1,update:!1,cutAmountNew:0},this.$$refs=[]}},{key:"_createData",value:function(){var t=this,e=(this.__state=arguments[0]||this.state||{},this.__props=arguments[1]||this.props||{},this.$prefix),o=(0,_index.genCompid)(e+"$compid__259"),n=this.isShowNotHelp(),s=this.__props.userRightsResps,s=void 0===s?[]:s,p=this.__state.showShopFlag,p=void 0!==p&&p,u=s.length?this._createRightData(e+"FggiphKSNK")():null,e=n?null:this._createDefaultData(e+"TAThaFWdrW")();return this.anonymousFunc0=function(e){return t.onShopJudge(e)},this.anonymousFunc1=function(e){return t.onPopEvent(e,"store")},!s.length&&p&&_index.propsManager.set(_extends({},this.__props,{showNotHelp:n,sceneId:"140",isPop:!0,onShopJudge:this.anonymousFunc0,onPopEvent:this.anonymousFunc1}),o),Object.assign(this.__state,{$compid__259:o,userRightsResps:s,anonymousState__temp:u,showNotHelp:n,anonymousState__temp2:e}),this.__state}},{key:"_createDefaultData",value:function(o){var n=this;return function(){var e=(0,_index.genCompid)(o+"$compid__260"),t=n.props.helpCutAmount;return n.anonymousFunc2=function(e){return n.onPopEvent(e,"icon")},n.anonymousFunc3=function(e){n.onClickShare(e)},_index.propsManager.set({isShow:!0,defineSelf:!0,onPopEvent:n.anonymousFunc2},e),{$compid__260:e,style:_indexModuleScssMap2.default,helpCutAmount:t}}}},{key:"_createRightData",value:function(u){var a=this;return function(){var e=(0,_index.genCompid)(u+"$compid__261"),t=a.props,o=t.userRightsResps,o=void 0===o?[]:o,n=t.helpCutAmount,s=t.description,t=t.headImage,p=(a.anonymousFunc4=function(e){return a.onPopEvent(e,"right")},0<o.length?o.map(function(t,e){t={$original:(0,_index.internal_get_original)(t)};var o="qqLsz"+e,e=(a.anonymousFunc5Map[o]=function(e){return a.rightCouponGo(e,t.$original)},"mpbRe"+e);return a.anonymousFunc6Map[e]=function(e){return a.rightCouponGo(e,t.$original)},{_$indexKey:o,_$indexKey2:e,$original:t.$original}}):[]);return _index.propsManager.set({isShow:!0,defineSelf:!0,onPopEvent:a.anonymousFunc4},e),{loopArray93:p,$compid__261:e,style:_indexModuleScssMap2.default,headImage:t,userRightsResps:o,helpCutAmount:n,description:s}}}},{key:"componentDidMount",value:function(){var e=this.props.userRightsResps;0<(void 0===e?[]:e).length&&this.showCloseReport("show")}},{key:"isShowNotHelp",value:function(){var e=this.props,t=e.helpStatus,e=e.isHelpCut;return 2!=t&&3!=t&&4!=t||e?!1:!0}},{key:"setHelpStatus",value:function(){switch(this.props.helpStatus){case 2:return 0;case 3:return 1;case 4:return 2;default:return 0}}},{key:"onShopJudge",value:function(e){var t=e.type,e=e.data,o=this.props,n=o.helpStatus,o=o.cutStatus;"noData"==t?(this.setState({showShopFlag:e.show}),(0,_indexWeapp2.clickReport)({create_time:new Date,click_id:"shownewhelperbox",click_par:{statusId:"show",awardId:"none",helpStatus:n,cutStatus:o}})):"showData"==t?((0,_indexWeapp2.clickReport)({create_time:new Date,click_id:"shownewhelperbox",click_par:{statusId:"show",awardId:"storeid",storeId:e.storeId,helpStatus:n,cutStatus:o}}),this.setState({storeIdList:e.storeId,showShopFlag:e.show,showShopTitle:e.show})):"click"==t&&(0,_indexWeapp2.clickReport)({create_time:new Date,click_id:"clicknewhelperbox",click_par:{contentId:"storeid",storeId:e.storeId,helpStatus:n,cutStatus:o}})}},{key:"onPopEvent",value:function(e,t){this.props.onPopEvent(e,"helperPop");var e=this.props,o=e.helpStatus,n=e.cutStatus;switch(t){case"right":this.showCloseReport("close");break;case"icon":(0,_indexWeapp2.clickReport)({click_id:"shownewhelperbox",click_par:{statusId:"close",awardId:"none",couponId:"",helpStatus:o,cutStatus:n}});break;case"store":(0,_indexWeapp2.clickReport)({click_id:"shownewhelperbox",click_par:{statusId:"close",awardId:"storeid",couponId:"",helpStatus:o,cutStatus:n}})}}},{key:"showCloseReport",value:function(e){var t=this.props,o=t.userRightsResps,o=void 0===o?[]:o,n=t.helpStatus,t=t.cutStatus,s="",p="";o.forEach(function(e){1==e.type?(p=e.couponEntity.couponId,1==e.couponEntity.couponRightsType&&(s="new"),2==e.couponEntity.couponRightsType&&(s="helpUser"),3==e.couponEntity.couponRightsType&&(s="lostUser")):2==e.type&&(p+=","+e.vipInfo.type)}),(0,_indexWeapp2.clickReport)({create_time:new Date,click_id:"shownewhelperbox",click_par:{statusId:e,awardId:s,couponId:p,helpStatus:n,cutStatus:t}})}},{key:"onClickShare",value:function(e,t){var o=this.props,n=o.helpStatus,o=o.cutStatus;(0,_indexWeapp2.clickReport)({create_time:new Date,click_id:"clicknewhelperbox",click_par:{contentId:"none",helpStatus:n,cutStatus:o}}),this.props.onClickShare(e,t)}},{key:"rightCouponGo",value:function(e,t){var o=this.props,n=o.helpStatus,o=o.cutStatus,s="",p="";1==t.type?(s=t.couponEntity.couponId,1==t.couponEntity.couponRightsType&&(p="new"),2==t.couponEntity.couponRightsType&&(p="helpUser"),3==t.couponEntity.couponRightsType&&(p="lostUser")):2==t.type&&(s=t.vipInfo.type),(0,_indexWeapp2.clickReport)({create_time:new Date,click_id:"clicknewhelperbox",click_par:{contentId:p,couponId:s,helpStatus:n,cutStatus:o}}),2==t.type?(0,_indexWeapp.navigateTo)("/pages/redEnvelopeList/list/index"):(p=this.props.addressInfo,(s={}).couponId=t.couponEntity.couponId,s.longitude=p.longitude,s.latitude=p.latitude,s.cityId=p.cityId,s.defaultJump_="home",(0,_goToByCouponWeapp.goToByCouponId)(s))}},{key:"anonymousFunc0",value:function(e){}},{key:"anonymousFunc1",value:function(e){}},{key:"anonymousFunc2",value:function(e){}},{key:"anonymousFunc3",value:function(e){}},{key:"anonymousFunc4",value:function(e){}},{key:"anonymousFunc5",value:function(e,t){return this.anonymousFunc5Map[e]&&this.anonymousFunc5Map[e](t)}},{key:"anonymousFunc6",value:function(e,t){return this.anonymousFunc6Map[e]&&this.anonymousFunc6Map[e](t)}}]),p}(),_class.$$events=["anonymousFunc3","anonymousFunc5","anonymousFunc6"],_class.options={addGlobalClass:!0},_class.multipleSlots=!0,_class.$$componentPath="pages/hackOrder-t/components/helperPop/index";var HelperPop=_temp2;exports.default=HelperPop,Component(require("../../../../npm/@tarojs/taro-weapp/index.js").default.createComponent(HelperPop));