
<view class="wrap" >
  <block>
    <view class="header"> 
        <view class="left">
           <text class="title" aria-role="text" aria-label="{{initData.title}}">{{initData.title}}</text> 
           <image bind:tap="handleClickQust" aria-hidden="true" class="qu_icon" src="https://storage.360buyimg.com/wximg/settlement/tip.png"/> 
        </view>
        <view class="coupon_right d-flex flex-row align-items-center">
          <view class="v-members d-flex flex-row align-items-center" wx:if="{{initData.data.cornerMark}}" style="background:linear-gradient(90deg, {{initData.data.cornerMark.backgroundStartColor}} 0%, {{initData.data.cornerMark.backgroundEndColor}} 100%);" data-item="{{initData.data.cornerMark}}" bindtap="{{initData.data.cornerMark.clickEventType == 3?'handleExchange':''}}">
             <block wx:for="{{initData.data.cornerMark.textList}}" wx:key="items" wx:for-item="tItems">
              <block wx:if="{{tItems.type == 2}}">
                <text class="vlmrllp-num" style="color:{{tItems.fontColor}};font-size:{{tItems.fontSize*2}}rpx;font-weight:{{tItems.fontWeight==1?'bold':tItems.fontWeight==2?'lighter':'normal'}};">{{tItems.text}}</text>
              </block>
              <block wx:if="{{tItems.type == 1}}">
                <text class="vlmrllp-sym" space="nbsp" style="color:{{tItems.fontColor}};font-size:{{tItems.fontSize*2}}rpx;font-weight:{{tItems.fontWeight==1?'bold':tItems.fontWeight==2?'lighter':'normal'}};">{{tItems.text}}</text>
              </block>
              <block wx:if="{{tItems.type == 3 && index != initData.data.cornerMark.textList.length - 1}}">
                <image class="vlmrl-icon flex-none" src="{{tItems.url||'https://storage.360buyimg.com/wximg/storewin/mini-v-redb-x.png'}}" />
              </block>
              <block wx:if="{{tItems.type == 3 && (index == initData.data.cornerMark.textList.length - 1)}}">
                <image class="vlmrl-icon_arrow flex-none" src="{{tItems.url}}" />
              </block>
            </block>
          </view>
          <view bind:tap="handleRightClick" aria-role="button" aria-label="{{couponValue}}">
              <text class="no_use" style="color:{{couponColor}}">{{couponValue}}</text>
              <text class="dj_icon ts_next" wx:if="{{unavailableAbsolutely}}"></text>
          </view>
        </view>
    </view>
    <view class='store_item_line' style="margin-top:32rpx" wx:if="{{unavailableAbsolutely}}"></view>
  </block>
  <view class="couponWrapWrap" wx:if="{{(!unavailableAbsolutely && couponInfoList.length>0) || (isLowCase&&codeListSuccessFlag&&couponInfoList.length>0)}}">
      <view class="couponWrap">
          <view class="couponItemWrap" wx:for="{{couponInfoList}}" wx:key="index" >
              <coupon-item item="{{item}}" type="{{3}}"
                noNeedExposure="{{true}}"
                unuseType="skuCoupon"
                bind:selectBtnClick="handleSelectBtnClick"
                orderPageId="{{orderPageId}}"
                unique="{{unique}}"
                hasSkuImg="{{true}}"
                couponCacheId="{{couponCacheId}}"
                currentPageName="{{currentPageName}}"
                prePageName="{{prePageName}}"
                recommendObj="{{buriedObj}}"
              />
          </view>
          <view class="no_more" aria-role="text" aria-label="暂无更多">暂无更多</view>
      </view>
      <view class='store_item_line'></view>
  </view>
  <view class="lowCase" wx:if="{{!codeListSuccessFlag}}">
      <view class="lookbtn" bind:tap="lookCoupon" aria-role="button" aria-label="查看优惠券">查看优惠券</view>
  </view>
</view>

<view class="mask" catch:tap="close" wx:if="{{visible}}">
    <view class="mask_wrap">
        <view class="container" catch:tap="stopBubble">
            <view class="over_scroll">
                <rich-text nodes="{{notice}}" aria-role="text" aria-label="{{notice}}"></rich-text>
            </view>
        </view>
        <view class="close_wrap" catch:tap="close" aria-role="button" aria-label="关闭弹窗">
          <view class="close"></view>
        </view>
    </view>
</view>
<vip-exchange
  requestFlag="{{vipRequest}}"
  grabChannel="order_pay_page"
  orderPageId="{{orderPageId}}" 
  storeId="{{storeId}}"
  pageId="{{pageId}}"
  currentPageName="{{currentPageName}}"
  prePageName="{{prePageName}}"
  exchangeFlag="5"
  buyCouponWithOrderFlag="{{buyCouponWithOrderFlag}}"
  recommendObj="{{buriedObj}}"
  mockVip="{{mockVip}}"
  redPacketInfo="{{redPacketInfo}}"
  v28VoucherList="{{couponInfoList}}"
  exchangeId="{{initData.data.exchangeId}}"
  bind:listenExchange="listenExchange">
</vip-exchange>