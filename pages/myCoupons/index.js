require("./runtime"),require("./vendors"),(wx["webpackJsonp/pages/myCoupons/"]=wx["webpackJsonp/pages/myCoupons/"]||[]).push([[2],{100:function(e,t,n){e.exports={apibox:"index-module__apibox___2tg8H",index:"index-module__index___1Cvgl",bg:"index-module__bg___LfHvr"}},102:function(e,t,n){"use strict";n.r(t);n(79);var a=n(4),o=n(8),i=n(57),c=n(1),r=n(58);o.container.get(o.SERVICE_IDENTIFIER.Hooks).initNativeApiImpls=[a.e.initNativeApi];var s={pages:["pages/index/index"],subPackages:[{root:"pages/myCoupons/",pages:["index","subPages/description/index","subPages/disabledCoupon/index"],independent:!0},{root:"pages/storeCouponList/",pages:["index"],independent:!0},{root:"pages/myAttention/",pages:["index"],independent:!0}],permission:{"scope.userLocation":{desc:"你的位置信息将用获取最近的门店信息"}},plugins:{loginPlugin:{version:"1.5.1",provider:"wxefe655223916819e"},"live-player-plugin":{version:"1.3.5",provider:"wx2b03c6e691cd7370"}},window:{backgroundTextStyle:"light",navigationBarBackgroundColor:"#fff",navigationBarTitleText:"WeChat",navigationBarTextStyle:"black"}};o.window.__taroAppConfig=s;class App extends c.Component{render(){return this.props.children}}Object(i.a)(App,c,r.a,s);var u=n(144).default;Page(Object(o.createPageConfig)(u,"pages/myCoupons/index",{},{navigationBarTitleText:"我的优惠券",navigationStyle:"default",onReachBottomDistance:50,renderer:"webview"}||{}))},11:function(e,t,n){"use strict";n.d(t,"d",(function(){return a.c})),n.d(t,"f",(function(){return a.e})),n.d(t,"e",(function(){return a.d})),n.d(t,"b",(function(){return a.a})),n.d(t,"a",(function(){return x})),n.d(t,"c",(function(){return y.a}));var a=n(2),o=(n(7),n(12)),i=n(13),c=n(19),r=n(20),s=n(5),u=n(1),l=n.n(u),d=n(31),_=n.n(d),g=l.a.createContext({options:{},observer:null}),p=n(60),m=n.n(p),f=n(39),b=n(0),h=function(e){Object(c.a)(VisibleLogItem,e);var t=Object(r.a)(VisibleLogItem);function VisibleLogItem(){return Object(o.a)(this,VisibleLogItem),t.apply(this,arguments)}return Object(i.a)(VisibleLogItem,[{key:"componentDidMount",value:function componentDidMount(){var e,t=this;this.entry.onVisible=this.props.onVisible,this.entry.onHidden=this.props.onHidden,this.entry.visibleCallback=this.props.visibleCallback,null===(e=this.arr)||void 0===e||e.push((function(e){var n;(null===(n=t.entry)||void 0===n?void 0:n.uid)===e.id&&(null==e?void 0:e.intersectionRatio)>=(null===f.a||void 0===f.a?void 0:f.a.epMTADelayRatio)&&t.props.onVisible(e)}))}},{key:"componentWillUnmount",value:function componentWillUnmount(){}},{key:"render",value:function render(){var e=this,t=this.props,n=t.children,o=t.style,i=t.logSendData,c=void 0===i?{}:i,r=(t.addElClassName,t.innerStyle),s=t.onLayout,u=c.userAction,l=Array.isArray(u);return this.random=Math.random().toString().replace(".","")+"_"+Date.now(),Object(b.jsx)(g.Consumer,{children:function children(t){var i=t.options,c=t.userData,d=t.observer,_=t.arr;return e.options=i,e.userData=c,e.observer=d,e.arr=_,Object(b.jsx)(a.e,{ref:function ref(t){e.entry=t},className:m()("exposure"),"data-useraction":l?"":u,"data-useraction-list":l?JSON.stringify(u):"",style:r,children:Object(b.jsx)(a.e,{style:o,onLayout:s,children:n})})}})}}]),VisibleLogItem}(u.Component);Object(s.a)(h,"propTypes",{onVisible:_.a.func,onHidden:_.a.func,visibleCallback:_.a.func,style:_.a.oneOfType([_.a.array,_.a.object])}),Object(s.a)(h,"defaultProps",{onVisible:function onVisible(){},onHidden:function onHidden(){},visibleCallback:function visibleCallback(){},style:{}});var j=n(10),O=n(22),v=n.n(O),x=function Confirm(e){var t=Object(u.useState)(""),n=Object(j.a)(t,2),o=n[0],i=n[1];if(!e.show)return null;return Object(b.jsx)(a.e,{className:v.a.bg,children:Object(b.jsxs)(a.e,{className:v.a.content,children:[Object(b.jsx)(a.e,{className:v.a.title,children:e.title}),Object(b.jsx)(a.e,{className:v.a.input_box,children:Object(b.jsx)(a.b,{className:v.a.input_class,placeholder:e.placeholder,placeholderClass:v.a.input_class,onInput:function handleInput(e){console.log(e);var t=e.detail.value;i(t)}})}),Object(b.jsxs)(a.e,{className:v.a.btn_box,children:[Object(b.jsx)(a.e,{className:v.a.cancel_btn,onClick:function handleCancel(){e.onCancel(),i("")},children:e.cancelText}),Object(b.jsx)(a.e,{className:v.a.confirm_btn,onClick:function handleConfirm(){console.error(o),e.onConfirm(o),i("")},children:e.confirmText})]})]})})},y=(n(38),n(43))},144:function(e,t,n){"use strict";n.r(t);var a=n(3),o=n(12),i=n(13),c=n(14),r=n(28),s=n(21),u=n(19),l=n(20),d=n(5),_=(n(81),n(6)),g=n.n(_),p=n(11),m=n(65),f=n(62),b=[{templateId:3,templateName:"CouponList",data:[],config:{startIndex:1,dataSize:10,introduce:null,disabledCoupon:null,_noneCoupon:{title:"没有更多优惠券啦"},type:"myCoupons"}},{templateId:4,templateName:"CouponDialog",data:[],config:{title:"请输入您的兑换码",placeholder:"请输入兑换码",confirmText:"确认",cancelText:"取消"}}];var h=n(36),j=n(100),O=n.n(j),v=n(47),x=n(25),y=n(18),C=n(26),S=n(32),w=n(30),k=n(44),P=(n(139),n(1)),T=n.n(P),I=n(43),N=n(27),D=n(51),L=function isJDLogin(){var e=(jd.getUUIdSync&&jd.getUUIdSync()||{}).deviceUUId||Object(D.a)();return new Promise((function(t,n){var a=Object(w.b)("login_info")||{deviceid_pdj_jd:e};if(console.log("获取缓存现有的",a),console.log("isJDApp",C.b),C.b||"devtools"===C.c.brand){var o=Object(w.b)("address_info")||{},i={method:"GET",functionId:"login/jdMini",body:{fromPath:"djwchat_coupon",latitude:o.latitude,refPar:"",longitude:o.longitude}};a.pt_key?Object(N.b)(i).then((function(e){if(e&&e.result){var o=e.result||{},i=Object.assign(a,o);Object(w.c)("login_info",i),console.log("京东里设置数据222",i),t(!0)}else n(!1)})).catch((function(e){console.log("err",JSON.stringify(e)),n(!1)})):jd.requestWebCookie({needpin:1,success:function success(e){if(e){var o=e.pt_pin,c=void 0===o?"":o,r=e.ticket,s=void 0===r?"":r,u={pt_pin:encodeURI(c),pt_key:s},l=Object.assign(a,u);Object(w.c)("login_info",l),Object(N.b)(i).then((function(e){if(e&&e.result){var o=e.result||{},i=Object.assign(a,o);Object(w.c)("login_info",i),console.log("京东里设置数据111",i),t(!0)}else n(!1)})).catch((function(e){console.log("err",JSON.stringify(e)),n(!1)}))}else console.log("get pin fail:1 "),n(!1)},fail:function fail(e){console.log("get pin fail:2 ",e),n(!1)}})}else C.a&&(a.PDJ_H5_PIN&&a[k.e]?t(!0):jd.requestWebCookie({needpin:1,success:function success(e){if(e){var o=e.pt_pin,i=void 0===o?"":o,c=e.ticket,r=void 0===c?"":c;console.log("到家pin success==2",e);var s={};s="string"==typeof r&&r?JSON.parse(r):r;var u={pt_pin:encodeURI(i),ticket:r};u[k.d]=(s||{}).o2o_app_mobile_sid,u[k.c]=(s||{}).o2o_app_mobile_pin,u[k.e]=(s||{}).tgt,console.error("strogeLogin","data","=============="),console.error(a,u);var l=Object.assign(a,u);Object(w.c)("login_info",l),console.error("到家 setStorage成功，===",l),t(!0)}else n(!1)},fail:function fail(e){n(!1)}}))}))},B=n(0),A=function withHomePage(e){return function(t){Object(u.a)(_class2,t);var n=Object(l.a)(_class2);function _class2(){var e;Object(o.a)(this,_class2);for(var t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];return e=n.call.apply(n,[this].concat(a)),Object(d.a)(Object(c.a)(e),"state",{isLoading:!1}),Object(d.a)(Object(c.a)(e),"mainPage",null),Object(d.a)(Object(c.a)(e),"$instance",g.a.getCurrentInstance()),Object(d.a)(Object(c.a)(e),"firstMount",!0),e}return Object(i.a)(_class2,[{key:"componentWillMount",value:function componentWillMount(){var e=this;C.b||C.a||"devtools"===C.c.brand?L().then((function(){e.setState({isLoading:!0})})).catch((function(){e.setState({isLoading:!0})})):this.setState({isLoading:!0})}},{key:"componentDidMount",value:function componentDidMount(){}},{key:"componentDidShow",value:function componentDidShow(){var e=this;this.firstMount||(C.b||C.a||"devtools"===C.c.brand?L().then((function(){e.mainPage&&e.mainPage.componentDidShow&&e.mainPage.componentDidShow()})).catch((function(){e.mainPage&&e.mainPage.componentDidShow&&e.mainPage.componentDidShow()})):this.mainPage&&this.mainPage.componentDidShow&&this.mainPage.componentDidShow())}},{key:"componentDidHide",value:function componentDidHide(){this.firstMount=!1,this.mainPage&&this.mainPage.componentDidHide&&this.mainPage.componentDidHide()}},{key:"onLoad",value:function onLoad(){this.mainPage&&this.mainPage.onLoad&&this.mainPage.onLoad()}},{key:"onUnload",value:function onUnload(){this.mainPage&&this.mainPage.onUnload&&this.mainPage.onUnload()}},{key:"onReachBottom",value:function onReachBottom(){this.mainPage&&this.mainPage.onReachBottom&&this.mainPage.onReachBottom()}},{key:"onPageScroll",value:function onPageScroll(){this.mainPag&&this.mainPage.onPageScroll&&this.mainPage.onPageScroll()}},{key:"render",value:function render(){var t=this;return this.state.isLoading?Object(B.jsx)(e,Object(a.a)(Object(a.a)({},this.props),{},{ref:function ref(e){return t.mainPage=e}})):Object(B.jsx)(I.a,{})}}]),_class2}(T.a.Component)},H=function(e){Object(u.a)(Index,e);var t=Object(l.a)(Index);function Index(){var e;Object(o.a)(this,Index);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),Object(d.a)(Object(c.a)(e),"state",{configData:[],isDefault:!1,isLoading:!0}),Object(d.a)(Object(c.a)(e),"statusBarH",0),Object(d.a)(Object(c.a)(e),"toBar",0),Object(d.a)(Object(c.a)(e),"page_name","couponsList"),Object(d.a)(Object(c.a)(e),"isPageHome",!0),Object(d.a)(Object(c.a)(e),"pageSource","myCoupon"),Object(d.a)(Object(c.a)(e),"mountHandler",(function(){e.setState({configData:b}),e.updatecouponread()})),e}return Object(i.a)(Index,[{key:"componentWillMount",value:function componentWillMount(){var e=this.getPageParams();this._pageInfo=e||{},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.taroGlobalData||{},n={},a={},o="",i=(wx.getEnterOptionsSync()||{}).query||{},c=(wx.getEnterOptionsSync()||{}).scene||"";a={wechat_version:C.c.version,app_version:S.b,app_ver:S.b,openId:""},n={dj_par_key:i.dj_par_key,business:i.business,sourcefrom:"index",scene:c,wxScene:c,wetchat_type:"jdTaro"};var r=function dynamicFunc(){var e=Object(w.b)(k.a)||{},n=Object(w.b)(k.f)||{},a={lat_pos:n.latitude||"",lng_pos:n.longitude||"",city_name_pos:n.cityName||"",lat_select:e.latitude||"",lng_select:e.longitude||"",poi_select:e.poi||"",city_name_select:e.cityName||"",city_id_select:e.cityId||e.areaCode||""},i="",c="",r=Object(w.b)(k.b)||{};i=r.PDJ_H5_PIN||"",c=r.o2o_m_h5_sid||"";var s=t.channel;return o||(console.log("network==",o),g.a.getNetworkType({success:function success(e){o=e.networkType},fail:function fail(){console.log("network失败")}})),Object.assign(a,{user_id:i,session_id:c,channel_name:s,network:o})};console.log("埋点初始化==="),Object(y.b)(a,r,n)}({taroGlobalData:e.request_par}),Object(r.a)(Object(s.a)(Index.prototype),"componentWillMount",this).call(this)}},{key:"componentDidMount",value:function componentDidMount(){var e=this;try{var t=g.a.getSystemInfoSync();console.log("res",t),t.statusBarHeight&&(this.statusBarH=t.statusBarHeight||0),"ios"==t.platform||t.platform,this.toBar=42}catch(e){}var n=b.filter((function(e){return"Custom"===e.templateName}));b.forEach((function(t){n.length&&"Exchange"===t.templateName&&(t.config.style=Object(a.a)(Object(a.a)({},t.config.style),{},{marginTop:2*(e.statusBarH+e.toBar)+"rpx"})),"CouponList"===t.templateName&&(t.config.statusBarH=e.statusBarH,t.config.toBar=e.toBar,t.config.defaultPage={tipText:"立即去下单",tipDesc:"据说下单的时候也能享受到优惠呦～",callBack:function callBack(){Object(m.a)({extraParams:{ref_page:"applet",ref_par:JSON.stringify({traceId:"",userAction:"",pageId:(e.pageInfoValue||{}).pageId})}})}})})),g.a.eventCenter.on("_isShowLoading",(function(t){e.setState({isLoading:!!t})})),g.a.eventCenter.on("isDefault",(function(t){e.setState({isDefault:!!t})})),this.mountHandler()}},{key:"componentDidShow",value:function componentDidShow(){console.log("componentDidShow"),g.a.eventCenter.trigger("_didShow"),Object(r.a)(Object(s.a)(Index.prototype),"componentDidShow",this).call(this)}},{key:"componentDidHide",value:function componentDidHide(){Object(r.a)(Object(s.a)(Index.prototype),"componentDidHide",this).call(this)}},{key:"updatecouponread",value:function updatecouponread(){Object(h.e)({}).then((function(){})).catch((function(e){}))}},{key:"onReachBottom",value:function onReachBottom(){g.a.eventCenter.trigger("_useReachBottom")}},{key:"renderComponent",value:function renderComponent(e,t){var n=f[e.templateName];return n?Object(B.jsx)(n,Object(a.a)(Object(a.a)({dataSource:e.data},e.config),{},{pageEvent:"CouponPage"}),t):null}},{key:"render",value:function render(){var e=this,t=this.state,n=t.configData,o=t.isDefault,i=t.isLoading,c=Object(a.a)(Object(a.a)({},this.pageInfoValue),this._pageInfo);return Object(B.jsxs)(x.a.Provider,{value:c,children:[Object(B.jsx)(p.f,{className:O.a.bg,style:{padding:o?"4px 10px 0":""},children:n&&n.map((function(t,n){return e.renderComponent(t,n)}))}),i&&Object(B.jsx)(p.c,{})]})}}]),Index}(v.a);t.default=A(H)},2:function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"e",(function(){return o.e})),n.d(t,"d",(function(){return o.d})),n.d(t,"b",(function(){return o.b})),n.d(t,"a",(function(){return o.a}));var a=n(3),o=n(9),i=n(0),c=function DJRichText(e){return Object(i.jsx)(o.c,Object(a.a)({},e))}},22:function(e,t,n){e.exports={bg:"index-module__bg___vuVex",content:"index-module__content___8-LTS",title:"index-module__title___vLdGx",input_box:"index-module__input_box___3ZSEP",input_class:"index-module__input_class___3jvng",btn_box:"index-module__btn_box___2__5y",confirm_btn:"index-module__confirm_btn___2I8q7",cancel_btn:"index-module__cancel_btn___2Fo-o"}},25:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(1),o=n.n(a).a.createContext({pageId:""})},27:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return u}));var a=n(3),o=n(48),i=n(61),c=n(18),r=n(32),s=function requestAdpter(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={xcxVersion:r.c,appVersion:r.a};return Object(o.a)(Object(a.a)(Object(a.a)({},e),t))},u=function colorRequest(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={xcxVersion:r.c,appVersion:r.a};return new Promise((function(n,o){var r,s=null===(r=e.body)||void 0===r?void 0:r.pageValue;console.log(s,"requestParams?.pageValue?.page_name"),Object(i.a)(Object(a.a)(Object(a.a)({},e),t)).then((function(e){n(e)})).catch((function(t){o(t),t.data.echo&&Object(c.a)({click_id:"spclError_color",click_par:{functionId:null==e?void 0:e.functionId,code:t.data.code,echo:t.data.echo},pageName:null==s?void 0:s.page_name})}))}))}},32:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return i}));var a="8.28.0",o="8.28.0",i="8.28.0"},33:function(e,t,n){e.exports={tipcontainer:"index-module__tipcontainer___2ADbc",img:"index-module__img___1GIbW",tipButton:"index-module__tipButton___14tpa",tipTitle:"index-module__tipTitle___nIgAo",tipDesc:"index-module__tipDesc___3k4i-"}},35:function(e,t,n){e.exports={tags:"index-module__tags___3E5Eg",tag:"index-module__tag___2yCIz",tabsCoupons:"index-module__tabsCoupons___2JTFO",tagText:"index-module__tagText___2EDY7",shortLine:"index-module__shortLine___2uBUs"}},36:function(e,t,n){"use strict";n.d(t,"d",(function(){return i})),n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return r})),n.d(t,"e",(function(){return s})),n.d(t,"c",(function(){return u}));var a=n(27),o=(n(26),n(30)),i=function getCoupons(e){return Object(a.b)({functionId:"user/myCouponListV2",body:e})},c=function exchangeCouponByCode(e){var t=Object(o.b)("serverConfig");return null!=t&&t.colorSwitch?Object(a.a)({functionId:"dj_share_exchangeCouponByCode",body:e}):Object(a.b)({functionId:"share/exchangeCouponByCode",body:e})},r=function getCouponIntroduce(e){return Object(a.b)({functionId:"user/couponIntroduce",body:e})},s=function updatecouponread(e){return Object(a.b)({functionId:"user/updatecouponread",body:e})},u=function getCouponTabList(e){return Object(a.b)({functionId:"coupon/couponSourceTypeList",body:e})}},38:function(e,t,n){"use strict";var a=n(2),o=n(33),i=n.n(o),c=n(0);t.a=function Tip(e){var t=e.type,n=e.callBack,o=e.tipText,r=e.tipDesc,s=void 0===r?"":r,u=e.tipTitle,l=void 0===u?"":u,d=function getImage(e){return{nothing:{url:"https://storage.360buyimg.com/wximg/common/errorbar_icon_nothingV2.png",width:160,height:160,button:"重新加载"},graydog:{url:"https://storage.360buyimg.com/wximg/merchant/vipChannel/graydog.png",width:160,height:160,button:"重新加载"},graydogNoBtn:{url:"https://storage.360buyimg.com/wximg/merchant/vipChannel/graydog.png",width:160,height:160},addNewAddress:{url:"https://storage.360buyimg.com/wximg/merchant/vipChannel/graydog.png",width:160,height:160,msg:"新建收货地址",button:"新建地址"},loadError:{url:"https://storage.360buyimg.com/wximg/merchant/vipChannel/graydog.png",width:160,height:160,button:"重新加载"},noAddress:{url:"https://storage.360buyimg.com/wximg/merchant/vipChannel/graydog.png",width:160,height:160,msg:"地址获取失败",button:"重新加载"},noCoupon:{url:"https://storage.360buyimg.com/wximg/merchant/vipChannel/noCoupon.png",width:160,height:160},noSearch:{url:"https://storage.360buyimg.com/wximg/merchant/vipChannel/noSearch.png",width:160,height:160},unlogin:{url:"https://static-o2o.360buyimg.com/activity/images/fe/emtip_unLogin.png",width:160,height:160,msg:"请您登录",button:"立即登录"},noShop:{url:"https://storage.360buyimg.com/wximg/merchant/vipChannel/noShop.png",width:160,height:160},cartEmpty:{url:"https://storage.360buyimg.com/wximg/merchant/vipChannel/cart_empty.png",width:160,height:160},shopDown:{url:"https://storage.360buyimg.com/wximg/merchant/vipChannel/store_offline.png",width:160,height:160,button:"去首页逛逛",page:"Main",args:{tab:"Home"}},nowifi:{url:"https://storage.360buyimg.com/wximg/merchant/vipChannel/nowifi.png",width:160,height:160,button:"重新加载"},network:{url:"https://storage.360buyimg.com/wximg/merchant/vipChannel/nowifi.png",width:160,height:160,button:"重新加载"},poiAddress:{url:"https://storage.360buyimg.com/wximg/merchant/vipChannel/noAddress.png",width:160,height:160,msg:"请手动输入地址"},noFeed:{url:"https://storage.360buyimg.com/wximg/merchant/vipChannel/noCover.png",width:160,height:160,msg:"很抱歉，当前位置未开通服务"},hasNoActivity:{url:"https://storage.360buyimg.com/wximg/merchant/vipChannel/noSearch.png",width:160,height:160,msg:"这里没有活动，回首页逛逛吧[0001]",button:"返回首页"},hasNoCoupon:{url:"https://storage.360buyimg.com/flutter-mock/tip_noCoupon.196a080c.png",width:160,height:160,msg:"暂无可用优惠券"}}[e]||{}}(t),_=d.url,g=d.width,p=d.height;return _?Object(c.jsxs)(a.e,{className:i.a.tipcontainer,style:{minHeight:e.height},children:[Object(c.jsx)(a.a,{className:i.a.img,style:{width:g,height:p},src:_}),!!l&&Object(c.jsx)(a.d,{className:i.a.tipTitle,children:l}),!!s&&Object(c.jsx)(a.d,{className:i.a.tipDesc,children:s}),!!o&&Object(c.jsx)(a.e,{className:i.a.tipButton,onClick:n,children:o})]}):null}},41:function(e,t,n){e.exports={bottom_txt:"index-module__bottom_txt___Bxc69",bottom_h:"index-module__bottom_h___1U9On",bottom_txt2:"index-module__bottom_txt2___3xi5R",_noneCoupon:"index-module___noneCoupon___2ZFXZ"}},42:function(e,t,n){e.exports={ch_top:"index-module__ch_top___3NOrD",tobar:"index-module__tobar___1RhOH",back:"index-module__back___M_57p",left_custom_class:"index-module__left_custom_class___1r5KW",title:"index-module__title___3MOZ3"}},43:function(e,t,n){"use strict";var a=n(2),o=n(46),i=n.n(o),c=n(0);t.a=function Loading(e){return Object(c.jsx)(a.a,{className:i.a.loading,src:"https://storage.360buyimg.com/wximg/merchant/vipChannel/newLoading.gif"})}},46:function(e,t,n){e.exports={loading:"index-module__loading___2hJGS"}},47:function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var a=n(40),o=n(3),i=n(12),c=n(13),r=n(14),s=n(19),u=n(20),l=n(5),d=n(1),_=n(6),g=n.n(_);function safe_add(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function md5_cmn(e,t,n,a,o,i){return safe_add(function bit_rol(e,t){return e<<t|e>>>32-t}(safe_add(safe_add(t,e),safe_add(a,i)),o),n)}function md5_ff(e,t,n,a,o,i,c){return md5_cmn(t&n|~t&a,e,t,o,i,c)}function md5_gg(e,t,n,a,o,i,c){return md5_cmn(t&a|n&~a,e,t,o,i,c)}function md5_hh(e,t,n,a,o,i,c){return md5_cmn(t^n^a,e,t,o,i,c)}function md5_ii(e,t,n,a,o,i,c){return md5_cmn(n^(t|~a),e,t,o,i,c)}function binl_md5(e,t){var n,a,o,i,c;e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;var r=1732584193,s=-271733879,u=-1732584194,l=271733878;for(n=0;n<e.length;n+=16)a=r,o=s,i=u,c=l,r=md5_ff(r,s,u,l,e[n],7,-680876936),l=md5_ff(l,r,s,u,e[n+1],12,-389564586),u=md5_ff(u,l,r,s,e[n+2],17,606105819),s=md5_ff(s,u,l,r,e[n+3],22,-1044525330),r=md5_ff(r,s,u,l,e[n+4],7,-176418897),l=md5_ff(l,r,s,u,e[n+5],12,1200080426),u=md5_ff(u,l,r,s,e[n+6],17,-1473231341),s=md5_ff(s,u,l,r,e[n+7],22,-45705983),r=md5_ff(r,s,u,l,e[n+8],7,1770035416),l=md5_ff(l,r,s,u,e[n+9],12,-1958414417),u=md5_ff(u,l,r,s,e[n+10],17,-42063),s=md5_ff(s,u,l,r,e[n+11],22,-1990404162),r=md5_ff(r,s,u,l,e[n+12],7,1804603682),l=md5_ff(l,r,s,u,e[n+13],12,-40341101),u=md5_ff(u,l,r,s,e[n+14],17,-1502002290),r=md5_gg(r,s=md5_ff(s,u,l,r,e[n+15],22,1236535329),u,l,e[n+1],5,-165796510),l=md5_gg(l,r,s,u,e[n+6],9,-1069501632),u=md5_gg(u,l,r,s,e[n+11],14,643717713),s=md5_gg(s,u,l,r,e[n],20,-373897302),r=md5_gg(r,s,u,l,e[n+5],5,-701558691),l=md5_gg(l,r,s,u,e[n+10],9,38016083),u=md5_gg(u,l,r,s,e[n+15],14,-660478335),s=md5_gg(s,u,l,r,e[n+4],20,-405537848),r=md5_gg(r,s,u,l,e[n+9],5,568446438),l=md5_gg(l,r,s,u,e[n+14],9,-1019803690),u=md5_gg(u,l,r,s,e[n+3],14,-187363961),s=md5_gg(s,u,l,r,e[n+8],20,1163531501),r=md5_gg(r,s,u,l,e[n+13],5,-1444681467),l=md5_gg(l,r,s,u,e[n+2],9,-51403784),u=md5_gg(u,l,r,s,e[n+7],14,1735328473),r=md5_hh(r,s=md5_gg(s,u,l,r,e[n+12],20,-1926607734),u,l,e[n+5],4,-378558),l=md5_hh(l,r,s,u,e[n+8],11,-2022574463),u=md5_hh(u,l,r,s,e[n+11],16,1839030562),s=md5_hh(s,u,l,r,e[n+14],23,-35309556),r=md5_hh(r,s,u,l,e[n+1],4,-1530992060),l=md5_hh(l,r,s,u,e[n+4],11,1272893353),u=md5_hh(u,l,r,s,e[n+7],16,-155497632),s=md5_hh(s,u,l,r,e[n+10],23,-1094730640),r=md5_hh(r,s,u,l,e[n+13],4,681279174),l=md5_hh(l,r,s,u,e[n],11,-358537222),u=md5_hh(u,l,r,s,e[n+3],16,-722521979),s=md5_hh(s,u,l,r,e[n+6],23,76029189),r=md5_hh(r,s,u,l,e[n+9],4,-640364487),l=md5_hh(l,r,s,u,e[n+12],11,-421815835),u=md5_hh(u,l,r,s,e[n+15],16,530742520),r=md5_ii(r,s=md5_hh(s,u,l,r,e[n+2],23,-995338651),u,l,e[n],6,-198630844),l=md5_ii(l,r,s,u,e[n+7],10,1126891415),u=md5_ii(u,l,r,s,e[n+14],15,-1416354905),s=md5_ii(s,u,l,r,e[n+5],21,-57434055),r=md5_ii(r,s,u,l,e[n+12],6,1700485571),l=md5_ii(l,r,s,u,e[n+3],10,-1894986606),u=md5_ii(u,l,r,s,e[n+10],15,-1051523),s=md5_ii(s,u,l,r,e[n+1],21,-2054922799),r=md5_ii(r,s,u,l,e[n+8],6,1873313359),l=md5_ii(l,r,s,u,e[n+15],10,-30611744),u=md5_ii(u,l,r,s,e[n+6],15,-1560198380),s=md5_ii(s,u,l,r,e[n+13],21,1309151649),r=md5_ii(r,s,u,l,e[n+4],6,-145523070),l=md5_ii(l,r,s,u,e[n+11],10,-1120210379),u=md5_ii(u,l,r,s,e[n+2],15,718787259),s=md5_ii(s,u,l,r,e[n+9],21,-343485551),r=safe_add(r,a),s=safe_add(s,o),u=safe_add(u,i),l=safe_add(l,c);return[r,s,u,l]}function binl2rstr(e){var t,n="";for(t=0;t<32*e.length;t+=8)n+=String.fromCharCode(e[t>>5]>>>t%32&255);return n}function rstr2binl(e){var t,n=[];for(n[(e.length>>2)-1]=void 0,t=0;t<n.length;t+=1)n[t]=0;for(t=0;t<8*e.length;t+=8)n[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return n}function rstr2hex(e){var t,n,a="";for(n=0;n<e.length;n+=1)t=e.charCodeAt(n),a+="0123456789abcdef".charAt(t>>>4&15)+"0123456789abcdef".charAt(15&t);return a}function str2rstr_utf8(e){return unescape(encodeURIComponent(e))}function raw_md5(e){return function rstr_md5(e){return binl2rstr(binl_md5(rstr2binl(e),8*e.length))}(str2rstr_utf8(e))}function raw_hmac_md5(e,t){return function rstr_hmac_md5(e,t){var n,a,o=rstr2binl(e),i=[],c=[];for(i[15]=c[15]=void 0,o.length>16&&(o=binl_md5(o,8*e.length)),n=0;n<16;n+=1)i[n]=909522486^o[n],c[n]=1549556828^o[n];return a=binl_md5(i.concat(rstr2binl(t)),512+8*t.length),binl2rstr(binl_md5(c.concat(a),640))}(str2rstr_utf8(e),str2rstr_utf8(t))}var p=function md5(e,t,n){return t?n?raw_hmac_md5(t,e):function hex_hmac_md5(e,t){return rstr2hex(raw_hmac_md5(e,t))}(t,e):n?raw_md5(e):function hex_md5(e){return rstr2hex(raw_md5(e))}(e)},m=(new Date).getTime(),f=function generateId(){var e=(g.a.getStorageSync("login_info")||{}).deviceid_pdj_jd;return m+++e+Math.random().toString().substr(1)+"."+(new Date).getTime()};function pageIdFormation(e,t,n,a,o){var i="string"==typeof n?n:n===GOTO?"g":n===GOBACK?"b":"u";return p((e?e+"-":"")+(o?o+"-":"")+t+"-"+i+(a?"-"+a:""))}var b=function(){function PageStackClass(){var e=this;Object(i.a)(this,PageStackClass),this.pages=[],this.getReferPage=function(t){if(!e.pages.length)return{ref_page_name:"",ref_path:"",refPageSource:""};var n;if(e.pages.forEach((function(e,a){e.page_name==t&&(n=a-1)})),n<0)return{ref_page_name:"",ref_path:"",refPageSource:""};var a=e.pages[n]||{};return{ref_page_name:a.page_name||"",ref_path:a.cur_path||"",refPageSource:a.pageSource}}}return Object(c.a)(PageStackClass,null,[{key:"generate",value:function generate(){return PageStackClass.instance||(PageStackClass.instance=new PageStackClass),PageStackClass.instance}}]),PageStackClass}().generate(),h=n(18),j=["lat","lng","city_id","poi","lat_pos","lng_pos","pageId","ref_page","$taroTimestamp","city_name","transparentenable","ref_par","userAction"],O=function(e){Object(s.a)(Page,e);var t=Object(u.a)(Page);function Page(){var e;Object(i.a)(this,Page);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return e=t.call.apply(t,[this].concat(a)),Object(l.a)(Object(r.a)(e),"$instance",Object(_.getCurrentInstance)()),Object(l.a)(Object(r.a)(e),"firstMount",!0),Object(l.a)(Object(r.a)(e),"getPageName",(function(){return e.page_name})),Object(l.a)(Object(r.a)(e),"getPageSource",(function(){return e.pageSource})),Object(l.a)(Object(r.a)(e),"pageId",pageIdFormation(e.getPageName(),f(),"GOTO","","")),Object(l.a)(Object(r.a)(e),"getPageParams",(function(){return{pageId:e.pageId,page_name:e.getPageName(),pageSource:e.getPageSource(),request_par:Object.assign(e.isPageHome&&(g.a.getLaunchOptionsSync()||{}).query||{},(e.$instance.router||{}).params||{}),cur_path:(e.$instance.router||{}).path}})),Object(l.a)(Object(r.a)(e),"pageInfoValue",Object(o.a)(Object(o.a)({},e.getPageParams()),b.getReferPage(e.getPageName()))),e}return Object(c.a)(Page,[{key:"componentWillMount",value:function componentWillMount(){this.sendPvData("goto")}},{key:"componentDidShow",value:function componentDidShow(){this.firstMount||this.sendPvData("back")}},{key:"componentDidHide",value:function componentDidHide(){Object(h.d)(Object(o.a)({},this.pageInfoValue)),this.firstMount=!1}},{key:"sendPvData",value:function sendPvData(e){try{var t=this.getPageParams(),n=b.pages,i=b.getReferPage,c=t.page_name;if(n.length)n[n.length-1].page_name!==c&&n.push(t);else n.push(t);var r=i(c),s="";(s=(t.request_par||{}).ref_page)&&(r.ref_page_name=s),this.pageInfoValue.ref_page_name=r.ref_page_name||"",this.pageInfoValue.ref_path=r.ref_path,this.pageInfoValue.page_name=this.getPageName();var u=t.request_par,l=(u.lat,u.lng,u.city_id,u.poi,u.lat_pos,u.lng_pos,u.pageId,u.ref_page,u.$taroTimestamp,u.city_name,u.transparentenable,u.ref_par),d=u.userAction,_=Object(a.a)(u,j);if(l){var g="{}";try{"string"==typeof l?(g=decodeURIComponent(l),g=JSON.parse(g)):g=l}catch(e){g=JSON.parse("{}")}_.ref_par=g}else if(d)try{_.ref_par={userAction:decodeURIComponent(d)}}catch(e){_.ref_par={userAction:d}}t.request_par=_,"back"==e&&(t.request_par.ret_Type="back",_.ref_par={}),Object(h.c)(Object(o.a)(Object(o.a)({},t),r))}catch(e){}}}]),Page}(d.Component)},51:function(e,t,n){"use strict";(function(e){function p2Arry(e){return e.then((function(e){return[null,e]})).catch((function(e){return[e]}))}n.d(t,"b",(function(){return p2Arry})),n.d(t,"a",(function(){return a}));var a=function genDeviceId(){for(var e=[],t="0123456789abcdefghijklmnopqrstuv",n=0;n<36;n++)e[n]=t.substr(Math.floor(16*Math.random()),1);return e[14]="4",e[19]=t.substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="-",e.join("")}}).call(this,n(8).document)},52:function(e,t,n){e.exports={btn_area:"index-module__btn_area___MfLQl",img_icon:"index-module__img_icon___1m8G9"}},62:function(e,t,n){"use strict";n.r(t),n.d(t,"CouponList",(function(){return I})),n.d(t,"Exchange",(function(){return v})),n.d(t,"CouponDialog",(function(){return N})),n.d(t,"Tabs",(function(){return D})),n.d(t,"Custom",(function(){return M}));var a=n(16),o=n(23),i=n(3),c=n(10),r=n(11),s=n(6),u=n.n(s),l=n(1),d=n(75),_=n(18),g=n(76),p=n(35),m=n.n(p),f=n(25),b=n(0),h=Object(l.memo)((function(e){var t=e.dataSource,n=e.curTab,a=Object(l.useContext)(f.a);return Object(l.useLayoutEffect)((function(){e.hasEffectTabs||a.page_name&&Object(_.a)(Object(i.a)({click_id:"selectTab",click_par:{businessName:(t[0]||{}).showName,businessType:(t[0]||{}).sourceType,state:0}},a))}),[a.page_name,e.hasEffectTabs]),Object(b.jsx)(r.f,{className:m.a.tabsCoupons,style:e.style,children:t.map((function(o,c){return Object(b.jsxs)(r.f,{onClick:function onClick(){return function handleTab(o,c,r){var s;o!==n&&(Object(_.a)(Object(i.a)({click_id:"selectTab",click_par:{businessType:r,businessName:null==t||null===(s=t[r-1])||void 0===s?void 0:s.showName}},a)),e.handleTab&&e.handleTab({sourceType:r,curTab:o}))}(c,o.showName,o.sourceType)},className:m.a.tag,children:[Object(b.jsx)(r.e,{className:m.a.tagText,style:{fontWeight:n==c?"600":"400"},children:o.showName}),n==c&&Object(b.jsx)(r.f,{className:m.a.shortLine})]},c)}))})})),j=n(52),O=n.n(j),v=function Exchange(e){var t=Object(l.useContext)(f.a);return Object(b.jsxs)(r.f,{onClick:function handleExchange(){Object(_.a)(Object(i.a)({click_id:"my_coupons_exchange_20160713"},t)),u.a.eventCenter.trigger("CouponDialog",!0)},className:O.a.btn_area,style:e.style,children:[Object(b.jsx)(r.b,{src:"https://static-o2o.360buyimg.com/activity/images/fe/user_store_act_focus.png",className:O.a.img_icon}),Object(b.jsx)(r.f,{children:"使用兑换码"})]})},x=n(77),y=(n(94),n(38)),C=n(36),S=n(41),w=n.n(S),k=n(37);var P=function useDebounce(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];Object(l.useEffect)((function(){var n;return n=setTimeout(e,t),function(){clearTimeout(n)}}),Object(k.a)(n))},T=n(51),I=function CouponList(e){var t=e.introduce,n=e.disabledCoupon,p=e._noneCoupon,m=e.dataSize,j=e.refPar,O=void 0===j?"":j,S=e.pageSource,k=void 0===S?"myCoupon":S,I=e.ctp,N=void 0===I?"couponsList":I,D=e.type,L=Object(l.useContext)(f.a)||{},B=Object(l.useState)([]),A=Object(c.a)(B,2),H=A[0],E=A[1],M=Object(l.useState)(0),V=Object(c.a)(M,2),R=V[0],U=V[1],q=Object(l.useState)([]),J=Object(c.a)(q,2),W=J[0],G=J[1],F=Object(l.useState)(e.state||1),$=Object(c.a)(F,2),z=$[0],Z=$[1],K=Object(l.useState)(1),X=Object(c.a)(K,2),Y=X[0],Q=X[1],ee=Object(l.useState)(e.startIndex||1),te=Object(c.a)(ee,2),ne=te[0],ae=te[1],oe=Object(l.useState)(!1),ie=Object(c.a)(oe,2),ce=ie[0],re=ie[1],se=Object(l.useState)(!1),ue=Object(c.a)(se,2),le=ue[0],de=ue[1],_e=Object(l.useState)(e.defaultPage),ge=Object(c.a)(_e,2),pe=ge[0],me=ge[1],fe=Object(l.useState)(0),be=Object(c.a)(fe,2),he=be[0],je=be[1],Oe=Object(l.useState)(!0),ve=Object(c.a)(Oe,2),xe=ve[0],ye=ve[1],Ce=Object(l.useState)(!1),Se=Object(c.a)(Ce,2),we=Se[0],ke=Se[1],Pe=Object(l.useRef)(!1),Te=Object(l.useState)(!1),Ie=Object(c.a)(Te,2),Ne=Ie[0],De=Ie[1],Le=Object(l.useCallback)((function(){u.a.eventCenter.on("_handleTag",(function(e){var t=e.key;switch(G([]),t){case 0:Z(3);break;case 1:Z(2)}de(!1),ae(1),Pe.current=!1,Ee(!0),ke(!1)}))}),[]),Be=Object(l.useCallback)((function(e){var t=e.sourceType,n=e.curTab;U(n),G([]),Z(1),Q(t),de(!1),ae(1),Pe.current=!1,Ee(!0),ke(!1),De(!0)}),[]),Ae=Object(l.useCallback)((function(){u.a.eventCenter.on("_handleConfirm",(function(e){var t=++he;Pe.current=!1,G([]),Z(1),de(!1),ae(1),Ee(!0),ke(!1),je(t)}))}),[]),He=function getCouponList(e){var t=(e||{}).sourceType;Object(C.d)({startIndex:ne,dataSize:m,refPar:O,pageSource:k,state:z,ctp:N,pageId:L.pageId,sourceType:t}).then((function(e){return Ee(!1),de(!1),new Promise((function(t){var n,a,o=(e||{}).result.hasNextPage;if(null!==(n=e.result)&&void 0!==n&&null!==(a=n.couponList)&&void 0!==a&&a.length){var c=e.result.couponList.map((function(t){return Object(i.a)(Object(i.a)({},t),{},{showAll:!1,styles:Object(i.a)(Object(i.a)({},t.styles),{},{couponLabelStyle:t.styles.couponLabelStyle&&t.styles.couponLabelStyle.splice(0,2)}),traceId:e.traceId})}));o?Pe.current=!0:(Pe.current=!1,ke(!0)),G((function(e){var n=e.concat(c);return t(n),n}))}else Pe.current=!1,ke(!0),t(W)}))})).then((function(e){0==e.length&&de(!0),u.a.eventCenter.trigger("isDefault",e.length||0)})).catch((function(e){console.log("e",e),Ee(!1),"201"==e.code||"202"==e.code?(ye(!1),de(!0),me({tipTitle:"暂未登录",tipText:"立即登录",tipDesc:"快去登录，迫不及待与你相见啦~",type:"unlogin",callBack:function callBack(){Object(g.a)()}})):W.length||(de(!0),me({tipTitle:"网络请求失败",tipText:"重新加载",tipDesc:"网络离家出走啦？我要把TA找回来~",type:"nothing",callBack:function callBack(){Ee(!0);var e=++he;je(e)}}))}))};P(Object(o.a)(Object(a.a)().mark((function _callee(){var e,t,n,o,i,r,u,l,d,_,g,p,m;return Object(a.a)().wrap((function _callee$(a){for(;;)switch(a.prev=a.next){case 0:if(null!=H&&H.length||"myCoupons"!==D){a.next=10;break}return a.next=3,Object(T.b)(Object(C.c)({}));case 3:e=a.sent,t=Object(c.a)(e,2),n=t[0],o=t[1],n?(console.log("error",n),He()):(i=(o||{}).result,r=(i||{}).tabTypeList,E(u=void 0===r?[]:r),l=(null==u?void 0:u[0])||{},d=l.sourceType,Q(_=void 0===d?1:d),He({sourceType:_})),a.next=13;break;case 10:p=(null===(g=Object(s.getCurrentInstance)().router)||void 0===g?void 0:g.params)||{},m=p.sourceType,He({sourceType:Number(m)?Number(m):Y});case 13:case"end":return a.stop()}}),_callee)}))),50,[z,ne,he,Y]);var Ee=function showLoading(e){e?(u.a.eventCenter.trigger("_isShowLoading",!0),re(!1)):(u.a.eventCenter.trigger("_isShowLoading",!1),re(!0))},Me=function listenEvent(){Le(),function _useReachBottom(){u.a.eventCenter.on("_useReachBottom",(function(e){Pe.current&&ae((function(e){return e+1}))}))}(),Ae()};Object(l.useEffect)((function(){return u.a.eventCenter.trigger("_isShowLoading",!0),"myCoupons"==e.type&&u.a.eventCenter.on("_didShow",(function(){Pe.current=!0,Me()})),Me(),function(){Ve()}}),[]);var Ve=function offEventCenter(){u.a.eventCenter.off("_useReachBottom"),u.a.eventCenter.off("_handleTag"),u.a.eventCenter.off("_handleConfirm")},Re=Object(l.useCallback)((function(e){var t=e.markState,n=e.couponId,a=e.activityCode,o=e.userAction,c=void 0===o?"":o,r=e.couponType,s=e.styles,u=void 0===s?{}:s,l=e.traceId,g=void 0===l?"":l,p=e.couponStyle;Object(_.a)(Object(i.a)({click_id:"click_coupon",click_par:{userAction:c||"",couponId:n,couponType:r,activityCode:a,actType:((u||{}).couponButStyle||{}).title,couponStyle:p,businessType:Y}},L));var m={markState:t,code:a,refPageSource:L.pageSource||L.page_name},f={1:3,2:5}[Y];Object(d.a)({couponId:n,code:a,passThroughParam:m,extraParams:{ref_page:"applet",ref_par:JSON.stringify({traceId:g,userAction:c,pageId:L.pageId}),pageSource:L.pageSource||L.page_name}},f)}),[Y]),Ue=Object(l.useCallback)((function(){Ve(),Object(_.a)(Object(i.a)({click_id:"clickExplainIcon",click_par:{iconName:t.title||"优惠券说明"}},L));var e=t.url;e+="?sourceType=".concat(Y),t.url&&Object(s.navigateTo)({url:e})}),[Y]),qe=Object(l.useCallback)((function(){Ve();var e=n.url;e+="?sourceType=".concat(Y),n.url&&Object(s.navigateTo)({url:e})}),[Y]),Je=Object(l.useCallback)((function(e,t){W[t].showAll=!W[t].showAll;var n=JSON.parse(JSON.stringify(W));G(n)}),[W]),We=!le&&1==Y&&"myCoupons"===e.type,Ge=H&&(null==H?void 0:H.length)>1&&"disableCoupon"!==D,Fe=Ge?108:0;return ce&&Object(b.jsxs)(r.f,{style:Object.assign({marginTop:u.a.pxTransform(0+Fe,750)},e.style),children:[le&&Object(b.jsx)(y.a,Object(i.a)(Object(i.a)({type:"hasNoCoupon",isHideBtn:!0,tipTitle:"暂无可用优惠券"},pe),{},{height:"60vh"})),Ge&&Object(b.jsx)(h,{hasEffectTabs:Ne,style:{top:u.a.pxTransform(0,750)},curTab:R,dataSource:H,handleTab:Be}),We&&Object(b.jsx)(v,{}),!le&&W&&W.map((function(t,n){return Object(b.jsx)(x.a,{couponData:t,HandleShowAllMsg:function HandleShowAllMsg(){return Je(t,n)},HandleToUse:Re,couponStatus:e.state},"coupon"+n)})),xe&&Object(b.jsxs)(r.f,{className:w.a.bottom_txt,children:[t?Object(b.jsx)(r.f,{onClick:Ue,children:t.title}):null,n?Object(b.jsxs)(r.f,{className:w.a.bottom_txt2,onClick:qe,children:[Object(b.jsx)(r.e,{className:w.a.bottom_h,children:"|"}),n.title]}):null,p&&we&&Object(b.jsx)(r.f,{className:w.a._noneCoupon,children:p.title})]})]})},N=function CouponDialog(e){var t=Object(l.useContext)(f.a),n=Object(l.useState)(e.show||!1),a=Object(c.a)(n,2),o=a[0],s=a[1];Object(l.useEffect)((function(){u.a.eventCenter.on("CouponDialog",(function(e){s(e)}))}),[]);return Object(b.jsx)(r.a,Object(i.a)(Object(i.a)({show:o},e),{},{onConfirm:function handleConfirm(e){if(!e)return u.a.showToast({icon:"none",title:"请输入兑换码"}),void s(!1);Object(C.a)({exchangeCode:e,pageId:t.pageId,pageValue:t}).then((function(e){var t=e.isColor?e.data:e;"0"==t.code&&u.a.eventCenter.trigger("_handleConfirm"),s(!1),u.a.showToast({icon:"none",title:t.msg})})).catch((function(e){var t=e.isColor?e.data:e;s(!1),u.a.showToast({icon:"none",title:t.msg||"兑换失败"})}))},onCancel:function handleCancel(){s(!1)}}))},D=function Tabs(e){var t=e.dataSource,n=e.color,a=Object(l.useState)(0),o=Object(c.a)(a,2),s=o[0],d=o[1],g=Object(l.useContext)(f.a);return Object(l.useLayoutEffect)((function(){g.page_name&&Object(_.a)(Object(i.a)({click_id:"selectTab",click_par:{tabName:(t[0]||{}).text,state:0}},g))}),[g.page_name]),Object(b.jsx)(r.f,{className:m.a.tags,children:t.map((function(e,t){var a=s==t?n:"rgb(255, 255, 255)",o=s==t?n:"rgb(0, 0, 0)";return Object(b.jsx)(r.f,{onClick:function onClick(){return function handleTag(e,t){e!==s&&(d(e),Object(_.a)(Object(i.a)({click_id:"selectTab",click_par:{tabName:t}},g)),u.a.eventCenter.trigger("_handleTag",{key:e}))}(t,e.text)},style:{color:o,borderColor:a},className:m.a.tag,children:e.text},t)}))})},L=n(9),B=n(2),A=n(42),H=n.n(A),E=function CustomUI(e){var t=e.statusBarH,n=e.toBar,a=e.titleName,o=e._setSelectorChecked,i={height:"".concat(t,"px")},c={height:"".concat(n,"px")},r={height:"".concat(n,"px"),lineHeight:"".concat(n,"px")},s={height:"".concat(n,"px")},u={height:"".concat(t+n,"px")};return Object(b.jsxs)(B.e,{className:H.a.ch_top,style:u,children:[Object(b.jsx)(B.e,{style:i}),Object(b.jsxs)(B.e,{className:H.a.tobar,style:c,children:[Object(b.jsx)(B.e,{className:H.a.title,style:r,onClick:o,children:a}),Object(b.jsx)(B.e,{className:H.a.back,style:s})]})]})},M=function Custom(e){var t=Object(l.useState)(20),n=Object(c.a)(t,2),a=n[0],o=n[1],r=Object(l.useState)(20),s=Object(c.a)(r,2),d=s[0],_=s[1],g=Object(l.useState)("0"),p=Object(c.a)(g,2),m=(p[0],p[1],Object(l.useState)(!1)),f=Object(c.a)(m,2);f[0],f[1];Object(l.useEffect)((function(){u.a.getSystemInfo({success:function success(e){e.statusBarHeight&&o(e.statusBarHeight),"ios"==e.platform?_(44):"android"==e.platform?_(48):_(44)}})}),[]);return Object(b.jsx)(L.e,{children:Object(b.jsx)(E,Object(i.a)(Object(i.a)({},e),{},{statusBarH:a,toBar:d}))})}},7:function(e,t,n){e.exports={container:"index-module__container___2lNI1",coupon:"index-module__coupon___aCYv4",left_icon:"index-module__left_icon___2JgKX",circleIcon:"index-module__circleIcon___1Fycg",circleIconImage:"index-module__circleIconImage___3kzPT",amount_box:"index-module__amount_box___K0nPA",amount:"index-module__amount___2MsFc",unit:"index-module__unit___i9ZSH",limit:"index-module__limit___34icU",coupon_detail:"index-module__coupon_detail___32-WP",coupon_title:"index-module__coupon_title___2spLt",coupon_type:"index-module__coupon_type___pKm5c",sumTag:"index-module__sumTag___3Nt1W",coupon_date:"index-module__coupon_date___1ExOv",right_icon:"index-module__right_icon___385Vq",to_use:"index-module__to_use___dxonP",couponDetail:"index-module__couponDetail___3nNtM",line:"index-module__line___2LCGz",detailTitle:"index-module__detailTitle___P9gLm",text:"index-module__text___qBiHB",detailList:"index-module__detailList___1j7bE",tapArea:"index-module__tapArea___24TfG",icon_arrow:"index-module__icon_arrow___3SsMr",icon_arrow_up:"index-module__icon_arrow_up___OqSZW"}}},[[102,0,5]]]);