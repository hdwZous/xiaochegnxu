require("../../runtime"),require("../../vendors"),(wx["webpackJsonp/pages/myCoupons/"]=wx["webpackJsonp/pages/myCoupons/"]||[]).push([[3],{101:function(e,t,n){e.exports={index:"index-module__index___VEqKI"}},11:function(e,t,n){"use strict";n.d(t,"d",(function(){return a.c})),n.d(t,"f",(function(){return a.e})),n.d(t,"e",(function(){return a.d})),n.d(t,"b",(function(){return a.a})),n.d(t,"a",(function(){return v})),n.d(t,"c",(function(){return y.a}));var a=n(2),o=(n(7),n(12)),i=n(13),c=n(19),r=n(20),u=n(5),s=n(1),l=n.n(s),d=n(31),_=n.n(d),p=l.a.createContext({options:{},observer:null}),g=n(60),m=n.n(g),b=n(39),h=n(0),f=function(e){Object(c.a)(VisibleLogItem,e);var t=Object(r.a)(VisibleLogItem);function VisibleLogItem(){return Object(o.a)(this,VisibleLogItem),t.apply(this,arguments)}return Object(i.a)(VisibleLogItem,[{key:"componentDidMount",value:function componentDidMount(){var e,t=this;this.entry.onVisible=this.props.onVisible,this.entry.onHidden=this.props.onHidden,this.entry.visibleCallback=this.props.visibleCallback,null===(e=this.arr)||void 0===e||e.push((function(e){var n;(null===(n=t.entry)||void 0===n?void 0:n.uid)===e.id&&(null==e?void 0:e.intersectionRatio)>=(null===b.a||void 0===b.a?void 0:b.a.epMTADelayRatio)&&t.props.onVisible(e)}))}},{key:"componentWillUnmount",value:function componentWillUnmount(){}},{key:"render",value:function render(){var e=this,t=this.props,n=t.children,o=t.style,i=t.logSendData,c=void 0===i?{}:i,r=(t.addElClassName,t.innerStyle),u=t.onLayout,s=c.userAction,l=Array.isArray(s);return this.random=Math.random().toString().replace(".","")+"_"+Date.now(),Object(h.jsx)(p.Consumer,{children:function children(t){var i=t.options,c=t.userData,d=t.observer,_=t.arr;return e.options=i,e.userData=c,e.observer=d,e.arr=_,Object(h.jsx)(a.e,{ref:function ref(t){e.entry=t},className:m()("exposure"),"data-useraction":l?"":s,"data-useraction-list":l?JSON.stringify(s):"",style:r,children:Object(h.jsx)(a.e,{style:o,onLayout:u,children:n})})}})}}]),VisibleLogItem}(s.Component);Object(u.a)(f,"propTypes",{onVisible:_.a.func,onHidden:_.a.func,visibleCallback:_.a.func,style:_.a.oneOfType([_.a.array,_.a.object])}),Object(u.a)(f,"defaultProps",{onVisible:function onVisible(){},onHidden:function onHidden(){},visibleCallback:function visibleCallback(){},style:{}});var j=n(10),x=n(22),O=n.n(x),v=function Confirm(e){var t=Object(s.useState)(""),n=Object(j.a)(t,2),o=n[0],i=n[1];if(!e.show)return null;return Object(h.jsx)(a.e,{className:O.a.bg,children:Object(h.jsxs)(a.e,{className:O.a.content,children:[Object(h.jsx)(a.e,{className:O.a.title,children:e.title}),Object(h.jsx)(a.e,{className:O.a.input_box,children:Object(h.jsx)(a.b,{className:O.a.input_class,placeholder:e.placeholder,placeholderClass:O.a.input_class,onInput:function handleInput(e){console.log(e);var t=e.detail.value;i(t)}})}),Object(h.jsxs)(a.e,{className:O.a.btn_box,children:[Object(h.jsx)(a.e,{className:O.a.cancel_btn,onClick:function handleCancel(){e.onCancel(),i("")},children:e.cancelText}),Object(h.jsx)(a.e,{className:O.a.confirm_btn,onClick:function handleConfirm(){console.error(o),e.onConfirm(o),i("")},children:e.confirmText})]})]})})},y=(n(38),n(43))},142:function(e,t,n){"use strict";n.r(t);n(79);var a=n(4),o=n(8),i=n(57),c=n(1),r=n(58);o.container.get(o.SERVICE_IDENTIFIER.Hooks).initNativeApiImpls=[a.e.initNativeApi];var u={pages:["pages/index/index"],subPackages:[{root:"pages/myCoupons/",pages:["index","subPages/description/index","subPages/disabledCoupon/index"],independent:!0},{root:"pages/storeCouponList/",pages:["index"],independent:!0},{root:"pages/myAttention/",pages:["index"],independent:!0}],permission:{"scope.userLocation":{desc:"你的位置信息将用获取最近的门店信息"}},plugins:{loginPlugin:{version:"1.5.1",provider:"wxefe655223916819e"},"live-player-plugin":{version:"1.3.5",provider:"wx2b03c6e691cd7370"}},window:{backgroundTextStyle:"light",navigationBarBackgroundColor:"#fff",navigationBarTitleText:"WeChat",navigationBarTextStyle:"black"}};o.window.__taroAppConfig=u;class App extends c.Component{render(){return this.props.children}}Object(i.a)(App,c,r.a,u);var s=n(145).default;Page(Object(o.createPageConfig)(s,"pages/myCoupons/subPages/disabledCoupon/index",{},{navigationBarTitleText:"我的优惠券",backgroundColor:"#fff",renderer:"webview"}||{}))},145:function(e,t,n){"use strict";n.r(t);var a=n(3),o=n(12),i=n(13),c=n(14),r=n(28),u=n(21),s=n(19),l=n(20),d=n(5),_=(n(81),n(6)),p=n.n(_),g=n(11),m=n(101),b=n.n(m),h=n(62),f=[{templateId:2,templateName:"Tabs",data:[{text:"已过期",type:"1"},{text:"已使用",type:"2"}],config:{color:"rgb(71, 179, 79)"}},{templateId:1,templateName:"CouponList",data:[],config:{startIndex:1,dataSize:10,state:3,pageSource:"invalid_couponlist",refPar:"",ctp:"invalid_couponlist",style:{marginTop:"50px"},type:"disableCoupon",_noneCoupon:{title:"没有更多优惠券啦",url:"/pages/myCoupons/subPages/description/index"},key:"disableCoupon"}}],j=n(47),x=n(25),O=n(0),v=function(e){Object(s.a)(Index,e);var t=Object(l.a)(Index);function Index(){var e;Object(o.a)(this,Index);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),Object(d.a)(Object(c.a)(e),"state",{configData:f,isLoading:!1}),Object(d.a)(Object(c.a)(e),"page_name","invalid_couponlist"),Object(d.a)(Object(c.a)(e),"isShowLoading",(function(t){e.setState({isLoading:t})})),e}return Object(i.a)(Index,[{key:"componentWillMount",value:function componentWillMount(){Object(r.a)(Object(u.a)(Index.prototype),"componentWillMount",this).call(this)}},{key:"componentDidMount",value:function componentDidMount(){p.a.eventCenter.on("_isShowLoading",this.isShowLoading)}},{key:"componentWillUnmount",value:function componentWillUnmount(){}},{key:"componentDidShow",value:function componentDidShow(){Object(r.a)(Object(u.a)(Index.prototype),"componentDidShow",this).call(this)}},{key:"componentDidHide",value:function componentDidHide(){Object(r.a)(Object(u.a)(Index.prototype),"componentDidHide",this).call(this)}},{key:"onReachBottom",value:function onReachBottom(){p.a.eventCenter.trigger("_useReachBottom","")}},{key:"triggerChild",value:function triggerChild(e,t){p.a.eventCenter.trigger("disabledPage",{type:e,data:t})}},{key:"onChildEvent",value:function onChildEvent(){p.a.eventCenter.on("disabledPage",(function(e){}))}},{key:"renderComponent",value:function renderComponent(e,t){var n=h[e.templateName];return n?Object(O.jsx)(n,Object(a.a)(Object(a.a)({dataSource:e.data},e.config),{},{pageEvent:"disabledPage"}),t):null}},{key:"render",value:function render(){var e=this,t=this.pageInfoValue,n=this.state.isLoading;return Object(O.jsxs)(x.a.Provider,{value:t,children:[Object(O.jsx)(g.f,{className:b.a.index,children:f.map((function(t,n){return e.renderComponent(t,n)}))}),n&&Object(O.jsx)(g.c,{})]})}}]),Index}(j.a);t.default=v},2:function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"e",(function(){return o.e})),n.d(t,"d",(function(){return o.d})),n.d(t,"b",(function(){return o.b})),n.d(t,"a",(function(){return o.a}));var a=n(3),o=n(9),i=n(0),c=function DJRichText(e){return Object(i.jsx)(o.c,Object(a.a)({},e))}},22:function(e,t,n){e.exports={bg:"index-module__bg___vuVex",content:"index-module__content___8-LTS",title:"index-module__title___vLdGx",input_box:"index-module__input_box___3ZSEP",input_class:"index-module__input_class___3jvng",btn_box:"index-module__btn_box___2__5y",confirm_btn:"index-module__confirm_btn___2I8q7",cancel_btn:"index-module__cancel_btn___2Fo-o"}},25:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(1),o=n.n(a).a.createContext({pageId:""})},27:function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return s}));var a=n(3),o=n(48),i=n(61),c=n(18),r=n(32),u=function requestAdpter(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={xcxVersion:r.c,appVersion:r.a};return Object(o.a)(Object(a.a)(Object(a.a)({},e),t))},s=function colorRequest(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={xcxVersion:r.c,appVersion:r.a};return new Promise((function(n,o){var r,u=null===(r=e.body)||void 0===r?void 0:r.pageValue;console.log(u,"requestParams?.pageValue?.page_name"),Object(i.a)(Object(a.a)(Object(a.a)({},e),t)).then((function(e){n(e)})).catch((function(t){o(t),t.data.echo&&Object(c.a)({click_id:"spclError_color",click_par:{functionId:null==e?void 0:e.functionId,code:t.data.code,echo:t.data.echo},pageName:null==u?void 0:u.page_name})}))}))}},32:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return i}));var a="8.28.0",o="8.28.0",i="8.28.0"},33:function(e,t,n){e.exports={tipcontainer:"index-module__tipcontainer___2ADbc",img:"index-module__img___1GIbW",tipButton:"index-module__tipButton___14tpa",tipTitle:"index-module__tipTitle___nIgAo",tipDesc:"index-module__tipDesc___3k4i-"}},35:function(e,t,n){e.exports={tags:"index-module__tags___3E5Eg",tag:"index-module__tag___2yCIz",tabsCoupons:"index-module__tabsCoupons___2JTFO",tagText:"index-module__tagText___2EDY7",shortLine:"index-module__shortLine___2uBUs"}},36:function(e,t,n){"use strict";n.d(t,"d",(function(){return i})),n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return r})),n.d(t,"e",(function(){return u})),n.d(t,"c",(function(){return s}));var a=n(27),o=(n(26),n(30)),i=function getCoupons(e){return Object(a.b)({functionId:"user/myCouponListV2",body:e})},c=function exchangeCouponByCode(e){var t=Object(o.b)("serverConfig");return null!=t&&t.colorSwitch?Object(a.a)({functionId:"dj_share_exchangeCouponByCode",body:e}):Object(a.b)({functionId:"share/exchangeCouponByCode",body:e})},r=function getCouponIntroduce(e){return Object(a.b)({functionId:"user/couponIntroduce",body:e})},u=function updatecouponread(e){return Object(a.b)({functionId:"user/updatecouponread",body:e})},s=function getCouponTabList(e){return Object(a.b)({functionId:"coupon/couponSourceTypeList",body:e})}},38:function(e,t,n){"use strict";var a=n(2),o=n(33),i=n.n(o),c=n(0);t.a=function Tip(e){var t=e.type,n=e.callBack,o=e.tipText,r=e.tipDesc,u=void 0===r?"":r,s=e.tipTitle,l=void 0===s?"":s,d=function getImage(e){return{nothing:{url:"https://storage.360buyimg.com/wximg/common/errorbar_icon_nothingV2.png",width:160,height:160,button:"重新加载"},graydog:{url:"https://storage.360buyimg.com/wximg/merchant/vipChannel/graydog.png",width:160,height:160,button:"重新加载"},graydogNoBtn:{url:"https://storage.360buyimg.com/wximg/merchant/vipChannel/graydog.png",width:160,height:160},addNewAddress:{url:"https://storage.360buyimg.com/wximg/merchant/vipChannel/graydog.png",width:160,height:160,msg:"新建收货地址",button:"新建地址"},loadError:{url:"https://storage.360buyimg.com/wximg/merchant/vipChannel/graydog.png",width:160,height:160,button:"重新加载"},noAddress:{url:"https://storage.360buyimg.com/wximg/merchant/vipChannel/graydog.png",width:160,height:160,msg:"地址获取失败",button:"重新加载"},noCoupon:{url:"https://storage.360buyimg.com/wximg/merchant/vipChannel/noCoupon.png",width:160,height:160},noSearch:{url:"https://storage.360buyimg.com/wximg/merchant/vipChannel/noSearch.png",width:160,height:160},unlogin:{url:"https://static-o2o.360buyimg.com/activity/images/fe/emtip_unLogin.png",width:160,height:160,msg:"请您登录",button:"立即登录"},noShop:{url:"https://storage.360buyimg.com/wximg/merchant/vipChannel/noShop.png",width:160,height:160},cartEmpty:{url:"https://storage.360buyimg.com/wximg/merchant/vipChannel/cart_empty.png",width:160,height:160},shopDown:{url:"https://storage.360buyimg.com/wximg/merchant/vipChannel/store_offline.png",width:160,height:160,button:"去首页逛逛",page:"Main",args:{tab:"Home"}},nowifi:{url:"https://storage.360buyimg.com/wximg/merchant/vipChannel/nowifi.png",width:160,height:160,button:"重新加载"},network:{url:"https://storage.360buyimg.com/wximg/merchant/vipChannel/nowifi.png",width:160,height:160,button:"重新加载"},poiAddress:{url:"https://storage.360buyimg.com/wximg/merchant/vipChannel/noAddress.png",width:160,height:160,msg:"请手动输入地址"},noFeed:{url:"https://storage.360buyimg.com/wximg/merchant/vipChannel/noCover.png",width:160,height:160,msg:"很抱歉，当前位置未开通服务"},hasNoActivity:{url:"https://storage.360buyimg.com/wximg/merchant/vipChannel/noSearch.png",width:160,height:160,msg:"这里没有活动，回首页逛逛吧[0001]",button:"返回首页"},hasNoCoupon:{url:"https://storage.360buyimg.com/flutter-mock/tip_noCoupon.196a080c.png",width:160,height:160,msg:"暂无可用优惠券"}}[e]||{}}(t),_=d.url,p=d.width,g=d.height;return _?Object(c.jsxs)(a.e,{className:i.a.tipcontainer,style:{minHeight:e.height},children:[Object(c.jsx)(a.a,{className:i.a.img,style:{width:p,height:g},src:_}),!!l&&Object(c.jsx)(a.d,{className:i.a.tipTitle,children:l}),!!u&&Object(c.jsx)(a.d,{className:i.a.tipDesc,children:u}),!!o&&Object(c.jsx)(a.e,{className:i.a.tipButton,onClick:n,children:o})]}):null}},41:function(e,t,n){e.exports={bottom_txt:"index-module__bottom_txt___Bxc69",bottom_h:"index-module__bottom_h___1U9On",bottom_txt2:"index-module__bottom_txt2___3xi5R",_noneCoupon:"index-module___noneCoupon___2ZFXZ"}},42:function(e,t,n){e.exports={ch_top:"index-module__ch_top___3NOrD",tobar:"index-module__tobar___1RhOH",back:"index-module__back___M_57p",left_custom_class:"index-module__left_custom_class___1r5KW",title:"index-module__title___3MOZ3"}},43:function(e,t,n){"use strict";var a=n(2),o=n(46),i=n.n(o),c=n(0);t.a=function Loading(e){return Object(c.jsx)(a.a,{className:i.a.loading,src:"https://storage.360buyimg.com/wximg/merchant/vipChannel/newLoading.gif"})}},46:function(e,t,n){e.exports={loading:"index-module__loading___2hJGS"}},47:function(e,t,n){"use strict";n.d(t,"a",(function(){return x}));var a=n(40),o=n(3),i=n(12),c=n(13),r=n(14),u=n(19),s=n(20),l=n(5),d=n(1),_=n(6),p=n.n(_);function safe_add(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function md5_cmn(e,t,n,a,o,i){return safe_add(function bit_rol(e,t){return e<<t|e>>>32-t}(safe_add(safe_add(t,e),safe_add(a,i)),o),n)}function md5_ff(e,t,n,a,o,i,c){return md5_cmn(t&n|~t&a,e,t,o,i,c)}function md5_gg(e,t,n,a,o,i,c){return md5_cmn(t&a|n&~a,e,t,o,i,c)}function md5_hh(e,t,n,a,o,i,c){return md5_cmn(t^n^a,e,t,o,i,c)}function md5_ii(e,t,n,a,o,i,c){return md5_cmn(n^(t|~a),e,t,o,i,c)}function binl_md5(e,t){var n,a,o,i,c;e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;var r=1732584193,u=-271733879,s=-1732584194,l=271733878;for(n=0;n<e.length;n+=16)a=r,o=u,i=s,c=l,r=md5_ff(r,u,s,l,e[n],7,-680876936),l=md5_ff(l,r,u,s,e[n+1],12,-389564586),s=md5_ff(s,l,r,u,e[n+2],17,606105819),u=md5_ff(u,s,l,r,e[n+3],22,-1044525330),r=md5_ff(r,u,s,l,e[n+4],7,-176418897),l=md5_ff(l,r,u,s,e[n+5],12,1200080426),s=md5_ff(s,l,r,u,e[n+6],17,-1473231341),u=md5_ff(u,s,l,r,e[n+7],22,-45705983),r=md5_ff(r,u,s,l,e[n+8],7,1770035416),l=md5_ff(l,r,u,s,e[n+9],12,-1958414417),s=md5_ff(s,l,r,u,e[n+10],17,-42063),u=md5_ff(u,s,l,r,e[n+11],22,-1990404162),r=md5_ff(r,u,s,l,e[n+12],7,1804603682),l=md5_ff(l,r,u,s,e[n+13],12,-40341101),s=md5_ff(s,l,r,u,e[n+14],17,-1502002290),r=md5_gg(r,u=md5_ff(u,s,l,r,e[n+15],22,1236535329),s,l,e[n+1],5,-165796510),l=md5_gg(l,r,u,s,e[n+6],9,-1069501632),s=md5_gg(s,l,r,u,e[n+11],14,643717713),u=md5_gg(u,s,l,r,e[n],20,-373897302),r=md5_gg(r,u,s,l,e[n+5],5,-701558691),l=md5_gg(l,r,u,s,e[n+10],9,38016083),s=md5_gg(s,l,r,u,e[n+15],14,-660478335),u=md5_gg(u,s,l,r,e[n+4],20,-405537848),r=md5_gg(r,u,s,l,e[n+9],5,568446438),l=md5_gg(l,r,u,s,e[n+14],9,-1019803690),s=md5_gg(s,l,r,u,e[n+3],14,-187363961),u=md5_gg(u,s,l,r,e[n+8],20,1163531501),r=md5_gg(r,u,s,l,e[n+13],5,-1444681467),l=md5_gg(l,r,u,s,e[n+2],9,-51403784),s=md5_gg(s,l,r,u,e[n+7],14,1735328473),r=md5_hh(r,u=md5_gg(u,s,l,r,e[n+12],20,-1926607734),s,l,e[n+5],4,-378558),l=md5_hh(l,r,u,s,e[n+8],11,-2022574463),s=md5_hh(s,l,r,u,e[n+11],16,1839030562),u=md5_hh(u,s,l,r,e[n+14],23,-35309556),r=md5_hh(r,u,s,l,e[n+1],4,-1530992060),l=md5_hh(l,r,u,s,e[n+4],11,1272893353),s=md5_hh(s,l,r,u,e[n+7],16,-155497632),u=md5_hh(u,s,l,r,e[n+10],23,-1094730640),r=md5_hh(r,u,s,l,e[n+13],4,681279174),l=md5_hh(l,r,u,s,e[n],11,-358537222),s=md5_hh(s,l,r,u,e[n+3],16,-722521979),u=md5_hh(u,s,l,r,e[n+6],23,76029189),r=md5_hh(r,u,s,l,e[n+9],4,-640364487),l=md5_hh(l,r,u,s,e[n+12],11,-421815835),s=md5_hh(s,l,r,u,e[n+15],16,530742520),r=md5_ii(r,u=md5_hh(u,s,l,r,e[n+2],23,-995338651),s,l,e[n],6,-198630844),l=md5_ii(l,r,u,s,e[n+7],10,1126891415),s=md5_ii(s,l,r,u,e[n+14],15,-1416354905),u=md5_ii(u,s,l,r,e[n+5],21,-57434055),r=md5_ii(r,u,s,l,e[n+12],6,1700485571),l=md5_ii(l,r,u,s,e[n+3],10,-1894986606),s=md5_ii(s,l,r,u,e[n+10],15,-1051523),u=md5_ii(u,s,l,r,e[n+1],21,-2054922799),r=md5_ii(r,u,s,l,e[n+8],6,1873313359),l=md5_ii(l,r,u,s,e[n+15],10,-30611744),s=md5_ii(s,l,r,u,e[n+6],15,-1560198380),u=md5_ii(u,s,l,r,e[n+13],21,1309151649),r=md5_ii(r,u,s,l,e[n+4],6,-145523070),l=md5_ii(l,r,u,s,e[n+11],10,-1120210379),s=md5_ii(s,l,r,u,e[n+2],15,718787259),u=md5_ii(u,s,l,r,e[n+9],21,-343485551),r=safe_add(r,a),u=safe_add(u,o),s=safe_add(s,i),l=safe_add(l,c);return[r,u,s,l]}function binl2rstr(e){var t,n="";for(t=0;t<32*e.length;t+=8)n+=String.fromCharCode(e[t>>5]>>>t%32&255);return n}function rstr2binl(e){var t,n=[];for(n[(e.length>>2)-1]=void 0,t=0;t<n.length;t+=1)n[t]=0;for(t=0;t<8*e.length;t+=8)n[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return n}function rstr2hex(e){var t,n,a="";for(n=0;n<e.length;n+=1)t=e.charCodeAt(n),a+="0123456789abcdef".charAt(t>>>4&15)+"0123456789abcdef".charAt(15&t);return a}function str2rstr_utf8(e){return unescape(encodeURIComponent(e))}function raw_md5(e){return function rstr_md5(e){return binl2rstr(binl_md5(rstr2binl(e),8*e.length))}(str2rstr_utf8(e))}function raw_hmac_md5(e,t){return function rstr_hmac_md5(e,t){var n,a,o=rstr2binl(e),i=[],c=[];for(i[15]=c[15]=void 0,o.length>16&&(o=binl_md5(o,8*e.length)),n=0;n<16;n+=1)i[n]=909522486^o[n],c[n]=1549556828^o[n];return a=binl_md5(i.concat(rstr2binl(t)),512+8*t.length),binl2rstr(binl_md5(c.concat(a),640))}(str2rstr_utf8(e),str2rstr_utf8(t))}var g=function md5(e,t,n){return t?n?raw_hmac_md5(t,e):function hex_hmac_md5(e,t){return rstr2hex(raw_hmac_md5(e,t))}(t,e):n?raw_md5(e):function hex_md5(e){return rstr2hex(raw_md5(e))}(e)},m=(new Date).getTime(),b=function generateId(){var e=(p.a.getStorageSync("login_info")||{}).deviceid_pdj_jd;return m+++e+Math.random().toString().substr(1)+"."+(new Date).getTime()};function pageIdFormation(e,t,n,a,o){var i="string"==typeof n?n:n===GOTO?"g":n===GOBACK?"b":"u";return g((e?e+"-":"")+(o?o+"-":"")+t+"-"+i+(a?"-"+a:""))}var h=function(){function PageStackClass(){var e=this;Object(i.a)(this,PageStackClass),this.pages=[],this.getReferPage=function(t){if(!e.pages.length)return{ref_page_name:"",ref_path:"",refPageSource:""};var n;if(e.pages.forEach((function(e,a){e.page_name==t&&(n=a-1)})),n<0)return{ref_page_name:"",ref_path:"",refPageSource:""};var a=e.pages[n]||{};return{ref_page_name:a.page_name||"",ref_path:a.cur_path||"",refPageSource:a.pageSource}}}return Object(c.a)(PageStackClass,null,[{key:"generate",value:function generate(){return PageStackClass.instance||(PageStackClass.instance=new PageStackClass),PageStackClass.instance}}]),PageStackClass}().generate(),f=n(18),j=["lat","lng","city_id","poi","lat_pos","lng_pos","pageId","ref_page","$taroTimestamp","city_name","transparentenable","ref_par","userAction"],x=function(e){Object(u.a)(Page,e);var t=Object(s.a)(Page);function Page(){var e;Object(i.a)(this,Page);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return e=t.call.apply(t,[this].concat(a)),Object(l.a)(Object(r.a)(e),"$instance",Object(_.getCurrentInstance)()),Object(l.a)(Object(r.a)(e),"firstMount",!0),Object(l.a)(Object(r.a)(e),"getPageName",(function(){return e.page_name})),Object(l.a)(Object(r.a)(e),"getPageSource",(function(){return e.pageSource})),Object(l.a)(Object(r.a)(e),"pageId",pageIdFormation(e.getPageName(),b(),"GOTO","","")),Object(l.a)(Object(r.a)(e),"getPageParams",(function(){return{pageId:e.pageId,page_name:e.getPageName(),pageSource:e.getPageSource(),request_par:Object.assign(e.isPageHome&&(p.a.getLaunchOptionsSync()||{}).query||{},(e.$instance.router||{}).params||{}),cur_path:(e.$instance.router||{}).path}})),Object(l.a)(Object(r.a)(e),"pageInfoValue",Object(o.a)(Object(o.a)({},e.getPageParams()),h.getReferPage(e.getPageName()))),e}return Object(c.a)(Page,[{key:"componentWillMount",value:function componentWillMount(){this.sendPvData("goto")}},{key:"componentDidShow",value:function componentDidShow(){this.firstMount||this.sendPvData("back")}},{key:"componentDidHide",value:function componentDidHide(){Object(f.d)(Object(o.a)({},this.pageInfoValue)),this.firstMount=!1}},{key:"sendPvData",value:function sendPvData(e){try{var t=this.getPageParams(),n=h.pages,i=h.getReferPage,c=t.page_name;if(n.length)n[n.length-1].page_name!==c&&n.push(t);else n.push(t);var r=i(c),u="";(u=(t.request_par||{}).ref_page)&&(r.ref_page_name=u),this.pageInfoValue.ref_page_name=r.ref_page_name||"",this.pageInfoValue.ref_path=r.ref_path,this.pageInfoValue.page_name=this.getPageName();var s=t.request_par,l=(s.lat,s.lng,s.city_id,s.poi,s.lat_pos,s.lng_pos,s.pageId,s.ref_page,s.$taroTimestamp,s.city_name,s.transparentenable,s.ref_par),d=s.userAction,_=Object(a.a)(s,j);if(l){var p="{}";try{"string"==typeof l?(p=decodeURIComponent(l),p=JSON.parse(p)):p=l}catch(e){p=JSON.parse("{}")}_.ref_par=p}else if(d)try{_.ref_par={userAction:decodeURIComponent(d)}}catch(e){_.ref_par={userAction:d}}t.request_par=_,"back"==e&&(t.request_par.ret_Type="back",_.ref_par={}),Object(f.c)(Object(o.a)(Object(o.a)({},t),r))}catch(e){}}}]),Page}(d.Component)},51:function(e,t,n){"use strict";(function(e){function p2Arry(e){return e.then((function(e){return[null,e]})).catch((function(e){return[e]}))}n.d(t,"b",(function(){return p2Arry})),n.d(t,"a",(function(){return a}));var a=function genDeviceId(){for(var e=[],t="0123456789abcdefghijklmnopqrstuv",n=0;n<36;n++)e[n]=t.substr(Math.floor(16*Math.random()),1);return e[14]="4",e[19]=t.substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="-",e.join("")}}).call(this,n(8).document)},52:function(e,t,n){e.exports={btn_area:"index-module__btn_area___MfLQl",img_icon:"index-module__img_icon___1m8G9"}},62:function(e,t,n){"use strict";n.r(t),n.d(t,"CouponList",(function(){return N})),n.d(t,"Exchange",(function(){return O})),n.d(t,"CouponDialog",(function(){return P})),n.d(t,"Tabs",(function(){return L})),n.d(t,"Custom",(function(){return H}));var a=n(16),o=n(23),i=n(3),c=n(10),r=n(11),u=n(6),s=n.n(u),l=n(1),d=n(75),_=n(18),p=n(76),g=n(35),m=n.n(g),b=n(25),h=n(0),f=Object(l.memo)((function(e){var t=e.dataSource,n=e.curTab,a=Object(l.useContext)(b.a);return Object(l.useLayoutEffect)((function(){e.hasEffectTabs||a.page_name&&Object(_.a)(Object(i.a)({click_id:"selectTab",click_par:{businessName:(t[0]||{}).showName,businessType:(t[0]||{}).sourceType,state:0}},a))}),[a.page_name,e.hasEffectTabs]),Object(h.jsx)(r.f,{className:m.a.tabsCoupons,style:e.style,children:t.map((function(o,c){return Object(h.jsxs)(r.f,{onClick:function onClick(){return function handleTab(o,c,r){var u;o!==n&&(Object(_.a)(Object(i.a)({click_id:"selectTab",click_par:{businessType:r,businessName:null==t||null===(u=t[r-1])||void 0===u?void 0:u.showName}},a)),e.handleTab&&e.handleTab({sourceType:r,curTab:o}))}(c,o.showName,o.sourceType)},className:m.a.tag,children:[Object(h.jsx)(r.e,{className:m.a.tagText,style:{fontWeight:n==c?"600":"400"},children:o.showName}),n==c&&Object(h.jsx)(r.f,{className:m.a.shortLine})]},c)}))})})),j=n(52),x=n.n(j),O=function Exchange(e){var t=Object(l.useContext)(b.a);return Object(h.jsxs)(r.f,{onClick:function handleExchange(){Object(_.a)(Object(i.a)({click_id:"my_coupons_exchange_20160713"},t)),s.a.eventCenter.trigger("CouponDialog",!0)},className:x.a.btn_area,style:e.style,children:[Object(h.jsx)(r.b,{src:"https://static-o2o.360buyimg.com/activity/images/fe/user_store_act_focus.png",className:x.a.img_icon}),Object(h.jsx)(r.f,{children:"使用兑换码"})]})},v=n(77),y=(n(94),n(38)),C=n(36),w=n(41),S=n.n(w),k=n(37);var T=function useDebounce(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];Object(l.useEffect)((function(){var n;return n=setTimeout(e,t),function(){clearTimeout(n)}}),Object(k.a)(n))},I=n(51),N=function CouponList(e){var t=e.introduce,n=e.disabledCoupon,g=e._noneCoupon,m=e.dataSize,j=e.refPar,x=void 0===j?"":j,w=e.pageSource,k=void 0===w?"myCoupon":w,N=e.ctp,P=void 0===N?"couponsList":N,L=e.type,D=Object(l.useContext)(b.a)||{},A=Object(l.useState)([]),B=Object(c.a)(A,2),E=B[0],V=B[1],H=Object(l.useState)(0),M=Object(c.a)(H,2),R=M[0],q=M[1],W=Object(l.useState)([]),J=Object(c.a)(W,2),U=J[0],F=J[1],G=Object(l.useState)(e.state||1),z=Object(c.a)(G,2),K=z[0],Z=z[1],$=Object(l.useState)(1),X=Object(c.a)($,2),Y=X[0],Q=X[1],ee=Object(l.useState)(e.startIndex||1),te=Object(c.a)(ee,2),ne=te[0],ae=te[1],oe=Object(l.useState)(!1),ie=Object(c.a)(oe,2),ce=ie[0],re=ie[1],ue=Object(l.useState)(!1),se=Object(c.a)(ue,2),le=se[0],de=se[1],_e=Object(l.useState)(e.defaultPage),pe=Object(c.a)(_e,2),ge=pe[0],me=pe[1],be=Object(l.useState)(0),he=Object(c.a)(be,2),fe=he[0],je=he[1],xe=Object(l.useState)(!0),Oe=Object(c.a)(xe,2),ve=Oe[0],ye=Oe[1],Ce=Object(l.useState)(!1),we=Object(c.a)(Ce,2),Se=we[0],ke=we[1],Te=Object(l.useRef)(!1),Ie=Object(l.useState)(!1),Ne=Object(c.a)(Ie,2),Pe=Ne[0],Le=Ne[1],De=Object(l.useCallback)((function(){s.a.eventCenter.on("_handleTag",(function(e){var t=e.key;switch(F([]),t){case 0:Z(3);break;case 1:Z(2)}de(!1),ae(1),Te.current=!1,Ve(!0),ke(!1)}))}),[]),Ae=Object(l.useCallback)((function(e){var t=e.sourceType,n=e.curTab;q(n),F([]),Z(1),Q(t),de(!1),ae(1),Te.current=!1,Ve(!0),ke(!1),Le(!0)}),[]),Be=Object(l.useCallback)((function(){s.a.eventCenter.on("_handleConfirm",(function(e){var t=++fe;Te.current=!1,F([]),Z(1),de(!1),ae(1),Ve(!0),ke(!1),je(t)}))}),[]),Ee=function getCouponList(e){var t=(e||{}).sourceType;Object(C.d)({startIndex:ne,dataSize:m,refPar:x,pageSource:k,state:K,ctp:P,pageId:D.pageId,sourceType:t}).then((function(e){return Ve(!1),de(!1),new Promise((function(t){var n,a,o=(e||{}).result.hasNextPage;if(null!==(n=e.result)&&void 0!==n&&null!==(a=n.couponList)&&void 0!==a&&a.length){var c=e.result.couponList.map((function(t){return Object(i.a)(Object(i.a)({},t),{},{showAll:!1,styles:Object(i.a)(Object(i.a)({},t.styles),{},{couponLabelStyle:t.styles.couponLabelStyle&&t.styles.couponLabelStyle.splice(0,2)}),traceId:e.traceId})}));o?Te.current=!0:(Te.current=!1,ke(!0)),F((function(e){var n=e.concat(c);return t(n),n}))}else Te.current=!1,ke(!0),t(U)}))})).then((function(e){0==e.length&&de(!0),s.a.eventCenter.trigger("isDefault",e.length||0)})).catch((function(e){console.log("e",e),Ve(!1),"201"==e.code||"202"==e.code?(ye(!1),de(!0),me({tipTitle:"暂未登录",tipText:"立即登录",tipDesc:"快去登录，迫不及待与你相见啦~",type:"unlogin",callBack:function callBack(){Object(p.a)()}})):U.length||(de(!0),me({tipTitle:"网络请求失败",tipText:"重新加载",tipDesc:"网络离家出走啦？我要把TA找回来~",type:"nothing",callBack:function callBack(){Ve(!0);var e=++fe;je(e)}}))}))};T(Object(o.a)(Object(a.a)().mark((function _callee(){var e,t,n,o,i,r,s,l,d,_,p,g,m;return Object(a.a)().wrap((function _callee$(a){for(;;)switch(a.prev=a.next){case 0:if(null!=E&&E.length||"myCoupons"!==L){a.next=10;break}return a.next=3,Object(I.b)(Object(C.c)({}));case 3:e=a.sent,t=Object(c.a)(e,2),n=t[0],o=t[1],n?(console.log("error",n),Ee()):(i=(o||{}).result,r=(i||{}).tabTypeList,V(s=void 0===r?[]:r),l=(null==s?void 0:s[0])||{},d=l.sourceType,Q(_=void 0===d?1:d),Ee({sourceType:_})),a.next=13;break;case 10:g=(null===(p=Object(u.getCurrentInstance)().router)||void 0===p?void 0:p.params)||{},m=g.sourceType,Ee({sourceType:Number(m)?Number(m):Y});case 13:case"end":return a.stop()}}),_callee)}))),50,[K,ne,fe,Y]);var Ve=function showLoading(e){e?(s.a.eventCenter.trigger("_isShowLoading",!0),re(!1)):(s.a.eventCenter.trigger("_isShowLoading",!1),re(!0))},He=function listenEvent(){De(),function _useReachBottom(){s.a.eventCenter.on("_useReachBottom",(function(e){Te.current&&ae((function(e){return e+1}))}))}(),Be()};Object(l.useEffect)((function(){return s.a.eventCenter.trigger("_isShowLoading",!0),"myCoupons"==e.type&&s.a.eventCenter.on("_didShow",(function(){Te.current=!0,He()})),He(),function(){Me()}}),[]);var Me=function offEventCenter(){s.a.eventCenter.off("_useReachBottom"),s.a.eventCenter.off("_handleTag"),s.a.eventCenter.off("_handleConfirm")},Re=Object(l.useCallback)((function(e){var t=e.markState,n=e.couponId,a=e.activityCode,o=e.userAction,c=void 0===o?"":o,r=e.couponType,u=e.styles,s=void 0===u?{}:u,l=e.traceId,p=void 0===l?"":l,g=e.couponStyle;Object(_.a)(Object(i.a)({click_id:"click_coupon",click_par:{userAction:c||"",couponId:n,couponType:r,activityCode:a,actType:((s||{}).couponButStyle||{}).title,couponStyle:g,businessType:Y}},D));var m={markState:t,code:a,refPageSource:D.pageSource||D.page_name},b={1:3,2:5}[Y];Object(d.a)({couponId:n,code:a,passThroughParam:m,extraParams:{ref_page:"applet",ref_par:JSON.stringify({traceId:p,userAction:c,pageId:D.pageId}),pageSource:D.pageSource||D.page_name}},b)}),[Y]),qe=Object(l.useCallback)((function(){Me(),Object(_.a)(Object(i.a)({click_id:"clickExplainIcon",click_par:{iconName:t.title||"优惠券说明"}},D));var e=t.url;e+="?sourceType=".concat(Y),t.url&&Object(u.navigateTo)({url:e})}),[Y]),We=Object(l.useCallback)((function(){Me();var e=n.url;e+="?sourceType=".concat(Y),n.url&&Object(u.navigateTo)({url:e})}),[Y]),Je=Object(l.useCallback)((function(e,t){U[t].showAll=!U[t].showAll;var n=JSON.parse(JSON.stringify(U));F(n)}),[U]),Ue=!le&&1==Y&&"myCoupons"===e.type,Fe=E&&(null==E?void 0:E.length)>1&&"disableCoupon"!==L,Ge=Fe?108:0;return ce&&Object(h.jsxs)(r.f,{style:Object.assign({marginTop:s.a.pxTransform(0+Ge,750)},e.style),children:[le&&Object(h.jsx)(y.a,Object(i.a)(Object(i.a)({type:"hasNoCoupon",isHideBtn:!0,tipTitle:"暂无可用优惠券"},ge),{},{height:"60vh"})),Fe&&Object(h.jsx)(f,{hasEffectTabs:Pe,style:{top:s.a.pxTransform(0,750)},curTab:R,dataSource:E,handleTab:Ae}),Ue&&Object(h.jsx)(O,{}),!le&&U&&U.map((function(t,n){return Object(h.jsx)(v.a,{couponData:t,HandleShowAllMsg:function HandleShowAllMsg(){return Je(t,n)},HandleToUse:Re,couponStatus:e.state},"coupon"+n)})),ve&&Object(h.jsxs)(r.f,{className:S.a.bottom_txt,children:[t?Object(h.jsx)(r.f,{onClick:qe,children:t.title}):null,n?Object(h.jsxs)(r.f,{className:S.a.bottom_txt2,onClick:We,children:[Object(h.jsx)(r.e,{className:S.a.bottom_h,children:"|"}),n.title]}):null,g&&Se&&Object(h.jsx)(r.f,{className:S.a._noneCoupon,children:g.title})]})]})},P=function CouponDialog(e){var t=Object(l.useContext)(b.a),n=Object(l.useState)(e.show||!1),a=Object(c.a)(n,2),o=a[0],u=a[1];Object(l.useEffect)((function(){s.a.eventCenter.on("CouponDialog",(function(e){u(e)}))}),[]);return Object(h.jsx)(r.a,Object(i.a)(Object(i.a)({show:o},e),{},{onConfirm:function handleConfirm(e){if(!e)return s.a.showToast({icon:"none",title:"请输入兑换码"}),void u(!1);Object(C.a)({exchangeCode:e,pageId:t.pageId,pageValue:t}).then((function(e){var t=e.isColor?e.data:e;"0"==t.code&&s.a.eventCenter.trigger("_handleConfirm"),u(!1),s.a.showToast({icon:"none",title:t.msg})})).catch((function(e){var t=e.isColor?e.data:e;u(!1),s.a.showToast({icon:"none",title:t.msg||"兑换失败"})}))},onCancel:function handleCancel(){u(!1)}}))},L=function Tabs(e){var t=e.dataSource,n=e.color,a=Object(l.useState)(0),o=Object(c.a)(a,2),u=o[0],d=o[1],p=Object(l.useContext)(b.a);return Object(l.useLayoutEffect)((function(){p.page_name&&Object(_.a)(Object(i.a)({click_id:"selectTab",click_par:{tabName:(t[0]||{}).text,state:0}},p))}),[p.page_name]),Object(h.jsx)(r.f,{className:m.a.tags,children:t.map((function(e,t){var a=u==t?n:"rgb(255, 255, 255)",o=u==t?n:"rgb(0, 0, 0)";return Object(h.jsx)(r.f,{onClick:function onClick(){return function handleTag(e,t){e!==u&&(d(e),Object(_.a)(Object(i.a)({click_id:"selectTab",click_par:{tabName:t}},p)),s.a.eventCenter.trigger("_handleTag",{key:e}))}(t,e.text)},style:{color:o,borderColor:a},className:m.a.tag,children:e.text},t)}))})},D=n(9),A=n(2),B=n(42),E=n.n(B),V=function CustomUI(e){var t=e.statusBarH,n=e.toBar,a=e.titleName,o=e._setSelectorChecked,i={height:"".concat(t,"px")},c={height:"".concat(n,"px")},r={height:"".concat(n,"px"),lineHeight:"".concat(n,"px")},u={height:"".concat(n,"px")},s={height:"".concat(t+n,"px")};return Object(h.jsxs)(A.e,{className:E.a.ch_top,style:s,children:[Object(h.jsx)(A.e,{style:i}),Object(h.jsxs)(A.e,{className:E.a.tobar,style:c,children:[Object(h.jsx)(A.e,{className:E.a.title,style:r,onClick:o,children:a}),Object(h.jsx)(A.e,{className:E.a.back,style:u})]})]})},H=function Custom(e){var t=Object(l.useState)(20),n=Object(c.a)(t,2),a=n[0],o=n[1],r=Object(l.useState)(20),u=Object(c.a)(r,2),d=u[0],_=u[1],p=Object(l.useState)("0"),g=Object(c.a)(p,2),m=(g[0],g[1],Object(l.useState)(!1)),b=Object(c.a)(m,2);b[0],b[1];Object(l.useEffect)((function(){s.a.getSystemInfo({success:function success(e){e.statusBarHeight&&o(e.statusBarHeight),"ios"==e.platform?_(44):"android"==e.platform?_(48):_(44)}})}),[]);return Object(h.jsx)(D.e,{children:Object(h.jsx)(V,Object(i.a)(Object(i.a)({},e),{},{statusBarH:a,toBar:d}))})}},7:function(e,t,n){e.exports={container:"index-module__container___2lNI1",coupon:"index-module__coupon___aCYv4",left_icon:"index-module__left_icon___2JgKX",circleIcon:"index-module__circleIcon___1Fycg",circleIconImage:"index-module__circleIconImage___3kzPT",amount_box:"index-module__amount_box___K0nPA",amount:"index-module__amount___2MsFc",unit:"index-module__unit___i9ZSH",limit:"index-module__limit___34icU",coupon_detail:"index-module__coupon_detail___32-WP",coupon_title:"index-module__coupon_title___2spLt",coupon_type:"index-module__coupon_type___pKm5c",sumTag:"index-module__sumTag___3Nt1W",coupon_date:"index-module__coupon_date___1ExOv",right_icon:"index-module__right_icon___385Vq",to_use:"index-module__to_use___dxonP",couponDetail:"index-module__couponDetail___3nNtM",line:"index-module__line___2LCGz",detailTitle:"index-module__detailTitle___P9gLm",text:"index-module__text___qBiHB",detailList:"index-module__detailList___1j7bE",tapArea:"index-module__tapArea___24TfG",icon_arrow:"index-module__icon_arrow___3SsMr",icon_arrow_up:"index-module__icon_arrow_up___OqSZW"}}},[[142,0,5]]]);