<wxs
  src="./tools.wxs"
  module="tools"
/>
<view class="good-list__wrapper">
  <block
    wx:for="{{goodList}}"
    wx:for-item="item"
    wx:if="{{!item.spuId}}"
    wx:key="index"
  >
    <view
      class="good-item"
      data-item="{{item}}"
      data-sku-id="{{item.skuId}}"
      data-store-id="{{item.storeId}}"
      data-state="{{item.isJianyun ? 'Reduce_freight_commodity' : ''}}"
      bindtap="handleToDetail"
    >
      <view class="good-image_box">
        <image src="{{item.imgUrl}}" />
        <view
          wx:if="{{!item.fixedStatus}}"
          class="good-tag"
        >已下架</view>
        <view
          wx:if="{{item.stockCount < 1}}"
          class="good-tag"
        >已抢光</view>
        <view
          wx:if="{{item.stockCount <= 3 && item.stockCount>0}}"
          class="good-tag__remain"
        >
          仅剩
          <text>{{item.stockCount}}</text>件
        </view>
        <view class="freeze-wrap">
          <freeze-tag tag="{{tools.getDefaultObj(item.topLeftCornerTag)}}" />
        </view>
      </view>
      <view class="good-info">
        <view class="sku-top">
          <view class="sku-name">{{item.skuName}}</view>
          <view
            class="description ellipsis"
            wx:if="{{item.skuDesc}}"
          >
            <image
              class="desc-icon"
              wx:if="{{item.skuDescIcon}}"
              src="{{item.skuDescIcon}}"
            />
            {{item.skuDesc}}
          </view>
        </view>
        <view class="sku-bottom">
          <view class="sku-bottom__price">
            <view
              class="major-price"
              wx:if="{{item.majorPrice.price}}"
            >¥{{item.majorPrice.price}}</view>
            <view
              class="mirror-price"
              wx:if="{{item.minorPrice && item.minorPrice.priceType != -7 && item.minorPrice.deleteLine}}"
            >¥{{item.minorPrice.price}}</view>
          </view>
          <view
            class="sku-bottom__cart"
            wx:if="{{item.showCartButton}}"
          >
            <add-cart-controller
              count="{{item.showModel ? item.spuCartCount :  item.incartCount || 0}}"
              skuId="{{item.skuId || ''}}"
              spuId="{{item.spuId || ''}}"
              data-sku-id="{{item.skuId}}"
              orgCode="{{item.orgCode}}"
              storeId="{{item.storeId}}"
              longitude="{{longitude}}"
              latitude="{{latitude}}"
              isAddCart="{{item.isAddCart}}"
              tags="{{item.tags}}"
              weighting="{{!!item.cartWeight}}"
              weight="{{item.cartWeight}}"
            ></add-cart-controller>
          </view>
        </view>
      </view>
    </view>
  </block>
</view>
