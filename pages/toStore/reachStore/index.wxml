<block wx:if="{{showDefault}}">
  <!-- 自定义导航条 -->
  <header capsule="{{capsule}}"
          scrollTop="150"  
          navHeight="{{navHeight}}"
          buriedObj="{{buriedObj}}" />
          
  <new-default type="{{defaultType}}" 
            defaultObj="{{defaultObj}}"
            buriedObj="{{buriedObj}}" 
            bind:defaultBtnEvent="onDefaultBtnEvent" />
</block>
<block wx:else>
  <view wx:if="{{showLoading}}" class='reachstore-loading'>
    <image class='reachstore-loading-img' src="https://storage.360buyimg.com/wximg/common/loading.gif" />
  </view>
  <!-- style="height: {{showEmpty ? '100vh' : 'auto'}}"s -->
  <view wx:else 
        class='reach-store-wrapper' 
        
        id="store">
    <!-- 门店背景 -->
    <store-bg url="{{storeInfo.backgroundImage}}" 
              logo="{{storeInfo.logoUrl}}"
              couponInfo="{{couponSimpleInfo}}"/>
    <!-- 自定义导航条 scrollTop="{{scrollTop}}" -->
    <header capsule="{{capsule}}" 
            opacity="{{opacity}}"
            navHeight="{{navHeight}}" 
            storeName="{{storeInfo.storeName}}"
            tabIsCiel="{{tabIsCiel}}"
            buriedObj="{{recommendObj}}" />
    <!-- 门店头卡片 -->
    <view class='store-head-wrap'>
      <store-head storeInfo="{{storeInfo}}" 
                  couponSimpleInfo="{{couponSimpleInfo}}" 
                  showCouponMore="{{showCouponMore}}" 
                  bind:pageEvent="widgetEvent" 
                  traceId="{{traceId}}" 
                  buriedObj="{{recommendObj}}">
      </store-head>
    </view>
    <!-- 第二接口报错，展示错误页 -->
    <view wx:if="{{showEmpty}}" style="position: relative; flex: 1;">
      <new-default type="{{defaultType}}" 
              defaultObj="{{defaultObj}}"
              topMargin="54"
              buriedObj="{{recommendObj}}"
              bind:defaultBtnEvent="onDefaultBtnEvent"
               />
    </view>
    <!-- 楼层信息 -->
    <block wx:else>
      <view class='tostore-store-content'>
        <block wx:for="{{floorList}}"
              wx:for-item="floor"
              wx:key="index">
          <!-- 门店tab -->
          <view class="reach-store-tab-wrap" wx:if="{{floor.floorStyle == 'navigation' && floor.tpl == 'tpl_nav'}}">
            <scroll-view
                      scroll-left="{{curIndex * 40}}rpx"
                      scroll-x="true"
                      scroll-with-animation="true" 
                      enable-passive="true"
                      class='reach-store-tab' 
                      style="position: {{tabIsCiel ? 'fixed' : 'initial'}}; top: {{tabFixedTop}}px;background: {{tabIsCiel ? '#fff' : 'transparent'}}">
              <view wx:for="{{floor.data}}"
                    wx:key="subIndex"
                    wx:for-index="subIndex"
                    wx:for-item="item"
                    bindtap="clickTab"
                    data-index="{{subIndex}}"
                    data-jump-index="{{item.jumpFloorIndex}}"
                    class="reach-store-tabitem {{(floor.data.length > 1 && subIndex == curIndex) ? 'reach-store-tabitem-selected' : ''}}"
                    aria-label="{{item.title}}"
                    aria-role="button">
                <view class="reach-store-tabitem-text">
                  {{item.title}}
                </view>
              </view>
            </scroll-view>
          </view>
          <!-- 代金券楼层 -->
          <view wx:if="{{floor.floorStyle == 'voucher' && floor.tpl == 'tpl1-1'}}">
            <!-- 占位标题，为了能锚中 -->
            <view class='floor_{{floor.index}} zhanwei'></view>
            <block wx:for="{{floor.data}}"
                  wx:key="subIndex"
                  wx:for-item="item"
                  wx:for-index="subIndex">
              <cash-coupon-yhy item="{{item}}" buriedObj="{{recommendObj}}" traceId="{{homePageTraceId}}"/>
            </block>
          </view>
          <!-- 优惠套餐楼层和普通商品楼层 -->
          <view wx:if="{{(floor.floorStyle == 'combination' || floor.floorStyle == 'commodity' ) &&  floor.tpl == 'tpl1-1' }}" 
              class='tostore-floor-package'>
            <view wx:if="{{floor.floorTitle}}" class='tostore-floor floor_{{floor.index}} tostore-floor-title'>{{floor.floorTitle}}</view>
            <!-- 占位标题，为了能锚中 -->
            <view wx:else class='floor_{{floor.index}} zhanwei'></view>
            <view class='floor-combination'>
              <block wx:for="{{floor.data}}"
                    wx:key="subIndex"
                    wx:for-item="item"
                    wx:for-index="subIndex">
                <package-yhy item='{{item}}' buriedObj="{{recommendObj}}" traceId="{{homePageTraceId}}" />
              </block>
            </view>
          </view>
        </block>
      </view>
    </block>
    <!-- 商家服务半弹层 -->
    <org-service-half show="{{showServiceHalf}}"
                      storeInfo="{{storeInfo}}"
                      storeCommentVO="{{storeCommentVO}}"
                      bind:pageEvent="widgetEvent"
                      buriedObj="{{recommendObj}}"
                      id="shopService" />
    <!-- 切换门店悬浮球 -->
    <store-float-ball wx:if="{{switchStore && switchStore.btnName}}" 
                      switchStore="{{switchStore}}"  
                      showFloatBall="{{showFloatBall}}"
                      navHeight="{{navHeight}}"
                      traceId="{{storeDetailTraceId}}"
                      buriedObj="{{recommendObj}}"
                      storeInfo="{{storeInfo}}" />
    <!-- 切换门店教育弹层 -->
    <store-education show="{{showStoreEducation}}" 
                    type="{{storeInfo.storeBusinessType}}"
                    navHeight="{{navHeight}}"
                    bind:pageEvent="widgetEvent" />
    <!-- 优惠信息半弹层--老半弹层 -->
    <coupon-list-half-v6 storeCouponPop="{{storeCouponPop}}"
                          showPop="{{showCouponMap}}"
                          traceId="{{storeDetailTraceId}}"
                          isFollow="true"
                          storeId="{{storeInfo.storeId || storeId}}" 
                          orgCode='{{storeInfo.orgCode || orgCode}}'
                          storeCouponPopAb="A"
                          bind:pageEvent="widgetEvent"
                          buriedObj="{{recommendObj}}"
                          id="newCouponLayer"
                          options="{{options}}"
                          storeBusinessType="{{storeInfo.storeBusinessType}}"
                          bind:getPopRecommendObj="getPopRecommendObj">
    </coupon-list-half-v6>
  </view>
</block>