<view id="order-container">
<topTips
  wx:if="{{recommendObj}}"
  recommendObj="{{recommendObj}}"
  jumpSource="1"
  bind:showFnTip="showFnTip"
  id="topTips"
  from="{{tabType}}"
  />
<view wx:if="{{orderListTopHintType == 2}}" class="seat"></view>

  <!-- 常买店铺 -->
  <view wx:if="{{offenBuyStoreList.length && isShowOffenStore && type != 2 && recommendObj.pageIdFirstPage && showOther && loginStatus}}" class="store-wrap">
    <offen-buy-store bind:hideOffenStore='hideOffenStore' list="{{offenBuyStoreList}}" buriedObj="{{recommendObj}}"></offen-buy-store>
  </view>
  <view wx:if="{{showEmpty && topMargin}}" style="padding-bottom: {{topMargin ? '16rpx' : 0}}" class="title"  aria-label="我的订单" aria-role='text'>我的订单</view>
  <view wx:if="{{showEmpty}}" class='new-default' style="height:{{topMargin ? 'auto' : '92vh'}}">
    <newDefault 
    type="{{defaultType}}" 
    defaultObj="{{defaultObj}}"
    topMargin= "{{topMargin}}"
    bind:defaultBtnEvent="onDefaultBtnEvent">
  </newDefault>
  </view>

  <view wx:if="{{!showEmpty}}">
    <view wx:if="{{isEmpty}}" style="margin-top:50rpx;color:#999999;text-align:center;height:100rpx;" aria-label=" 您还没有订单哦，赶紧去购物吧" aria-role="text"> 您还没有订单哦，赶紧去购物吧 </view>
    <block wx:elif="{{newList && newList.length>0}}">
    <view class="orderTab" wx:if="{{tabResultList.length}}"  style="padding-top:40rpx">
      <tab-switch tabResultList="{{tabResultList}}" bind:selectTab="selectTab"/>
    </view> 
     <!-- <view wx:if="{{isShowOffenStore}}" class="title"  aria-label="我的订单" aria-role='text'>我的订单</view> -->
      <block wx:for-item="parentItem" wx:for-index="parentIndex" wx:for="{{newList}}" wx:key="parentIndex">
        <!-- 这个view仅作为间隔区分展示用，并不是必须的 -->
        <view 
          class="demo-item" 
          wx:for="{{parentItem}}" 
          wx:key="index" >
          <!-- 使用 -->
          <skeleton show-number="{{2}}">
            <list-item 
              pageId="{{recommendObj.pageIdFirstPage}}"
              currentPageName="{{recommendObj.currentPageName}}"
              prePageName="{{recommendObj.prePageName}}"
              traceId="{{traceId}}"
              recommendObj="{{recommendObj}}"
              bind:clickOrderBtn="clickOrderBtnBuried"
              bind:gotoCode="gotoCode"
              bind:pageBuried="pageBuried"
              bind:clickOrderStateBuried="clickOrderStateBuried"
              bind:clickAfterSaleBarBuried="clickAfterSaleBarBuried"
              bind:clickCallBuried="clickCallBuried"
              bind:showShare="showShare"
              bind:showMiddleModal="showMiddleModal"
              bind:onShowPayPop="onShowPayPop"
              init-data="{{item}}"
              bind:handleShowCheckCodePop="handleShowCheckCodePop">
            </list-item>
          </skeleton>
        </view>
      </block>
      <view class="btn-all" wx:if="{{button}}"  catchtap='toOrderDetail'> {{button}} <view class="icon_arrow"></view> </view>
    </block>

    <button open-type='share' wx:if="{{shareImgShow}}" class='redImg listRedImg'>
      <image src='{{redImgSrc}}'></image>
    </button>
    <!-- 分享到朋友圈弹层 -->
    <share-to-moments-dialog
      showDialog="{{showShare2MomentsDialog}}"
      imgSrc="{{momentsShareImgSrc}}"
      otherData="{{savePicDialogReportData}}"
    ></share-to-moments-dialog>
    <!-- 分享到微信弹层 -->
    <share-to-wx-dialog
      showDialog="{{showShare2WxDialog}}"
      bind:share2Moments="share2Moments"
    ></share-to-wx-dialog>

    <!-- 中间号弹窗 -->
    <middle-number-modal
      bind:closeModal='closeModal'
      wx:if="{{isShowMiddleModal}}"
      order-id="{{orderId}}"
      store-id="{{storeId}}"
      fromPositon="tabbar-orderlist"
      recommendObj="{{recommendObj}}"
      buriedObj="{{recommendObj}}"
    ></middle-number-modal>
  </view>
  <!-- 商品推荐 -->
  <view class = 'mgT40' wx:if="{{authLocation && showFeeds && showOther}}">
    <!-- <image class="icon-feeds" mode="aspectFit" src="https://img10.360buyimg.com/pop/jfs/t1/160613/24/7827/9170/60360c40E9b051a40/ab6b48e106e6ccb6.png" /> -->
    <feeds
      bind:onPageScrollTo="pageScrollTo"
      pageReachBottom="{{pageReachBottom}}"
      resourceRequestFinished="{{resourceRequestFinished}}"
      bind:onExposure="onExposure"
      pageId="{{recommendObj.pageIdFirstPage}}"
      currentPageName="{{recommendObj.currentPageName}}"
      prePageName="{{recommendObj.prePageName}}"
      recommendObj="{{recommendObj}}"
    />
  </view>
  
  <!-- 回到顶部 -->
  <back-top
    hideBackTop='{{hideBackTop}}'
    pageMoving='{{pageMoving}}'
  ></back-top>

</view>

<!-- 【弹层】展示添加我的小程序提示类型:0=不展提示 1=鲜豆奖励提示 2=普通提示 -->
<add-my-mp-pop
  bind:clickRewardBgBuried="clickRewardBgBuried"
  bind:clickRewardBeanBuried01="clickRewardBeanBuried01"
  bind:clickRewardBeanBuried02="clickRewardBeanBuried02"
></add-my-mp-pop>


<!-- 【弹层】展示到店查看券码 -->
<block wx:if="{{showCheckCodePop}}">
  <check-code-pop  locCodeList="{{locCodeList}}" bind:closeCheckCodePop="closeCheckCodePop" bind:reloadCode="reloadCode">
    <canvas slot="qrcode" canvas-id="qrcode"  class="qrcode {{locCodeList.locCodeInfo.qrCodeNum.length >= 40 ? 'codeCenter' : ''}}"/>
    <block wx:if="{{locCodeList.locCodeInfo.qrCodeNum.length < 40}}">
       <canvas slot="barcode" canvas-id="barcode" class="barcode"/>
    </block>
  </check-code-pop>
</block>


<new-pay-pop  
    showNewPayPop="{{showPayPop}}"
    fee="{{fee}}"
    dealId="{{orderId}}"
    bgType="{{locOrdertype}}"
    storeId="{{storeId}}"
    orgCode="{{orgCode}}"
    buriedObj="{{recommendObj}}"
    bind:closeNewPayPop="closeNewPayPop"
    bind:onPayCancel="closeNewPayPop"
    bind:onPaySuccess="onPaySuccess">
  </new-pay-pop>