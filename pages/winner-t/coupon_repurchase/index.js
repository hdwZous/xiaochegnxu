(wx.webpackJsonp=wx.webpackJsonp||[]).push([[16],{"16":function(e,t,o){e.exports=o.p+"pages/winner-t/coupon_repurchase/index.wxml"},"38":function(e,t,o){e.exports={"RepurchaseCoupon":"index-module__RepurchaseCoupon___3V_6n","top":"index-module__top___1thVX","bottom":"index-module__bottom____R0XK","inputSection":"index-module__inputSection___Ff_DF","city":"index-module__city___hYfh4","input":"index-module__input___dAXtc","ruleSection":"index-module__ruleSection___3j1sG","ruleTitle":"index-module__ruleTitle___2q4Gn","ruleItem":"index-module__ruleItem___26p_P","couponSection":"index-module__couponSection___2z67p","title":"index-module__title___lOFW_","errorMsg":"index-module__errorMsg___1KtTj","bottomButton":"index-module__bottomButton___TahyJ"}},"65":function(e,t,o){"use strict";o(16)},"93":function(n,e,t){"use strict";t.r(e);t(65);var e=t(1),i=t.n(e),d=t(0),c=t.n(d),p=t(4),s=t(2),e=t(3),o=t(38),m=t.n(o),f=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function sliceIterator(e,t){var o=[],n=!0,r=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done)&&(o.push(i.value),!t||o.length!==t);n=!0);}catch(e){r=!0,a=e}finally{try{!n&&c.return&&c.return()}finally{if(r)throw a}}return o}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o,n=arguments[t];for(o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},o=function(e,t,o){return t&&defineProperties(e.prototype,t),o&&defineProperties(e,o),e};function defineProperties(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function B(e,t,o){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0!==n){if("value"in n)return n.value;n=n.get;return void 0!==n?n.call(o):void 0}if(null!==(n=Object.getPrototypeOf(e)))return B(n,t,o)}function _asyncToGenerator(e){return function(){var i=e.apply(this,arguments);return new Promise(function(r,a){return function step(e,t){try{var o=i[e](t),n=o.value}catch(e){return void a(e)}if(!o.done)return Promise.resolve(n).then(function(e){step("next",e)},function(e){step("throw",e)});r(n)}("next")})}}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}getApp().globalData.qrcode.business="153",Object(e.d)("business","153");var g=["1.活动期间新人券包仅限新用户领取，且同意用户领取一次，同一手机号，同一终端设备号均视为同一用户；","2.使用地区仅限开通了京东到家的城市；","3.领取成功后，优惠券将放入至您输入的手机号账户中；","4.优惠券不能以任何现金的形式进行兑换；","5.如有问题请联系在线客服。"],e=(function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(RepurchaseCoupon,d["Component"]),o(RepurchaseCoupon,[{"key":"_constructor","value":function _constructor(e){B(RepurchaseCoupon.prototype.__proto__||Object.getPrototypeOf(RepurchaseCoupon.prototype),"_constructor",this).call(this,e),this.$$refs=new c.a.RefsArray}},{"key":"componentDidShow","value":function componentDidShow(){"WEAPP"===c.a.getEnv()&&this.init()}},{"key":"componentDidMount","value":function componentDidMount(){"WEB"===c.a.getEnv()&&this.init()}},{"key":"_createData","value":function _createData(){this.__state=arguments[0]||this.state||{},this.__props=arguments[1]||this.props||{};var n=this.$prefix,e=Object(d.genCompid)(n+"$compid__21"),e=f(e,2),t=e[0],e=e[1],o=Object(d.genCompid)(n+"$compid__22"),o=f(o,2),u=o[0],o=o[1],r=Object(d.genCompid)(n+"$compid__23"),r=f(r,2),p=r[0],r=r[1],a=Object(d.genCompid)(n+"$compid__24"),a=f(a,2),l=a[0],a=a[1],i=this.__state,c=(i.params,i.isLoading,i.loginInfo,i.couponInfo),s=i.step,i=i.addressInfo,_=s?c.map(function(e,t){e={"$original":Object(d.internal_get_original)(e)};var t=Object(d.genCompid)(n+"fzzzzzzzzz"+t,!0),t=f(t,2),o=t[0],t=t[1];return s&&d.propsManager.set({"couponItem":e.$original},t,o),{"$compid__20":t,"$original":e.$original}}):[];return s||d.propsManager.set({"label":i.cityName},e,t),s||d.propsManager.set({"label":"活动规则"},o,u),s&&0<c.length&&d.propsManager.set({"label":"领取成功!"},r,p),!s||0<c.length||d.propsManager.set({"label":"抱歉，领券失败!"},a,l),Object.assign(this.__state,{"loopArray9":_,"$compid__21":e,"$compid__22":o,"$compid__23":r,"$compid__24":a,"styles":m.a,"rules":g}),this.__state}}]),o=e=RepurchaseCoupon,e.$$events=["getCoupon","gotoDj"],e.$$componentPath="pages/winner-t/coupon_repurchase/index",o);function RepurchaseCoupon(){var e,n,r=this;!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,RepurchaseCoupon);for(var t=arguments.length,o=Array(t),a=0;a<t;a++)o[a]=arguments[a];return(e=n=_possibleConstructorReturn(this,(e=RepurchaseCoupon.__proto__||Object.getPrototypeOf(RepurchaseCoupon)).call.apply(e,[this].concat(o)))).$usedState=["loopArray9","$compid__21","$compid__22","$compid__23","$compid__24","styles","step","loginInfo","params","rules","couponInfo","addressInfo","isLoading","errorMsg"],n.config={"navigationBarTitleText":"京东到家","component":!0},n.options={"addGlobalClass":!0},n.state={"params":{"mobile":""},"addressInfo":{},"isLoading":!0,"couponInfo":[],"errorMsg":"网络异常，请联系工作人员！","loginInfo":{},"step":0},n.getPos=_asyncToGenerator(i.a.mark(function _callee(){var t,o;return i.a.wrap(function _callee$(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.getLocation().catch(function(e){return{}});case 2:if(o=e.sent,t=o.latitude,o=o.longitude,t&&o)return e.next=8,Object(p.b)({"latitude":t,"longitude":o});e.next=15;break;case 8:if(t=e.sent,console.log(t),"ok"===t.status)return o=t.content,Object(s.a)({"create_time":new Date,"click_id":"repurchase_location_succeed","click_par":u({},o)}),n.setAddress(o),e.abrupt("return",o);e.next=15;break;case 15:Object(s.a)({"create_time":new Date,"click_id":"repurchase_location_fail","click_par":u({},adRes.content)});case 16:case"end":return e.stop()}},_callee,r)})),n.setAddress=function(e){var t=e.poi||e.title||e.address||e.district||e.addressName||"",t={"longitude":e.longitude||"","latitude":e.latitude||"","cityId":e.cityId||e.areaCode||e.cityCode||"","cityName":e.city||"","countyName":e.district,"districtCode":e.districtCode||"","poi":t,"adcode":e.adcode};c.a.setStorageSync("address_info",t),n.setState({"addressInfo":t})},n.init=_asyncToGenerator(i.a.mark(function _callee2(){var t,o;return i.a.wrap(function _callee2$(e){for(;;)switch(e.prev=e.next){case 0:if(n.setState({"isLoading":!1}),Object(s.b)({"page_par":{}}),t=c.a.getStorageSync("address_info"),o=c.a.getStorageSync("login_info"),n.setState({"loginInfo":o,"addressInfo":t}),t||n.getPos(),o&&o.PDJ_H5_PIN){e.next=10;break}return Object(s.a)({"create_time":new Date,"click_id":"repurchaseCouponToLogin"}),c.a.navigateTo({"url":"/pages/newLogin/login/login?type=46&business=153"}),e.abrupt("return");case 10:case"end":return e.stop()}},_callee2,r)})),n.getCoupon=_asyncToGenerator(i.a.mark(function _callee3(){var t,o;return i.a.wrap(function _callee3$(e){for(;;)switch(e.prev=e.next){case 0:return o=n.state,t=o.params,o=o.loginInfo,console.log("params",{"djPin":o.PDJ_H5_PIN,"openId":o.openId}),e.next=4,Object(p.m)({"djPin":o.PDJ_H5_PIN,"openId":o.openId});case 4:o=e.sent,console.log("res",o),"ok"===o.status?(n.setState({"couponInfo":o.content}),n.setState({"step":1}),Object(s.a)({"create_time":new Date,"click_id":"repurchaseCouponGetCouponsSucceed","click_par":u({},t,{"coupons":o.content})})):(Object(s.a)({"create_time":new Date,"click_id":"repurchaseCouponGetCouponsFail","click_par":u({},t,{"errorMsg":o})}),n.setState({"errorMsg":o.errorMsg}));case 7:case"end":return e.stop()}},_callee3,r)})),n.gotoDj=_asyncToGenerator(i.a.mark(function _callee4(){return i.a.wrap(function _callee4$(e){for(;;)switch(e.prev=e.next){case 0:Object(s.a)({"create_time":new Date,"click_id":"repurchaseCouponToOrder","click_par":u({},n.state.params)}),c.a.switchTab({"url":"/pages/home/home"});case 2:case"end":return e.stop()}},_callee4,r)})),n.customComponents=["RuleTitle","RePurCoupon"],_possibleConstructorReturn(n,e)}Component(t(0).default.createComponent(e,!0))}},[[93,0,1,2,3]]]);