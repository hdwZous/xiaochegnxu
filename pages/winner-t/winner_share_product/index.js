(wx.webpackJsonp=wx.webpackJsonp||[]).push([[24],{"17":function(e,t,r){e.exports=r.p+"pages/winner-t/winner_share_product/index.wxml"},"39":function(e,t,r){e.exports={"winnerShareProduct":"index-module__winnerShareProduct___1bSKr","header":"index-module__header___2CvbF","mainHeader":"index-module__mainHeader___1DtiJ","storeName":"index-module__storeName___3q711","storeIcon":"index-module__storeIcon___dHHWQ","searchBox":"index-module__searchBox___83WlM","searchIcon":"index-module__searchIcon___sUqd2","searchInput":"index-module__searchInput___3QS_u","flab":"index-module__flab___37vtl"}},"66":function(e,t,r){"use strict";r(17)},"88":function(r,e,t){"use strict";t.r(e);t(66);var e=t(1),u=t.n(e),I=t(0),p=t.n(I),e=t(39),v=t.n(e),l=t(4),d=t(2);var _=t(3),w=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function sliceIterator(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var s,i=e[Symbol.iterator]();!(n=(s=i.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{!n&&i.return&&i.return()}finally{if(o)throw a}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},e=function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e};function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function B(e,t,r){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0!==n){if("value"in n)return n.value;n=n.get;return void 0!==n?n.call(r):void 0}if(null!==(n=Object.getPrototypeOf(e)))return B(n,t,r)}var n;function _asyncToGenerator(e){return function(){var s=e.apply(this,arguments);return new Promise(function(o,a){return function step(e,t){try{var r=s[e](t),n=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(n).then(function(e){step("next",e)},function(e){step("throw",e)});o(n)}("next")})}}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}getApp().globalData.qrcode.business="153",Object(_.d)("business","153");(function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)})(WinnerShareProduct,I["Component"]),e(WinnerShareProduct,[{"key":"_constructor","value":function _constructor(e){B(WinnerShareProduct.prototype.__proto__||Object.getPrototypeOf(WinnerShareProduct.prototype),"_constructor",this).call(this,e),this.$$refs=new p.a.RefsArray}},{"key":"onShareAppMessage","value":function onShareAppMessage(e){e.from;var t=e.target,e=this.state.params,r=e.inviterId,n=e.storeId,o=e.taskId,a=e.orgCode,e=(e.skuId,e.locationId),s=this.state.picInfo.single,i=this.state.productList.find(function(e){return+e.skuId==+t.id});return Object(d.a)({"create_time":new Date,"click_id":"winnerShareProductShareMessage","click_par":{"params":this.state.params,"picInfo":this.state.picInfo,"sku":i}}),{"title":i.skuName,"path":s+"?inviterId="+r+"&shopId="+n+"&skuId="+i.skuId+"&orgCode="+a+"&taskId="+o+"&locationId="+(e||""),"imageUrl":i.skuImageUrl||i.imgUrl}}},{"key":"componentDidShow","value":function componentDidShow(){"WEAPP"===p.a.getEnv()&&this.init()}},{"key":"componentDidMount","value":function componentDidMount(){"WEB"===p.a.getEnv()&&this.init()}},{"key":"setScroll","value":function setScroll(){var e=this;this.setState({"scrollInto":"product_first"}),setTimeout(function(){e.setState({"scrollInto":"pages/winner-t/winner_share_product_search/index"})})}},{"key":"toSearch","value":function toSearch(){p.a.navigateTo({"url":"/pages/winner-t/winner_share_product_search/index"+function getQueryString(r){return Object.keys(r).reduce(function(e,t){return 0<e.length?e+="&":e+="?",e+(t+"="+(r[t]||""))},"")}(this.state.params)})}},{"key":"_createData","value":function _createData(){function qb(){return t.setState({"downloadVisible":!1})}function rb(e){return t.setCurrent(e)}function sb(){return t.getCommissionSkuList()}function tb(e){return t.setState({"downloadVisible":!0,"imgUrl":e})}var t=this,e=(this.__state=arguments[0]||this.state||{},this.__props=arguments[1]||this.props||{},this.$prefix),r=Object(I.genCompid)(e+"$compid__25"),r=w(r,2),p=r[0],r=r[1],n=Object(I.genCompid)(e+"$compid__26"),n=w(n,2),l=n[0],n=n[1],o=Object(I.genCompid)(e+"$compid__27"),o=w(o,2),d=o[0],o=o[1],a=Object(I.genCompid)(e+"$compid__28"),a=w(a,2),_=a[0],a=a[1],e=Object(I.genCompid)(e+"$compid__29"),e=w(e,2),f=e[0],e=e[1],s=this.__state,i=s.params,c=s.isShow,m=(s.searchText,s.scrollInto),h=s.loading,u=s.categories,g=s.current,y=s.productList,b=s.picInfo,S=s.downloadVisible,s=s.imgUrl;this.anonymousFunc0=function(){return t.toSearch()};return this.anonymousFunc1=function(){return t.setScroll()},I.propsManager.set({"visible":S,"imgUrl":s,"params":i,"close":qb},r,p),i.taskId&&i.storeId&&!h&&u.length<1&&I.propsManager.set({"isShow":c,"errorCode":1},n,l),!i.taskId||!i.storeId||!h&&u.length<1||I.propsManager.set({"productList":y,"picInfo":b,"params":i,"categories":u,"current":g,"scrollInto":m,"setCurrent":rb,"getCommissionSkuList":sb,"showDownLoad":tb},o,d),i.taskId&&!i.storeId&&I.propsManager.set({"isShow":c,"errorCode":3},a,_),i.taskId||I.propsManager.set({"isShow":c,"errorCode":2},e,f),Object.assign(this.__state,{"anonymousState__temp":qb,"anonymousState__temp2":rb,"anonymousState__temp3":sb,"anonymousState__temp4":tb,"$compid__25":r,"$compid__26":n,"$compid__27":o,"$compid__28":a,"$compid__29":e,"styles":v.a}),this.__state}},{"key":"anonymousFunc0","value":function anonymousFunc0(e){}},{"key":"anonymousFunc1","value":function anonymousFunc1(e){}}]),n=e=WinnerShareProduct,e.$$events=["anonymousFunc0","anonymousFunc1"],e.$$componentPath="pages/winner-t/winner_share_product/index";e=n;function WinnerShareProduct(){var e,a,s=this;!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,WinnerShareProduct);for(var t,r,n,o=arguments.length,i=Array(o),c=0;c<o;c++)i[c]=arguments[c];return(e=a=_possibleConstructorReturn(this,(e=WinnerShareProduct.__proto__||Object.getPrototypeOf(WinnerShareProduct)).call.apply(e,[this].concat(i)))).$usedState=["anonymousState__temp","anonymousState__temp2","anonymousState__temp3","anonymousState__temp4","$compid__25","$compid__26","$compid__27","$compid__28","$compid__29","styles","params","loading","categories","isShow","productList","picInfo","downloadVisible","imgUrl","scrollToTop","current","scrollInto"],a.config={"navigationBarTitleText":"京东到家","navigationBarBackgroundColor":"#FE6F41","backgroundColorTop":"#FE6F41","component":!0},a.options={"addGlobalClass":!0},a.state={"params":{},"isShow":!1,"loading":!0,"productList":[],"picInfo":{},"downloadVisible":!1,"imgUrl":"","scrollToTop":0,"categories":[],"current":0,"scrollInto":""},a.init=_asyncToGenerator(u.a.mark(function _callee(){var t,r,n,o;return u.a.wrap(function _callee$(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.$router.params,1===Number(t.platformType)&&p.a.setNavigationBarTitle({"title":"京东小时购"}),t.taskId)return e.next=5,a.getLocationId(t);e.next=7;break;case 5:r=e.sent,t=f({"platformType":0},t,{"locationId":r});case 7:if(a.setState({"params":t,"isLoading":!1,"isShow":!0}),Object(_.d)("inviterId",t.inviterId),Object(d.b)({"page_par":t}),t.taskId&&t.storeId){e.next=12;break}return e.abrupt("return");case 12:if(0===a.state.current)return a.getHotShareSystemSetting(),e.next=16,a.getCategories({"storeId":t.storeId,"orgCode":t.orgCode,"platformType":t.platformType});e.next=21;break;case 16:r=e.sent,a.setState({"loading":!1}),r&&r.status&&"ok"===r.status&&(n=r.content[0]||{"subCategoryInfoList":[]},r.content.map(function(e,t){e.categoryName&&"高佣榜"==e.categoryName&&(n=e,a.setState({"current":t}))}),o={"shopId":t.storeId,"orgCode":t.orgCode,"firstCategoryId":n.categoryId,"secondCategoryIds":n.subCategoryInfoList.map(function(e){return e.categoryId}),"platformType":Number(t.platformType)},a.getCommissionSkuList(o)),e.next=22;break;case 21:a.setState({"loading":!1});case 22:case"end":return e.stop()}},_callee,s)})),a.getCategories=(n=_asyncToGenerator(u.a.mark(function _callee2(t){var r;return u.a.wrap(function _callee2$(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(l.e)(t);case 2:if((r=e.sent)&&r.status&&"ok"===r.status)return a.setState({"categories":r.content,"current":0}),e.abrupt("return",r);e.next=8;break;case 8:return e.abrupt("return",{});case 9:case"end":return e.stop()}},_callee2,s)})),function(e){return n.apply(this,arguments)}),a.setCurrent=function(e){a.setState({"current":e})},a.getLocationId=(r=_asyncToGenerator(u.a.mark(function _callee3(t){var r;return u.a.wrap(function _callee3$(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(l.d)({"taskId":t.taskId});case 2:if("ok"===(r=e.sent).status&&r.content)return e.abrupt("return",r.content);e.next=5;break;case 5:case"end":return e.stop()}},_callee3,s)})),function(e){return r.apply(this,arguments)}),a.getCommissionSkuList=(t=_asyncToGenerator(u.a.mark(function _callee4(t){var r,n;return u.a.wrap(function _callee4$(e){for(;;)switch(e.prev=e.next){case 0:return(r=t)||(n=a.state.categories[a.state.current]||{"subCategoryInfoList":[]},r={"shopId":a.state.params.storeId,"orgCode":a.state.params.orgCode,"firstCategoryId":n.categoryId,"secondCategoryIds":n.subCategoryInfoList.map(function(e){return e.categoryId}),"platformType":a.state.params.platformType}),p.a.showLoading({"title":"查询中..."}),e.next=5,Object(l.f)(r);case 5:"ok"===(n=e.sent).status?(n.content.forEach(function(e,t){e.from="category",e.index=t}),Object(d.a)({"create_time":new Date,"click_id":"winnerShareProductShowSku","click_par":{"options":r,"res":n}}),a.setState({"productList":n.content})):Object(d.a)({"create_time":new Date,"click_id":"winnerShareProductShowSkuError","click_par":{"options":r,"res":n}}),p.a.hideLoading();case 8:case"end":return e.stop()}},_callee4,s)})),function(e){return t.apply(this,arguments)}),a.getHotShareSystemSetting=_asyncToGenerator(u.a.mark(function _callee5(){var t;return u.a.wrap(function _callee5$(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(l.i)();case 2:"ok"===(t=e.sent).status&&a.setState({"picInfo":t.content});case 4:case"end":return e.stop()}},_callee5,s)})),a.customComponents=["PictureDownload","NotFund","Main"],_possibleConstructorReturn(a,e)}Component(t(0).default.createComponent(e,!0))}},[[88,0,1,2,3]]]);