require("../runtime"),require("../vendors"),(wx["webpackJsonp/pages/vpaymember_t/"]=wx["webpackJsonp/pages/vpaymember_t/"]||[]).push([[13],{158:function(e,t,n){"use strict";var o=n(6),a=n(7),i=n(8),c=n(9),s=n(1),r=n(57),p=n(93),l=n.n(p),d=n(14),u=n(26),h=n(5),g=n(0),_=function(e){Object(i.a)(VipPopCard,e);var t=Object(c.a)(VipPopCard);function VipPopCard(e){var n;return Object(o.a)(this,VipPopCard),(n=t.call(this,e)).state={defineSelf:!0},n}return Object(a.a)(VipPopCard,[{key:"render",value:function render(){var e=this.props,t=e.isShowPop,n=e.showToHomeBtn,o=this.state.defineSelf;return Object(g.jsx)(r.a,{isShow:t,defineSelf:o,onPopEvent:this.onClosePopUp.bind(this),children:Object(g.jsxs)(s.j,{className:[l.a.popWrap,n?l.a.popWrapHasBtn:l.a.popWrapNotBtn].join(" "),children:[Object(g.jsx)(s.c,{className:l.a.popTop,src:"https://storage.360buyimg.com/wximg/differentIndustry/popTitle.png"}),Object(g.jsx)(s.c,{className:l.a.popCard,src:"https://storage.360buyimg.com/wximg/differentIndustry/popCard.png"}),n?Object(g.jsx)(s.j,{className:l.a.popBtn,onClick:this.goHome.bind(this),children:"去京东到家逛逛"}):null]})})}},{key:"goHome",value:function goHome(){var e=this.props.channel;Object(d.a)({create_time:new Date,click_id:"clickgojddaojia",click_par:{channel:e,statusId:2}}),Object(u.a)({to:"home"})}},{key:"onClosePopUp",value:function onClosePopUp(){this.props.onClosePopUp()}}]),VipPopCard}(h.Component);t.a=_},20:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return r}));var o=n(4),a=n(3),i=n.n(a),c=function navigateTo(e){var t=e.url;return(t.indexOf("testpdjm.jd.com")>-1||t.indexOf("prepdjm.jd.com")>-1||t.indexOf("daojia.jd.com")>-1||t.indexOf("prepdj-three.jddj.com")>-1)&&(t="/pages/"+t.split("/pages/")[1]),i.a.navigateTo({url:t})},s=function postMsgUpdateV(){o.c&&_isCompatible(String(o.a),String("8.6.0"))>=0&&(o.d?o.h&&e.webkit.messageHandlers.MobileNavi.postMessage({method:"updateVPlusPage",callBackName:null,callBackId:null}):o.b&&e.djJava.closeWebview&&e.djJava.updateVPlusPage())},r=function closeWebView(){o.c&&_isCompatible(String(o.a),String("8.6.0"))>=0&&(o.d?o.h&&e.webkit.messageHandlers.MobileNavi.postMessage({method:"closeWebview",callBackName:null,callBackId:null}):o.b&&e.djJava.closeWebview&&e.djJava.closeWebview())};function _isCompatible(e,t){e=e.split("."),t=t.split(".");for(var n=Math.max(e.length,t.length);e.length<n;)e.push("0");for(;t.length<n;)t.push("0");for(var o=0;o<n;o++){var a=parseInt(e[o]),i=parseInt(t[o]);if(a>i)return 1;if(a<i)return-1}return 0}}).call(this,n(11).window)},205:function(e,t,n){"use strict";n.r(t);n(68);var o=n(13),a=n(11),i=n(42),c=n(5);a.container.get(a.SERVICE_IDENTIFIER.Hooks).initNativeApiImpls=[o.c.initNativeApi];var s={pages:["pages/index/index"],subPackages:[{root:"pages/vipChannel-t/",pages:["index"],independent:!0},{root:"pages/merchant-t/",pages:["agreement/index"],independent:!0},{root:"pages/vpaymember_t/",pages:["home/index","memberGoods/index","packageSelection/index","rightsInstruction/index","memberDay/index","couponTab/index","couponTabNew/index","exchangePage/index","instructions/index","envelopesRecord/index","bountyList/index","discountList/index","manageRenew/index","payResult/index","toVPlusCenterPage/index"],independent:!0},{root:"pages/test-t/",pages:["hy/index"]}],permission:{"scope.userLocation":{desc:"你的位置信息将用获取最近的门店信息"}},plugins:{loginPlugin:{version:"1.5.1",provider:"wxefe655223916819e"},"live-player-plugin":{version:"1.3.5",provider:"wx2b03c6e691cd7370"}},window:{backgroundTextStyle:"light",navigationBarBackgroundColor:"#fff",navigationBarTitleText:"WeChat",navigationBarTextStyle:"black"}};a.window.__taroAppConfig=s;class App extends c.Component{render(){return this.props.children}}Object(i.a)(App,c,c.default,s);var r=n(206).default;Page(Object(a.createPageConfig)(r,"pages/vpaymember_t/exchangePage/index",{},{navigationBarTitleText:"兑换码开通会员"}||{}))},206:function(e,t,n){"use strict";n.r(t),function(e){var o=n(30),a=n(6),i=n(7),c=n(15),s=n(8),r=n(9),p=n(10),l=(n(113),n(1)),d=n(33),u=n(78),h=n.n(u),g=n(26),_=n(20),m=n(14),b=n(158),j=n(2),v=n(4),x=n(5),f=n(3),O=n(0),C={throttleFlag:!0},P=function(e){Object(s.a)(exchangePage,e);var t=Object(r.a)(exchangePage);function exchangePage(e){var n;return Object(a.a)(this,exchangePage),n=t.call(this,e),Object(p.a)(Object(c.a)(n),"clickIntro",(function(e){Object(_.b)({url:"/pages/vpaymember_t/instructions/index?page=".concat(e)})})),n.state={code:"",isShowPop:!1},n}return Object(i.a)(exchangePage,[{key:"getCurrentTypeData",value:function getCurrentTypeData(e){throw new Error("Method not implemented.")}},{key:"render",value:function render(){var e=this.state,t=e.code,n=e.isShowPop;return Object(O.jsxs)(l.j,{className:[h.a.grayBg].join(" "),children:[Object(O.jsx)(l.c,{mode:"widthFix",className:h.a.banner,src:"https://storage.360buyimg.com/wximg/differentIndustry/cooperationVB.png"}),Object(O.jsxs)(l.j,{className:h.a.infoBox,children:[Object(O.jsx)(l.j,{className:h.a.title,children:"兑换码领取会员"}),Object(O.jsx)(l.j,{className:h.a.codeInputBox,children:Object(O.jsx)(l.d,{onInput:this.inputFn.bind(this),maxlength:8,onBlur:this.blurFn.bind(this),placeholder:"请输入兑换码","placeholder-style":"color:#423B37;",value:t,className:h.a.codeInput})}),Object(O.jsx)(l.j,{onClick:this.getCouponFn.bind(this),className:h.a.btn,children:"确认兑换"})]}),Object(O.jsx)(b.a,{isShowPop:n,onClosePopUp:this.onClosePopUp.bind(this),showToHomeBtn:!1}),Object(O.jsxs)(l.j,{className:h.a.bottomPanel,children:[Object(O.jsx)(l.j,{className:h.a.notice1,onClick:this.clickIntro.bind(this,"agrement"),children:"会员协议"}),Object(O.jsx)(l.j,{className:h.a.line}),Object(O.jsx)(l.j,{className:h.a.notice,onClick:this.clickIntro.bind(this,"question"),children:"常见问题与说明"})]})]})}},{key:"componentDidShow",value:function componentDidShow(){var e,t=((null===(e=Object(f.getCurrentInstance)().router)||void 0===e?void 0:e.params)||{}).vipFlag;Object(m.b)({page_name:"vip_codepage",create_time:new Date,page_par:{url:"/pages/vpaymember_t/exchangePage/index",vipstatus:t}})}},{key:"inputFn",value:function inputFn(e){var t=e.detail.value.replace(/[^\w]/g,"").substr(0,8).toUpperCase();this.setState({code:t})}},{key:"blurFn",value:function blurFn(e){!this.state.code&&e.value&&this.setState({code:e.value})}},{key:"goHome",value:function goHome(){Object(g.a)({to:"home"})}},{key:"getCouponFn",value:function getCouponFn(){var e=this,t=this.state.code;this._throttle((function(){e.getCoupon(t)}))}},{key:"freeTakeVipByRedeemCode",value:function freeTakeVipByRedeemCode(e){return Object(j.a)({functionId:"vip/third/party/freeTakeVipByRedeemCode",body:JSON.stringify(e),method:"POST",isNeedDealError:!0})}},{key:"getCoupon",value:function getCoupon(e){var t,n=this,o=(null===(t=Object(f.getCurrentInstance)().router)||void 0===t?void 0:t.params)||{};e.length<8?Object(f.showToast)({icon:"none",title:"请输入8位有效兑换码"}):(Object(f.showLoading)(),Object(d.b)().then((function(){n.freeTakeVipByRedeemCode({redeemCode:e}).then((function(e){if(Object(f.hideLoading)(),n.pvReFn("click_codebutton",e.msg),0==e.code){n.setState({isShowPop:!0},(function(){n.pvReFn("click_codepop")})),v.c&&(Object(_.c)(),"appTab"==o.fromPage&&Object(_.a)())}else 201==e.code||202==e.code?(Object(f.showToast)({icon:"none",title:"请先登录"}),n._goToLogin()):Object(f.showToast)({icon:"none",title:e.msg})})).catch((function(e){Object(f.showToast)({icon:"none",title:e.msg||"网络异常"})}))})).catch((function(){Object(f.hideLoading)(),n.pvReFn("click_codebutton","未登录"),Object(f.showToast)({icon:"none",title:"请先登录"}),n._goToLogin()})))}},{key:"pvReFn",value:function pvReFn(e,t){var n,a={vipstatus:((null===(n=Object(f.getCurrentInstance)().router)||void 0===n?void 0:n.params)||{}).vipFlag};t&&(a=Object(o.a)(Object(o.a)({},a),{},{info:t})),Object(m.a)({page_name:"vip_codepage",create_time:new Date,click_id:e,click_par:a})}},{key:"_throttle",value:function _throttle(e,t){C.throttleFlag&&(C.throttleFlag=!1,e.apply(this,arguments),setTimeout((function(){C.throttleFlag=!0}),t||1e3))}},{key:"onClosePopUp",value:function onClosePopUp(){var e,t=(null===(e=Object(f.getCurrentInstance)().router)||void 0===e?void 0:e.params)||{};this.setState({isShowPop:!1}),Object(_.b)({url:"/pages/vpaymember_t/home/index",type:"appTab"==t.fromPage?"openNewWeb":""})}},{key:"_goToLogin",value:function _goToLogin(){var e,t,n=((null===(e=Object(f.getCurrentInstance)())||void 0===e||null===(t=e.router)||void 0===t?void 0:t.params)||{}).channel,o=void 0===n?"":n;Object(d.a)({localTargetUrl:"/pages/vpaymember_t/exchangePage/index?channel=".concat(o)})}}]),exchangePage}(x.Component);t.default=P}.call(this,n(11).window)},36:function(e,t,n){e.exports={wrap:"index-module__wrap___3b_yE",hide:"index-module__hide___1uJrW",case:"index-module__case___3i4KY",content:"index-module__content___1259D",close:"index-module__close___Dbzja"}},57:function(e,t,n){"use strict";var o=n(6),a=n(7),i=n(8),c=n(9),s=n(1),r=n(5),p=n(36),l=n.n(p),d=n(0),u=function(e){Object(i.a)(Pop,e);var t=Object(c.a)(Pop);function Pop(){return Object(o.a)(this,Pop),t.apply(this,arguments)}return Object(a.a)(Pop,[{key:"render",value:function render(){var e=null,t=this.props.defineSelf;return this.props.isNeedCloseIcon||(e=Object(d.jsx)(s.j,{className:l.a.close,onClick:this.onClosePop.bind(this)})),Object(d.jsx)(s.j,{className:"".concat(l.a.wrap," ").concat(this.props.isShow?"":l.a.hide," "),onClick:this.onClosePop.bind(this),children:Object(d.jsxs)(s.j,{className:l.a.case,onClick:this.onClickPop.bind(this),children:[t?Object(d.jsx)(s.j,{children:this.props.children}):Object(d.jsx)(s.j,{className:l.a.content,style:{background:this.props.bgColor?this.props.bgColor:"#fff"},children:this.props.children}),e]})})}},{key:"onClosePop",value:function onClosePop(e){console.log("===onClosePop===",e),e.stopPropagation(),this.props.onPopEvent({type:"close"})}},{key:"onClickPop",value:function onClickPop(e){e.stopPropagation(),this.props.onPopEvent({type:"content",params:{}})}}]),Pop}(r.Component);t.a=u},78:function(e,t,n){e.exports={banner:"index-module__banner___1mYcU",btn:"index-module__btn___2_jm8",title:"index-module__title___REiEP",infoBox:"index-module__infoBox___1-Dzb",num:"index-module__num___3nYpt",codeInputBox:"index-module__codeInputBox___2TLRC",codeInput:"index-module__codeInput___1IbTP",bottomPanel:"index-module__bottomPanel___2qyz7",line:"index-module__line___1em3L",notice1:"index-module__notice1___3DMZS",notice:"index-module__notice___YGCiQ"}},93:function(e,t,n){e.exports={popWrap:"index-module__popWrap___3OHFX",popWrapHasBtn:"index-module__popWrapHasBtn___OPEWy",popWrapNotBtn:"index-module__popWrapNotBtn___RmMTT",popTop:"index-module__popTop___1jmCJ",popCard:"index-module__popCard___2anpw",popBtn:"index-module__popBtn___aF5Ml"}}},[[205,0,17]]]);