require("../runtime"),require("../vendors"),(wx["webpackJsonp/pages/vpaymember_t/"]=wx["webpackJsonp/pages/vpaymember_t/"]||[]).push([[9],{136:function(e,n,o){e.exports={container:"index-module__container___2eQeZ",loading:"index-module__loading___39Mdf"}},146:function(e,n,o){e.exports={banner:"index-module__banner___Au-sV"}},147:function(e,n,o){e.exports={container:"index-module__container___kUuKe"}},197:function(e,n,o){"use strict";o.r(n);o(68);var a=o(13),t=o(11),i=o(42),s=o(5);t.container.get(t.SERVICE_IDENTIFIER.Hooks).initNativeApiImpls=[a.c.initNativeApi];var c={pages:["pages/index/index"],subPackages:[{root:"pages/vipChannel-t/",pages:["index"],independent:!0},{root:"pages/merchant-t/",pages:["agreement/index"],independent:!0},{root:"pages/vpaymember_t/",pages:["home/index","memberGoods/index","packageSelection/index","rightsInstruction/index","memberDay/index","couponTab/index","couponTabNew/index","exchangePage/index","instructions/index","envelopesRecord/index","bountyList/index","discountList/index","manageRenew/index","payResult/index","toVPlusCenterPage/index"],independent:!0},{root:"pages/test-t/",pages:["hy/index"]}],permission:{"scope.userLocation":{desc:"你的位置信息将用获取最近的门店信息"}},plugins:{loginPlugin:{version:"1.5.1",provider:"wxefe655223916819e"},"live-player-plugin":{version:"1.3.5",provider:"wx2b03c6e691cd7370"}},window:{backgroundTextStyle:"light",navigationBarBackgroundColor:"#fff",navigationBarTitleText:"WeChat",navigationBarTextStyle:"black"}};t.window.__taroAppConfig=c;class App extends s.Component{render(){return this.props.children}}Object(i.a)(App,s,s.default,c);var r=o(220).default;Page(Object(t.createPageConfig)(r,"pages/vpaymember_t/memberGoods/index",{},{navigationBarBackgroundColor:"#ffffff",navigationBarTextStyle:"black",navigationBarTitleText:"会员价商品"}||{}))},220:function(e,n,o){"use strict";o.r(n);var a=o(22),t=o(62),i=o(39),s=o(6),c=o(7),r=o(15),d=o(8),g=o(9),l=o(10),u=o(5),p=o(1),m=o(146),_=o.n(m),x=o(136),j=o.n(x),b=o(0),f=function Feeds(e){var n=e.feedsFun,o=e.loading;return Object(b.jsxs)(p.j,{className:j.a.container,children:[n(),o&&Object(b.jsx)(p.c,{className:j.a.loading,src:"https://storage.360buyimg.com/wximg/member/loading.gif"})]})},v=o(75),h=o.n(v),O=o(26),I=o(3),P=o(33),k=function Goods(e){var n=e.goodsInfo,o=e.vipFlag,a=void 0===o?0:o,t=function toShop(e){Object(P.b)().then((function(){if(1==a){var o=1==e,t={to:"store",params:{storeId:n.storeId,orgCode:o?"":n.orgCode,skuId:n.skuId||"",needAnchorSku:!0,addCart:o,needAddCar:o,needAddCart:o?1:0,isAddCart:o}};Object(O.a)(t)}else Object(I.showToast)({title:"开通会员可购买",icon:"none",duration:1500,mask:!1})})).catch((function(){Object(P.a)()}))};return Object(b.jsxs)(p.j,{className:h.a.goods,onClick:function onClick(){return t(0)},children:[Object(b.jsxs)(p.j,{className:h.a.goodsImageBox,children:[Object(b.jsx)(p.j,{className:h.a.goodsImage,style:{backgroundImage:"url(".concat(n.skuImg,")")}}),Object(b.jsx)(p.j,{className:h.a.goodsImageWrap})]}),Object(b.jsx)(p.j,{className:h.a.goodsName,children:n.skuName}),Object(b.jsxs)(p.j,{className:h.a.goodsPrice,children:[Object(b.jsxs)(p.j,{className:h.a.todayPrice,children:["¥",n.majorPrice]}),n.vipPriceImg&&Object(b.jsx)(p.c,{className:h.a.VMTag,src:n.vipPriceImg})]}),Object(b.jsxs)(p.j,{className:h.a.origPrice,children:[Object(b.jsxs)(p.j,{className:h.a.price,children:["¥",n.minorPrice]}),Object(b.jsx)(p.j,{className:h.a.plusIcon,onClick:function onClick(){return t(1)},children:Object(b.jsx)(p.c,{className:h.a.icon,src:"https://storage.360buyimg.com/wximg/member/plusIcon.png"})})]})]})},y=o(147),N=o.n(y),F=function GoodsFeeds(e){var n=e.goods,o=e.loading,a=e.vipFlag;return Object(b.jsx)(p.j,{children:Object(b.jsx)(f,{feedsFun:function feedsFun(){return Object(b.jsx)(p.j,{className:N.a.container,children:n.map((function(e,n){return Object(b.jsx)(k,{goodsInfo:e,vipFlag:a},n)}))})},loading:o})})},w=function MemberGoods(e){var n=e.goods,o=e.loading,a=e.vipFlag;return Object(b.jsxs)(p.j,{children:[function banner(){return Object(b.jsx)(p.j,{className:_.a.banner})}(),function memberFeeds(){return Object(b.jsx)(F,{goods:n,loading:o,vipFlag:a})}()]})},C=o(2),S=function get_vipPrice(e){return Object(C.a)({functionId:"vip/sku/vipPrice",method:"POST",body:JSON.stringify(e)})},V=o(14),T=function(e){Object(d.a)(Index,e);var n=Object(g.a)(Index);function Index(e){var o;return Object(s.a)(this,Index),o=n.call(this,e),Object(l.a)(Object(r.a)(o),"getVipPrice",(function(){var e=o.state,n=e.page,s=e.goods,c={page:n,size:10};o.setState({page:n+1},Object(i.a)(Object(a.a)().mark((function _callee(){var e,n,i,r;return Object(a.a)().wrap((function _callee$(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,S(c);case 2:e=a.sent,n=e.code,i=e.result,0==n&&i&&i.skuVipPriceVos&&i.skuVipPriceVos.length?((r=JSON.parse(JSON.stringify(s))).push.apply(r,Object(t.a)(i.skuVipPriceVos)),o.setState({goods:r,loading:!1,total:i.total,vipFlag:i.vipFlag})):o.setState({empty:!0,loading:!1});case 6:case"end":return a.stop()}}),_callee)}))))})),o.state={page:1,goods:[],total:0,empty:!1,loading:!1,vipFlag:0},o}return Object(c.a)(Index,[{key:"componentDidMount",value:function componentDidMount(){Object(V.b)({page_name:"memberGoods",create_time:new Date})}},{key:"componentDidShow",value:function componentDidShow(){this.getVipPrice()}},{key:"onReachBottom",value:function onReachBottom(){var e=this,n=this.state,o=n.loading;n.empty?this.setState({loading:!1}):o||(console.log("onReachBottom"),this.setState({loading:!0},(function(){e.getVipPrice()})))}},{key:"render",value:function render(){var e=this.state,n=e.goods,o=e.loading,a=e.vipFlag,t=void 0===a?0:a;return Object(b.jsx)(w,{goods:n,loading:o,vipFlag:t})}}]),Index}(u.Component);n.default=T},75:function(e,n,o){e.exports={goods:"index-module__goods___Q1KVP",goodsImageBox:"index-module__goodsImageBox___2EGaL",goodsImage:"index-module__goodsImage___2NDFP",goodsImageWrap:"index-module__goodsImageWrap___1zGiZ",goodsName:"index-module__goodsName___1o5DP",goodsPrice:"index-module__goodsPrice___1eRF4",todayPrice:"index-module__todayPrice___32hJd",VMTag:"index-module__VMTag___3DgGy",origPrice:"index-module__origPrice___neXqZ",price:"index-module__price___3mXy6",plusIcon:"index-module__plusIcon___VeF6g",icon:"index-module__icon___xDRRF"}}},[[197,0,17]]]);