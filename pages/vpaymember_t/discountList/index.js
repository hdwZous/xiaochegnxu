require("../runtime"),require("../vendors"),(wx["webpackJsonp/pages/vpaymember_t/"]=wx["webpackJsonp/pages/vpaymember_t/"]||[]).push([[11],{105:function(e,t,n){e.exports={dealRecord:"index-module__dealRecord___3jlsv",tips:"index-module__tips___1RxCx",couponListBlock:"index-module__couponListBlock___f8paG",price:"index-module__price___3Cya3",priceTips:"index-module__priceTips___329Uv",discountValue:"index-module__discountValue___hIkgN",couponCont:"index-module__couponCont____QnM3",couponName:"index-module__couponName___3YLEf",couponLimite:"index-module__couponLimite___2Y1eC",discountTitle:"index-module__discountTitle___1plP7",btnBlock:"index-module__btnBlock___2BEcS",btnMsg:"index-module__btnMsg___2s4va",loading:"index-module__loading___27ywO",loading_img:"index-module__loading_img___27moJ"}},16:function(e,t,n){"use strict";n.d(t,"j",(function(){return o})),n.d(t,"C",(function(){return a})),n.d(t,"l",(function(){return c})),n.d(t,"d",(function(){return u})),n.d(t,"f",(function(){return r})),n.d(t,"e",(function(){return s})),n.d(t,"m",(function(){return d})),n.d(t,"c",(function(){return l})),n.d(t,"g",(function(){return p})),n.d(t,"h",(function(){return f})),n.d(t,"q",(function(){return m})),n.d(t,"L",(function(){return b})),n.d(t,"i",(function(){return _})),n.d(t,"G",(function(){return g})),n.d(t,"K",(function(){return j})),n.d(t,"I",(function(){return h})),n.d(t,"F",(function(){return y})),n.d(t,"p",(function(){return x})),n.d(t,"b",(function(){return O})),n.d(t,"w",(function(){return v})),n.d(t,"k",(function(){return N})),n.d(t,"A",(function(){return T})),n.d(t,"B",(function(){return S})),n.d(t,"J",(function(){return I})),n.d(t,"y",(function(){return k})),n.d(t,"a",(function(){return L})),n.d(t,"z",(function(){return P})),n.d(t,"n",(function(){return C})),n.d(t,"u",(function(){return w})),n.d(t,"v",(function(){return D})),n.d(t,"x",(function(){return E})),n.d(t,"E",(function(){return J})),n.d(t,"t",(function(){return B})),n.d(t,"r",(function(){return R})),n.d(t,"s",(function(){return V})),n.d(t,"M",(function(){return G})),n.d(t,"D",(function(){return M})),n.d(t,"H",(function(){return F})),n.d(t,"o",(function(){return q}));var i=n(2),o=function api_nearbystore_list(e){return Object(i.a)({functionId:"vip/store/nearList",body:e})},a=function get_purchasePage_info(e){return Object(i.a)({functionId:"pay/vip/purchasePage",method:"POST",body:JSON.stringify(e)})},c=function api_plus_vipPurchase(e){return Object(i.a)({functionId:"pay/vip/purchase",body:e})},u=function api_buy_record(e){return Object(i.a)({functionId:"pay/vip/record",body:e||{}})},r=function api_convertCouponCheck(e){return Object(i.a)({functionId:"vip/convertCouponCheck",method:"POST",body:JSON.stringify(e)})},s=function api_convertCoupon(e){return Object(i.a)({functionId:"vip/convertCoupon",method:"POST",body:JSON.stringify(e)})},d=function api_undoExchange(e){return Object(i.a)({functionId:"vip/exchange/undo",method:"POST",body:JSON.stringify(e)})},l=function api_allowanceList(e){return Object(i.a)({functionId:"pay/vip/allowance/detail",body:e||{}})},p=function api_exchangeconCheck(e){return Object(i.a)({functionId:"pay/vip/exchange/check",body:e||{}})},f=function api_exchangeconFirm(e){return Object(i.a)({functionId:"pay/vip/exchange/confirm",body:e||{}})},m=function discountListCont(e){return Object(i.a)({functionId:"pay/vip/red/packet/discount",body:e||{}})},b=function tabContentFun(e){return Object(i.a)({functionId:"pay/vip/red/packet/tab",body:e||{}})},_=function api_getCouponData(e){return Object(i.a)({functionId:"vip/exchange/queryPageList",body:e||{}})},g=function protocolFun(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i.a)({functionId:"pay/vip/protocol",body:e})},j=function storeInfoFun(e){return Object(i.a)({functionId:"pay/vip/store",method:"POST",body:JSON.stringify(e)})},h=function queryPayStatusFun(e){return console.log(JSON.stringify(e),"------参数"),Object(i.a)({functionId:"tx/core/queryPayStatus",body:JSON.stringify(e)})},y=function payModesFun(e){return Object(i.a)({functionId:"pay/cashier/pay-modes",method:"POST",body:JSON.stringify(e)})},x=function directPayFun(e){return Object(i.a)({functionId:"pay/cashier/direct-pay",method:"POST",body:JSON.stringify(e),isNeedDealError:1})},O=function abStrategyFun(){return Object(i.a)({functionId:"pay/cashier/ab-strategy",method:"POST"})},v=function getPayInfoFun(e){return Object(i.a)({functionId:"pay/cashier/get-pay-info",method:"POST",body:e})},N=function api_plus_main_new(e){return Object(i.a)({functionId:"pay/vip/main-page",method:"POST",body:e})},T=function getVenuePageFun(e){return Object(i.a)({functionId:"pay/vip/venuePage",method:"GET",body:JSON.stringify(e)})},S=function getVenueReceiveFun(e){return Object(i.a)({functionId:"pay/vip/venueReceive",method:"POST",body:JSON.stringify(e)})},I=function showMoreFun(e){return Object(i.a)({functionId:"pay/vip/showMore",method:"GET",body:JSON.stringify(e)})},k=function getRights(e){return Object(i.a)({functionId:"vip/benefit/all",method:"GET",body:JSON.stringify(e)})},L=function abProductList(e){return Object(i.a)({functionId:"vip/ab/product-list",method:"GET",body:JSON.stringify(e)})},P=function getSharePic(e){return Object(i.a)({functionId:"vip/share/image",method:"GET",body:JSON.stringify(e)})},C=function api_vip_goods_list(e){return Object(i.a)({functionId:"vip/sku/vipPrice",method:"POST",body:e})},w=function getNearBigCouponList(e){return Object(i.a)({functionId:"vip/member/price/nearList",method:"POST",body:JSON.stringify(e)})},D=function getNearBigCouponListMore(e){return Object(i.a)({functionId:"vip/member/price/loadMore",method:"POST",body:JSON.stringify(e)})},E=function getQueryStatusForV(e){return Object(i.a)({functionId:"vip/contract/queryStatusForV",method:"GET",body:JSON.stringify(e)})},J=function noticeResult(e){return Object(i.a)({functionId:"vip/contract/noticeResult",method:"GET",body:JSON.stringify(e)})},B=function getContractInfoPage(e){return Object(i.a)({functionId:"vip/contract/infoPage",method:"GET",body:JSON.stringify(e)})},R=function getContractCancel(e){return Object(i.a)({functionId:"vip/contract/cancel",method:"GET",body:JSON.stringify(e)})},V=function getContractHistoryState(e){return Object(i.a)({functionId:"vip/contract/historyState",method:"GET",body:JSON.stringify(e)})},G=function vipMarket(e){return Object(i.a)({functionId:"vip/market/orderGuide",method:"GET",body:JSON.stringify(e),isNeedDealError:1})},M=function layerIndex(e){return Object(i.a)({functionId:"vip/layer/index",method:"GET",body:JSON.stringify(e)})},F=function queryPageList(e){return Object(i.a)({functionId:"vip/exchange/queryPageList",method:"GET",body:JSON.stringify(e)})},q=function dealButton(e){return Object(i.a)({functionId:"pay/vip/dealButton",method:"POST",body:JSON.stringify(e)})}},18:function(e,t,n){e.exports={box:"index-module__box___1ukgN",btn:"index-module__btn___3r4PN",tips:"index-module__tips___2sCtq",image:"index-module__image___2uTX3",isLoading:"index-module__isLoading___3Q13E",isLoadingImg:"index-module__isLoadingImg___2LKg2"}},20:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return r}));var i=n(4),o=n(3),a=n.n(o),c=function navigateTo(e){var t=e.url;return(t.indexOf("testpdjm.jd.com")>-1||t.indexOf("prepdjm.jd.com")>-1||t.indexOf("daojia.jd.com")>-1||t.indexOf("prepdj-three.jddj.com")>-1)&&(t="/pages/"+t.split("/pages/")[1]),a.a.navigateTo({url:t})},u=function postMsgUpdateV(){i.c&&_isCompatible(String(i.a),String("8.6.0"))>=0&&(i.d?i.h&&e.webkit.messageHandlers.MobileNavi.postMessage({method:"updateVPlusPage",callBackName:null,callBackId:null}):i.b&&e.djJava.closeWebview&&e.djJava.updateVPlusPage())},r=function closeWebView(){i.c&&_isCompatible(String(i.a),String("8.6.0"))>=0&&(i.d?i.h&&e.webkit.messageHandlers.MobileNavi.postMessage({method:"closeWebview",callBackName:null,callBackId:null}):i.b&&e.djJava.closeWebview&&e.djJava.closeWebview())};function _isCompatible(e,t){e=e.split("."),t=t.split(".");for(var n=Math.max(e.length,t.length);e.length<n;)e.push("0");for(;t.length<n;)t.push("0");for(var i=0;i<n;i++){var o=parseInt(e[i]),a=parseInt(t[i]);if(o>a)return 1;if(o<a)return-1}return 0}}).call(this,n(11).window)},213:function(e,t,n){"use strict";n.r(t);n(68);var i=n(13),o=n(11),a=n(42),c=n(5);o.container.get(o.SERVICE_IDENTIFIER.Hooks).initNativeApiImpls=[i.c.initNativeApi];var u={pages:["pages/index/index"],subPackages:[{root:"pages/vipChannel-t/",pages:["index"],independent:!0},{root:"pages/merchant-t/",pages:["agreement/index"],independent:!0},{root:"pages/vpaymember_t/",pages:["home/index","memberGoods/index","packageSelection/index","rightsInstruction/index","memberDay/index","couponTab/index","couponTabNew/index","exchangePage/index","instructions/index","envelopesRecord/index","bountyList/index","discountList/index","manageRenew/index","payResult/index","toVPlusCenterPage/index"],independent:!0},{root:"pages/test-t/",pages:["hy/index"]}],permission:{"scope.userLocation":{desc:"你的位置信息将用获取最近的门店信息"}},plugins:{loginPlugin:{version:"1.5.1",provider:"wxefe655223916819e"},"live-player-plugin":{version:"1.3.5",provider:"wx2b03c6e691cd7370"}},window:{backgroundTextStyle:"light",navigationBarBackgroundColor:"#fff",navigationBarTitleText:"WeChat",navigationBarTextStyle:"black"}};o.window.__taroAppConfig=u;class App extends c.Component{render(){return this.props.children}}Object(a.a)(App,c,c.default,u);var r=n(226).default;Page(Object(o.createPageConfig)(r,"pages/vpaymember_t/discountList/index",{},{navigationBarBackgroundColor:"#fff",navigationBarTextStyle:"black",navigationBarTitleText:"会员抵扣红包"}||{}))},226:function(e,t,n){"use strict";n.r(t);var i=n(6),o=n(7),a=n(8),c=n(9),u=n(3),r=n.n(u),s=n(14),d=n(1),l=n(16),p=n(79),f=n(72),m=n(84),b=(n(4),n(5)),_=n(55),g=n.n(_),j=n(0),h=function(e){Object(a.a)(RedPackCont,e);var t=Object(c.a)(RedPackCont);function RedPackCont(e){return Object(i.a)(this,RedPackCont),t.call(this,e)}return Object(o.a)(RedPackCont,[{key:"render",value:function render(){var e=this,t=this.props,n=t.couponList,i=t.from;return Object(j.jsx)(d.j,{className:"".concat(g.a.redPack),children:n&&n.length>0?n.map((function(t,n){return Object(j.jsxs)(d.j,{className:"".concat(1==t.status?g.a.inTime:g.a.outTime," ").concat(g.a.couponListBlock),children:[Object(j.jsxs)(d.j,{className:g.a.price,children:[Object(j.jsxs)(d.j,{className:g.a.priceGroup,children:[Object(j.jsx)(d.j,{className:g.a.priceTips,children:"¥"}),Object(j.jsx)(d.j,{className:g.a.discountValue,children:t.discountValue||t.quota||t.amount})]}),i?"":Object(j.jsx)(d.j,{className:g.a.limitRule,children:t.limitRule||t.discountSubtitle})]}),Object(j.jsxs)(d.j,{className:g.a.couponCont,children:[Object(j.jsx)(d.j,{className:g.a.couponName,children:t.title||t.discountTitle||t.showName}),i?Object(j.jsx)(d.j,{className:g.a.couponLimite,children:t.limitRule}):Object(j.jsx)(d.j,{className:g.a.couponLimite,children:t.couponDetail}),Object(j.jsx)(d.j,{className:g.a.discountTitle,children:Object(j.jsx)(d.j,{className:g.a.expiryDateText,children:t.expiryDateText||t.availableDate})})]}),Object(j.jsx)(d.j,{className:g.a.btnBlock,children:t.sendDate?Object(j.jsxs)(d.j,{className:g.a.sendTime,children:[t.sendDate||"2020.04.27","发放"]}):Object(j.jsx)(d.j,{className:g.a.btnMsg,onClick:e.toUse.bind(e,t),children:"去使用"})})]},n)})):""})}},{key:"toUse",value:function toUse(e){this.props.toUse(e.couponGoInfoResult)}}]),RedPackCont}(b.Component),y=n(105),x=n.n(y),O=n(35),v=n(54),N=(n(20),function(e){Object(a.a)(discountList,e);var t=Object(c.a)(discountList);function discountList(e){var n;return Object(i.a)(this,discountList),(n=t.call(this,e)).state={showLoading:!0,couponList:[{status:null,discountValue:"",limitRule:"",discountSubtitle:"",quota:"",amount:"",discountTitle:"",title:"",showName:"",couponDetail:"",expiryDateText:"",availableDate:"",sendDate:""}],isEmpty:!1,defaultType:2,defaultTips:"网络开小差了，请稍后再试",defaultBtnTxt:"去首页看看",address:{}},n}return Object(o.a)(discountList,[{key:"componentDidShow",value:function componentDidShow(){this.getLocation(),Object(s.b)({create_time:new Date,page_name:"showRedenvelopepage",click_par:{}})}},{key:"render",value:function render(){var e=this.state,t=e.showLoading,n=e.couponList,i=e.defaultType,o=e.defaultTips,a=e.defaultBtnTxt,c=e.isEmpty;return Object(j.jsxs)(d.j,{className:x.a.discountPage,children:[t?Object(j.jsx)(d.j,{className:x.a.loading,children:Object(j.jsx)(d.c,{className:x.a.loading_img,src:"https://storage.360buyimg.com/wximg/common/loading.gif"})}):"",c?Object(j.jsx)(p.a,{defaultType:i,defaultTips:o,defaultBtnTxt:a,defaultTop:"40px",onDefaultEvent:this.onDefaultEvent.bind(this)}):Object(j.jsxs)(d.j,{className:x.a.dealRecord,children:[Object(j.jsx)(h,{couponList:n,from:"disCountList",toUse:this.toUse.bind(this)}),Object(j.jsx)(d.j,{className:x.a.tips,children:"仅展示当天会员抵扣红包"})]})]})}},{key:"getDiscountList",value:function getDiscountList(){var e,t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{cityId:0},i=(null===(e=Object(u.getCurrentInstance)().router)||void 0===e?void 0:e.params)||{},o=Object(f.a)(m.b)||{},a=!0,c={platform:"H5",from:"newVip"};c.userCardType=i.userCardType,c.pageVersion="V9",c.pin=a?o.PDJ_H5_PIN||"":Object(O.a)("PDJ_H5_PIN")||Object(O.a)("pin")||Object(O.a)("PDJ_H5_JDPIN"),c.cityId=n.cityId,Object(l.q)(c).then((function(e){e&&0==e.code?0==e.result.length?t.setState({defaultType:2,isEmpty:!0,showLoading:!1,defaultTips:"空空如也",defaultBtnTxt:"去首页看看"}):t.setState({couponList:e.result,showLoading:!1,isEmpty:!1}):t.setState({defaultType:2,isEmpty:!0,showLoading:!1,defaultTips:"网络开小差了，请稍后再试",defaultBtnTxt:"去首页看看"})})).catch((function(){t.setState({defaultType:2,isEmpty:!0,showLoading:!1,defaultTips:"网络开小差了，请稍后再试",defaultBtnTxt:"去首页看看"})}))}},{key:"getLocation",value:function getLocation(){var e=this;Object(v.a)().then((function(t){t.cityId=t.cityId||t.areaCode||t.cityCode||"",t.cityName=t.city||t.cityName||"",e.setState({address:t||{}}),e.getDiscountList(t)})).catch((function(t){e.getDiscountList()}))}},{key:"onDefaultEvent",value:function onDefaultEvent(){r.a.navigateBack({delta:1,success:function success(e){},fail:function fail(e){},complete:function complete(e){}}).then((function(e){})).catch((function(e){}))}},{key:"toUse",value:function toUse(){this.onDefaultEvent()}}]),discountList}(b.Component));t.default=N},55:function(e,t,n){e.exports={couponListBlock:"index-module__couponListBlock___1sH9L",price:"index-module__price___2VpzJ",priceGroup:"index-module__priceGroup___t9a74",limitRule:"index-module__limitRule___2FLl7",priceTips:"index-module__priceTips___8Mq0u",discountValue:"index-module__discountValue___27wHl",couponCont:"index-module__couponCont___3oirs",couponName:"index-module__couponName___27YJy",couponLimite:"index-module__couponLimite___mQ0n4",discountTitle:"index-module__discountTitle___2_xrE",expiryDateText:"index-module__expiryDateText___ViOgL",btnBlock:"index-module__btnBlock___2mDf8",btnMsg:"index-module__btnMsg___23D6L",sendTime:"index-module__sendTime___2Vk3x"}},79:function(e,t,n){"use strict";var i=n(6),o=n(7),a=n(8),c=n(9),u=n(5),r=n(1),s=n(18),d=n.n(s),l=n(26),p=n(0),f=function(e){Object(a.a)(Default,e);var t=Object(c.a)(Default);function Default(e){return Object(i.a)(this,Default),t.call(this,e)}return Object(o.a)(Default,[{key:"render",value:function render(){var e=this.props.defaultType,t=this.props.defaultTips,n=this.props.defaultBtnTxt,i=null;return 0===e?i=Object(p.jsxs)(r.j,{className:d.a.isLoading,children:[Object(p.jsx)(r.c,{className:d.a.isLoadingImg,mode:"aspectFit",src:"https://storage.360buyimg.com/wximg/common/loading.gif"}),"努力加载中..."]}):1===e?i=Object(p.jsxs)(r.j,{className:d.a.box,children:[Object(p.jsx)(r.c,{src:"https://storage.360buyimg.com/wximg/defaultPage/icon_noaddress.png",className:d.a.image}),t?Object(p.jsx)(r.j,{className:d.a.tips,children:t}):"",Object(p.jsx)(r.b,{className:d.a.btn,openType:"openSetting",children:"获取地理位置"})]}):2===e?i=Object(p.jsxs)(r.j,{className:d.a.box,children:[Object(p.jsx)(r.c,{src:"https://storage.360buyimg.com/wximg/defaultPage/icon_nodata.png",className:d.a.image}),t?Object(p.jsx)(r.j,{className:d.a.tips,children:t}):"",n?Object(p.jsx)(r.b,{className:d.a.btn,onClick:this.onDefaultEvent.bind(this),children:n}):""]}):3===e?i=Object(p.jsxs)(r.j,{className:d.a.box,children:[Object(p.jsx)(r.c,{src:"https://storage.360buyimg.com/wximg/defaultPage/icon_nonetwork.png",className:d.a.image}),t?Object(p.jsx)(r.j,{className:d.a.tips,children:t}):"",Object(p.jsx)(r.b,{className:d.a.btn,onClick:this.onDefaultEvent.bind(this),children:"重新加载"})]}):4===e&&(i=Object(p.jsxs)(r.j,{className:d.a.box,children:[Object(p.jsx)(r.c,{src:"https://storage.360buyimg.com/wximg/defaultPage/icon_nologin.png",className:d.a.image}),t?Object(p.jsx)(r.j,{className:d.a.tips,children:t}):"",Object(p.jsx)(r.b,{className:d.a.btn,onClick:this.onDefaultEvent.bind(this),children:"去登录"})]})),Object(p.jsx)(r.j,{style:{paddingTop:this.props.defaultTop||"30%"},children:i})}},{key:"clickSearchAddress",value:function clickSearchAddress(){Object(l.a)({to:"indexaddress"})}},{key:"onDefaultEvent",value:function onDefaultEvent(){this.props.onDefaultEvent()}}]),Default}(u.Component);t.a=f}},[[213,0,17]]]);