require("../runtime"),require("../vendors"),(wx["webpackJsonp/pages/vpaymember_t/"]=wx["webpackJsonp/pages/vpaymember_t/"]||[]).push([[4],{12:function(e,t,n){e.exports={"global-tip":"index-module__global-tip___QlHN8","body-tip-wrap":"index-module__body-tip-wrap___aPTCB","tip-wrap":"index-module__tip-wrap___22y4U","tip-box":"index-module__tip-box___T7YOL","tip-icon":"index-module__tip-icon___I7B8P","tip-icon-unLogin":"index-module__tip-icon-unLogin___1-jbT","tip-icon-noWifi":"index-module__tip-icon-noWifi___2dxuP","tip-icon-noLocation":"index-module__tip-icon-noLocation___I2R_R","tip-icon-noSearch":"index-module__tip-icon-noSearch___3tUE6","tip-icon-noShop":"index-module__tip-icon-noShop___2h2cU","tip-icon-noOpen":"index-module__tip-icon-noOpen___J1T3G","tip-icon-empty":"index-module__tip-icon-empty___xRFrr","tip-icon-close":"index-module__tip-icon-close___2ISFM","tip-icon-search":"index-module__tip-icon-search___yYaXq","tip-icon-nothing":"index-module__tip-icon-nothing___dw2s1","tip-icon-storeOffline":"index-module__tip-icon-storeOffline___1dgCh","tip-icon-searchFail":"index-module__tip-icon-searchFail___14dM7","tip-icon-noSearchBtn":"index-module__tip-icon-noSearchBtn___2nwf4","tip-message":"index-module__tip-message___1xNit",tipBtn:"index-module__tipBtn___3PI5b","search-tip-span":"index-module__search-tip-span___2I2as",android:"index-module__android___B49C3","tip-btn":"index-module__tip-btn___2puVF","msg-red-point":"index-module__msg-red-point___3Tr-v","msg-red-point-small":"index-module__msg-red-point-small___3ruUD","msg-red-point-num":"index-module__msg-red-point-num___2ivqG","reddot-server":"index-module__reddot-server___l5U76",tipText:"index-module__tipText___L-jUT"}},127:function(e,t,n){e.exports={getMore:"index-module__getMore___f5k0Q",moreText:"index-module__moreText___fJi97",moreIcon:"index-module__moreIcon___24AJn"}},128:function(e,t,n){e.exports={none:"index-module__none___1UCtD",iconDog:"index-module__iconDog___1l9G3",text:"index-module__text___2orWQ"}},16:function(e,t,n){"use strict";n.d(t,"j",(function(){return a})),n.d(t,"C",(function(){return i})),n.d(t,"l",(function(){return c})),n.d(t,"d",(function(){return r})),n.d(t,"f",(function(){return s})),n.d(t,"e",(function(){return u})),n.d(t,"m",(function(){return l})),n.d(t,"c",(function(){return d})),n.d(t,"g",(function(){return p})),n.d(t,"h",(function(){return m})),n.d(t,"q",(function(){return _})),n.d(t,"L",(function(){return b})),n.d(t,"i",(function(){return g})),n.d(t,"G",(function(){return h})),n.d(t,"K",(function(){return j})),n.d(t,"I",(function(){return f})),n.d(t,"F",(function(){return x})),n.d(t,"p",(function(){return y})),n.d(t,"b",(function(){return O})),n.d(t,"w",(function(){return v})),n.d(t,"k",(function(){return N})),n.d(t,"A",(function(){return T})),n.d(t,"B",(function(){return k})),n.d(t,"J",(function(){return S})),n.d(t,"y",(function(){return C})),n.d(t,"a",(function(){return M})),n.d(t,"z",(function(){return P})),n.d(t,"n",(function(){return I})),n.d(t,"u",(function(){return L})),n.d(t,"v",(function(){return B})),n.d(t,"x",(function(){return w})),n.d(t,"E",(function(){return D})),n.d(t,"t",(function(){return R})),n.d(t,"r",(function(){return F})),n.d(t,"s",(function(){return U})),n.d(t,"M",(function(){return J})),n.d(t,"D",(function(){return W})),n.d(t,"H",(function(){return q})),n.d(t,"o",(function(){return E}));var o=n(2),a=function api_nearbystore_list(e){return Object(o.a)({functionId:"vip/store/nearList",body:e})},i=function get_purchasePage_info(e){return Object(o.a)({functionId:"pay/vip/purchasePage",method:"POST",body:JSON.stringify(e)})},c=function api_plus_vipPurchase(e){return Object(o.a)({functionId:"pay/vip/purchase",body:e})},r=function api_buy_record(e){return Object(o.a)({functionId:"pay/vip/record",body:e||{}})},s=function api_convertCouponCheck(e){return Object(o.a)({functionId:"vip/convertCouponCheck",method:"POST",body:JSON.stringify(e)})},u=function api_convertCoupon(e){return Object(o.a)({functionId:"vip/convertCoupon",method:"POST",body:JSON.stringify(e)})},l=function api_undoExchange(e){return Object(o.a)({functionId:"vip/exchange/undo",method:"POST",body:JSON.stringify(e)})},d=function api_allowanceList(e){return Object(o.a)({functionId:"pay/vip/allowance/detail",body:e||{}})},p=function api_exchangeconCheck(e){return Object(o.a)({functionId:"pay/vip/exchange/check",body:e||{}})},m=function api_exchangeconFirm(e){return Object(o.a)({functionId:"pay/vip/exchange/confirm",body:e||{}})},_=function discountListCont(e){return Object(o.a)({functionId:"pay/vip/red/packet/discount",body:e||{}})},b=function tabContentFun(e){return Object(o.a)({functionId:"pay/vip/red/packet/tab",body:e||{}})},g=function api_getCouponData(e){return Object(o.a)({functionId:"vip/exchange/queryPageList",body:e||{}})},h=function protocolFun(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(o.a)({functionId:"pay/vip/protocol",body:e})},j=function storeInfoFun(e){return Object(o.a)({functionId:"pay/vip/store",method:"POST",body:JSON.stringify(e)})},f=function queryPayStatusFun(e){return console.log(JSON.stringify(e),"------参数"),Object(o.a)({functionId:"tx/core/queryPayStatus",body:JSON.stringify(e)})},x=function payModesFun(e){return Object(o.a)({functionId:"pay/cashier/pay-modes",method:"POST",body:JSON.stringify(e)})},y=function directPayFun(e){return Object(o.a)({functionId:"pay/cashier/direct-pay",method:"POST",body:JSON.stringify(e),isNeedDealError:1})},O=function abStrategyFun(){return Object(o.a)({functionId:"pay/cashier/ab-strategy",method:"POST"})},v=function getPayInfoFun(e){return Object(o.a)({functionId:"pay/cashier/get-pay-info",method:"POST",body:e})},N=function api_plus_main_new(e){return Object(o.a)({functionId:"pay/vip/main-page",method:"POST",body:e})},T=function getVenuePageFun(e){return Object(o.a)({functionId:"pay/vip/venuePage",method:"GET",body:JSON.stringify(e)})},k=function getVenueReceiveFun(e){return Object(o.a)({functionId:"pay/vip/venueReceive",method:"POST",body:JSON.stringify(e)})},S=function showMoreFun(e){return Object(o.a)({functionId:"pay/vip/showMore",method:"GET",body:JSON.stringify(e)})},C=function getRights(e){return Object(o.a)({functionId:"vip/benefit/all",method:"GET",body:JSON.stringify(e)})},M=function abProductList(e){return Object(o.a)({functionId:"vip/ab/product-list",method:"GET",body:JSON.stringify(e)})},P=function getSharePic(e){return Object(o.a)({functionId:"vip/share/image",method:"GET",body:JSON.stringify(e)})},I=function api_vip_goods_list(e){return Object(o.a)({functionId:"vip/sku/vipPrice",method:"POST",body:e})},L=function getNearBigCouponList(e){return Object(o.a)({functionId:"vip/member/price/nearList",method:"POST",body:JSON.stringify(e)})},B=function getNearBigCouponListMore(e){return Object(o.a)({functionId:"vip/member/price/loadMore",method:"POST",body:JSON.stringify(e)})},w=function getQueryStatusForV(e){return Object(o.a)({functionId:"vip/contract/queryStatusForV",method:"GET",body:JSON.stringify(e)})},D=function noticeResult(e){return Object(o.a)({functionId:"vip/contract/noticeResult",method:"GET",body:JSON.stringify(e)})},R=function getContractInfoPage(e){return Object(o.a)({functionId:"vip/contract/infoPage",method:"GET",body:JSON.stringify(e)})},F=function getContractCancel(e){return Object(o.a)({functionId:"vip/contract/cancel",method:"GET",body:JSON.stringify(e)})},U=function getContractHistoryState(e){return Object(o.a)({functionId:"vip/contract/historyState",method:"GET",body:JSON.stringify(e)})},J=function vipMarket(e){return Object(o.a)({functionId:"vip/market/orderGuide",method:"GET",body:JSON.stringify(e),isNeedDealError:1})},W=function layerIndex(e){return Object(o.a)({functionId:"vip/layer/index",method:"GET",body:JSON.stringify(e)})},q=function queryPageList(e){return Object(o.a)({functionId:"vip/exchange/queryPageList",method:"GET",body:JSON.stringify(e)})},E=function dealButton(e){return Object(o.a)({functionId:"pay/vip/dealButton",method:"POST",body:JSON.stringify(e)})}},20:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return s}));var o=n(4),a=n(3),i=n.n(a),c=function navigateTo(e){var t=e.url;return(t.indexOf("testpdjm.jd.com")>-1||t.indexOf("prepdjm.jd.com")>-1||t.indexOf("daojia.jd.com")>-1||t.indexOf("prepdj-three.jddj.com")>-1)&&(t="/pages/"+t.split("/pages/")[1]),i.a.navigateTo({url:t})},r=function postMsgUpdateV(){o.c&&_isCompatible(String(o.a),String("8.6.0"))>=0&&(o.d?o.h&&e.webkit.messageHandlers.MobileNavi.postMessage({method:"updateVPlusPage",callBackName:null,callBackId:null}):o.b&&e.djJava.closeWebview&&e.djJava.updateVPlusPage())},s=function closeWebView(){o.c&&_isCompatible(String(o.a),String("8.6.0"))>=0&&(o.d?o.h&&e.webkit.messageHandlers.MobileNavi.postMessage({method:"closeWebview",callBackName:null,callBackId:null}):o.b&&e.djJava.closeWebview&&e.djJava.closeWebview())};function _isCompatible(e,t){e=e.split("."),t=t.split(".");for(var n=Math.max(e.length,t.length);e.length<n;)e.push("0");for(;t.length<n;)t.push("0");for(var o=0;o<n;o++){var a=parseInt(e[o]),i=parseInt(t[o]);if(a>i)return 1;if(a<i)return-1}return 0}}).call(this,n(11).window)},201:function(e,t,n){"use strict";n.r(t);n(68);var o=n(13),a=n(11),i=n(42),c=n(5);a.container.get(a.SERVICE_IDENTIFIER.Hooks).initNativeApiImpls=[o.c.initNativeApi];var r={pages:["pages/index/index"],subPackages:[{root:"pages/vipChannel-t/",pages:["index"],independent:!0},{root:"pages/merchant-t/",pages:["agreement/index"],independent:!0},{root:"pages/vpaymember_t/",pages:["home/index","memberGoods/index","packageSelection/index","rightsInstruction/index","memberDay/index","couponTab/index","couponTabNew/index","exchangePage/index","instructions/index","envelopesRecord/index","bountyList/index","discountList/index","manageRenew/index","payResult/index","toVPlusCenterPage/index"],independent:!0},{root:"pages/test-t/",pages:["hy/index"]}],permission:{"scope.userLocation":{desc:"你的位置信息将用获取最近的门店信息"}},plugins:{loginPlugin:{version:"1.5.1",provider:"wxefe655223916819e"},"live-player-plugin":{version:"1.3.5",provider:"wx2b03c6e691cd7370"}},window:{backgroundTextStyle:"light",navigationBarBackgroundColor:"#fff",navigationBarTitleText:"WeChat",navigationBarTextStyle:"black"}};a.window.__taroAppConfig=r;class App extends c.Component{render(){return this.props.children}}Object(i.a)(App,c,c.default,r);var s=n(221).default;Page(Object(a.createPageConfig)(s,"pages/vpaymember_t/memberDay/index",{},{navigationBarTitleText:"京东到家会员日",navigationBarBackgroundColor:"#fff",navigationBarTextStyle:"black"}||{}))},221:function(e,t,n){"use strict";n.r(t);var o,a=n(22),i=n(39),c=n(6),r=n(7),s=n(15),u=n(8),l=n(9),d=n(10),p=(n(113),n(5)),m=n(3),_=n.n(m),b=n(1),g=n(46),h=n.n(g),j=n(14),f=n(59),x=n.n(f),y=n(0),O=function(e){Object(u.a)(platformCoupon,e);var t=Object(l.a)(platformCoupon);function platformCoupon(e){var n;return Object(c.a)(this,platformCoupon),(n=t.call(this,e)).state={},n}return Object(r.a)(platformCoupon,[{key:"componentDidMount",value:function componentDidMount(){}},{key:"clickBtn",value:function clickBtn(){this.props.clickBtn&&this.props.clickBtn()}},{key:"getBtnText",value:function getBtnText(e){var t="立即领取",n={0:"立即领取",1:"去使用"};return n[e]&&(t=n[e]),t}},{key:"getProgressWidth",value:function getProgressWidth(e,t){var n=0;return this.props.getProgressWidth&&(n=this.props.getProgressWidth(e,t)),n}},{key:"couponState",value:function couponState(){var e=this.props.item,t="";return this.props.couponState&&(t=this.props.couponState(e.state)),t}},{key:"render",value:function render(){var e=this.props.item;return Object(y.jsx)(b.j,{className:"".concat(x.a.platformCoupon),children:Object(y.jsxs)(b.j,{className:"".concat(x.a.item),children:[4===e.state||3===e.state||2===e.state?Object(y.jsx)(b.j,{className:"".concat(x.a.overIcon),style:"background:url(".concat(this.couponState(),") no-repeat center;background-size: 100% 100%;\n      -webkit-background-size: 100% 100%;")}):null,Object(y.jsx)(b.j,{className:x.a.remarkCon,children:Object(y.jsx)(b.j,{className:"".concat(x.a.remark),children:e.showName})}),Object(y.jsxs)(b.j,{className:"".concat(x.a.price),children:[e.quota,Object(y.jsx)(b.i,{className:"".concat(x.a.yuan),children:"元"})]}),Object(y.jsxs)(b.j,{className:"".concat(x.a.useRemark),children:["满",e.minOrderAmount,"元可用"]}),Object(y.jsx)(b.j,{className:"".concat(x.a.btnCon),onClick:this.clickBtn.bind(this),children:2===e.state||3===e.state||4===e.state?Object(y.jsx)(b.j,{className:"".concat(x.a.disableBtn),children:Object(y.jsx)(b.j,{className:"".concat(x.a.btnText),children:this.getBtnText(e.state)})}):Object(y.jsx)(b.j,{className:"".concat(x.a.btn),children:Object(y.jsx)(b.j,{className:"".concat(x.a.btnText),children:this.getBtnText(e.state)})})}),Object(y.jsxs)(b.j,{className:"".concat(x.a.progress),children:[Object(y.jsx)(b.j,{className:"".concat(x.a.bar),children:Object(y.jsx)(b.j,{className:"".concat(x.a.currentProgree),style:{width:this.getProgressWidth(e.schedule,100)+"%"}})}),Object(y.jsxs)(b.j,{className:"".concat(x.a.barText),children:["已领",e.schedule,"%"]})]})]})})}}]),platformCoupon}(p.Component),v=n(64),N=n.n(v),T=function(e){Object(u.a)(shopCoupon,e);var t=Object(l.a)(shopCoupon);function shopCoupon(e){var n;return Object(c.a)(this,shopCoupon),(n=t.call(this,e)).state={},n}return Object(r.a)(shopCoupon,[{key:"componentDidMount",value:function componentDidMount(){}},{key:"clickBtn",value:function clickBtn(){this.props.clickBtn&&this.props.clickBtn()}},{key:"couponState",value:function couponState(){var e=this.props.item,t="";return this.props.couponState&&(t=this.props.couponState(e.state)),t}},{key:"getBtnText",value:function getBtnText(e){var t="立即领取",n={0:"立即领取",1:"去使用"};return n[e]&&(t=n[e]),t}},{key:"getProgressWidth",value:function getProgressWidth(e,t){var n=0;return this.props.getProgressWidth&&(n=this.props.getProgressWidth(e,t)),n}},{key:"render",value:function render(){var e=this.props.item;return Object(y.jsxs)(b.j,{className:"".concat(N.a.shopCoupon),children:[4===e.state||3===e.state||2===e.state?Object(y.jsx)(b.j,{className:"".concat(N.a.overIcon),style:"background:url(".concat(this.couponState(),") no-repeat center;background-size: 100% 100%;\n      -webkit-background-size: 100% 100%;")}):null,Object(y.jsxs)(b.j,{className:"".concat(N.a.price),children:[e.quota,Object(y.jsx)(b.j,{className:"".concat(N.a.yuan),children:"元"})]}),Object(y.jsxs)(b.j,{className:"".concat(N.a.info),children:[Object(y.jsx)(b.j,{className:"".concat(N.a.couponTitle),children:e.showName}),Object(y.jsxs)(b.j,{className:"".concat(N.a.couponRemark),children:["满",e.minOrderAmount,"元可用"]}),Object(y.jsxs)(b.j,{className:"".concat(N.a.progress),children:[Object(y.jsx)(b.j,{className:"".concat(N.a.bar),children:Object(y.jsx)(b.j,{className:"".concat(N.a.currentProgree),style:{width:this.getProgressWidth(e.schedule,100)+"%"}})}),Object(y.jsxs)(b.j,{className:"".concat(N.a.barText),children:["已领",e.schedule,"%"]})]})]}),Object(y.jsx)(b.j,{className:"".concat(N.a.btnCon),onClick:this.clickBtn.bind(this),children:2===e.state||3===e.state||4===e.state?Object(y.jsx)(b.j,{className:"".concat(N.a.disableBtn),children:Object(y.jsx)(b.j,{className:"".concat(N.a.btnText),children:this.getBtnText(e.state)})}):Object(y.jsx)(b.j,{className:"".concat(N.a.btn),children:Object(y.jsx)(b.j,{className:"".concat(N.a.btnText),children:this.getBtnText(e.state)})})})]})}}]),shopCoupon}(p.Component),k=(n(202),n(127)),S=n.n(k),C=function(e){Object(u.a)(getMore,e);var t=Object(l.a)(getMore);function getMore(e){var n;return Object(c.a)(this,getMore),(n=t.call(this,e)).state={},n}return Object(r.a)(getMore,[{key:"getMoreList",value:function getMoreList(){var e=this.props.type;this.props.getMoreList&&this.props.getMoreList(e)}},{key:"render",value:function render(){return Object(y.jsxs)(b.j,{className:"".concat(S.a.getMore),onClick:this.getMoreList.bind(this),children:[Object(y.jsx)(b.j,{className:"".concat(S.a.moreText),children:"查看更多"}),Object(y.jsx)(b.j,{className:"".concat(S.a.moreIcon)})]})}}]),getMore}(p.Component),M=n(128),P=n.n(M),I=function(e){Object(u.a)(noneDog,e);var t=Object(l.a)(noneDog);function noneDog(e){var n;return Object(c.a)(this,noneDog),(n=t.call(this,e)).state={},n}return Object(r.a)(noneDog,[{key:"render",value:function render(){return Object(y.jsxs)(b.j,{className:"".concat(P.a.none),children:[Object(y.jsx)(b.j,{className:"".concat(P.a.iconDog)}),Object(y.jsx)(b.j,{className:"".concat(P.a.text),children:"下次再来吧~"})]})}}]),noneDog}(p.Component),L=n(69),B=n(16),w=n(20),D=n(50),R=n(60),F=(n(26),n(33)),U=n(54),J=function(e){Object(u.a)(memberDay,e);var t,n=Object(l.a)(memberDay);function memberDay(e){var t;return Object(c.a)(this,memberDay),t=n.call(this,e),Object(d.a)(Object(s.a)(t),"config",{navigationBarTitleText:"京东到家会员日",navigationBarBackgroundColor:"#fff",navigationBarTextStyle:"black"}),Object(d.a)(Object(s.a)(t),"jumpUrl",void 0),t.state={merchantList:[],platformList:[],vip:!1,isMorePlatForm:!1,isMoreMerchant:!1,memberDayBrandMapUrl:"",memberDayCategoryMapUrl:"",isLoading:!0,tipType:"",tipMsg:"",isNoneData:!1,codeInfoResult:{},comboId:"",paramsPageObj:{},firstRe:!0,cmsToUrl:"",memberDayVenueMapUrl:"",shareResult:{},result:{}},t.jumpUrl="",t}return Object(r.a)(memberDay,[{key:"componentDidMount",value:function componentDidMount(){this.setReturnUrl()}},{key:"setReturnUrl",value:function setReturnUrl(){var e,t,n=(null===(e=Object(m.getCurrentInstance)())||void 0===e||null===(t=e.router)||void 0===t?void 0:t.params)||{},o="";for(var a in n)o=o+"&"+a+"="+n[a];o=o.substring(1),this.jumpUrl="/pages/vpaymember_t/memberDay/index?".concat(o)}},{key:"initShareFn",value:function initShareFn(e){e.momentsShareUrl,e.friendShareUrl,e.title}},{key:"onShareAppMessage",value:function onShareAppMessage(e){var t=this.state.shareResult,n=t.friendShareUrl,o=void 0===n?"":n,a=t.title;return{title:void 0===a?"":a,path:"/pages/vpaymember_t/memberDay/index?business=wechathuiyuanrihaoyou",imageUrl:o}}},{key:"onShareTimeline",value:function onShareTimeline(){var e=this.state.shareResult,t=e.momentsShareUrl;return{title:e.title||"会员日分享",path:"/pages/vpaymember_t/memberDay/index?business=wechathuiyuanripyq",imageUrl:t}}},{key:"componentDidShow",value:(t=Object(i.a)(Object(a.a)().mark((function _callee(){var e,t,n,o,i=this;return Object(a.a)().wrap((function _callee$(a){for(;;)switch(a.prev=a.next){case 0:return n=(null===(e=Object(m.getCurrentInstance)())||void 0===e||null===(t=e.router)||void 0===t?void 0:t.params)||{},a.prev=1,a.next=4,this.login();case 4:a.next=9;break;case 6:a.prev=6,a.t0=a.catch(1),console.log(a.t0);case 9:Object(B.z)().then((function(e){i.setState({shareResult:e.result}),i.initShareFn(e.result)})).catch((function(e){var t={title:"会员日分享",momentsShareUrl:"https://storage.360buyimg.com/wximg/member/sharePyq.png",friendShareUrl:"https://storage.360buyimg.com/wximg/member/wxImg.png"};i.initShareFn(t),i.setState({shareResult:t})})),o={channel:n.channel||""},Object(j.b)({page_name:"vpayMembermemberDay",create_time:new Date,page_par:o});case 12:case"end":return a.stop()}}),_callee,this,[[1,6]])}))),function componentDidShow(){return t.apply(this,arguments)})},{key:"componentDidHide",value:function componentDidHide(){}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.setState({isLoading:!0,tipType:"",tipMsg:""})}},{key:"getProgressWidth",value:function getProgressWidth(e,t){var n=0;return e&&(n=Math.floor(t*e/100)),n}},{key:"getCoupon",value:function getCoupon(e,t,n){var o=this,a={activityCode:e.activityCode,comboId:this.state.comboId,couponId:e.couponId,requestor:"vplus-home"};Object(B.B)(a).then((function(e){var a=e.code,i=e.msg,c=e.result,r=c.codeInfoResult;if("0"===a&&r&&c.success){Object(m.showToast)({icon:"none",title:c.message||"领取成功"});var s=1===n?JSON.parse(JSON.stringify(o.state.platformList)):JSON.parse(JSON.stringify(o.state.merchantList));s[t]=r,1===n?o.setState({platformList:s}):2===n&&o.setState({merchantList:s})}else Object(m.showToast)({icon:"none",title:i||"领取失败"})})).catch((function(e){console.log(e),Object(m.showToast)({icon:"none",title:"领取失败"})}))}},{key:"clickBtn",value:function clickBtn(e,t,n){var a=this.state.vip,i=e.state,c={type:e.couponId};if(!a&&(0===i||1===i))return Object(m.showToast)({icon:"none",title:"您未开通会员，快去开通吧!",duration:2e3}),o&&clearTimeout(o),o=setTimeout((function(){_.a.navigateTo({url:"/pages/vpaymember_t/packageSelection/index?vipFlag=0&h5=#newPay"})}),1e3),void Object(j.a)({page_name:"vpayMembermemberDay",create_time:new Date,click_id:"clickGet",click_par:c});0===i?(this.getCoupon(e,t,n),Object(j.a)({page_name:"vpayMembermemberDay",create_time:new Date,click_id:"clickGet",click_par:c})):1===i&&Object(L.a)({couponId:e.couponId,code:e.activityCode},e.couponGoSource)}},{key:"couponState",value:function couponState(e){var t={2:"https://storage.360buyimg.com/wxmini/vpay_member/used.png",3:"https://storage.360buyimg.com/wximg/member/timeOver.png",4:"https://storage.360buyimg.com/wxmini/vpay_member/getOver.png"},n="";return 2!=e&&3!=e&&4!=e||!t[e]||(n=t[e]),n}},{key:"getMoreList",value:function getMoreList(e){var t=this,n=this.state.paramsPageObj;n.requestor="vplus-home",n.codeType=Number(e),Object(B.J)(n).then((function(n){var o=n.code,a=(n.msg,n.result);if("0"===o){var i=a&&a.platformList&&a.platformList.length?a.platformList:[],c=a&&a.merchantList&&a.merchantList.length?a.merchantList:[],r=t.state,s=r.platformList,u=r.merchantList;1==e?t.setState({platformList:s.concat(i),isMorePlatForm:a.showMore}):0==e?t.setState({merchantList:u.concat(c),isMoreMerchant:a.showMore}):t.setState({isMoreMerchant:!1,isMorePlatForm:!1})}else t.setState({isMoreMerchant:!1,isMorePlatForm:!1}),Object(m.showToast)({icon:"none",title:"获取更多失败，请从新进入!",duration:2e3})})).catch((function(e){t.setState({isMoreMerchant:!1,isMorePlatForm:!1}),Object(m.showToast)({icon:"none",title:"获取更多异常，请从新进入!",duration:2e3})}))}},{key:"_getVenuePageFun",value:function _getVenuePageFun(e){var t=this;e||(e=this.state.paramsPageObj),Object(B.A)(e).then((function(e){var n=e.code,o=e.msg,a=e.result;if("0"===n){var i=a.vip,c=a.merchantList,r=a.platformList,s=a.memberDayBrandMapUrl,u=a.memberDayCategoryMapUrl,l=a.cmsToUrl,d=a.comboId,p=a.platformShow,m=a.businessShow,_=a.memberDayVenueMapUrl,b=void 0===_?"https://storage.360buyimg.com/wxmini/vpay_member/banner.png":_;c&&0!==c.length||r&&0!==r.length||s||u?t.setState({isLoading:!1,vip:i,memberDayBrandMapUrl:s,memberDayCategoryMapUrl:u,cmsToUrl:l,memberDayVenueMapUrl:b||"https://storage.360buyimg.com/wxmini/vpay_member/banner.png",comboId:d,firstRe:!1,tipType:"",tipMsg:"",platformList:r,merchantList:c,isMorePlatForm:p,isMoreMerchant:m,result:a}):t.setState({isLoading:!1,isNoneData:!0,tipType:"",tipMsg:"",platformList:[],merchantList:[],isMorePlatForm:!1,isMoreMerchant:!1,result:a})}else t.setState({isLoading:!1,tipType:"noWifi",tipMsg:o||"网络开小差了~"})})).catch((function(e){t.setState({isLoading:!1,tipType:"noWifi",tipMsg:(e||{}).msg||""})}))}},{key:"login",value:function login(){var e=this;Object(F.b)().then((function(){e.getLocationPlus()})).catch((function(t){e.setState({isLoading:!1,tipType:"unLogin",tipMsg:"您还未登录哦~"})}))}},{key:"getLocationPlus",value:function getLocationPlus(){var e=this;Object(U.a)().then((function(t){t.requestor="vplus-home",e.setState({paramsPageObj:t}),e._getVenuePageFun(t)})).catch((function(){e.setState({isLoading:!1,tipType:"noWifi",tipMsg:"未获取到地理位置"})}))}},{key:"goToByCoupon",value:function goToByCoupon(e){if(!this.state.vip)return Object(m.showToast)({icon:"none",title:"您未开通会员，快去开通吧!",duration:2e3}),o&&clearTimeout(o),o=setTimeout((function(){_.a.navigateTo({url:"/pages/vpaymember_t/packageSelection/index?vipFlag=0&h5=#newPay"})}),1e3),void Object(j.a)({page_name:"vpayMembermemberDay",create_time:new Date,click_id:"clickBrand"});if(e.indexOf("activityPage")>-1){var t=e.split("?")[1];Object(w.b)({url:"/pages/activity/homeFocus/index?"+t})}else if(e.indexOf("memberDay")>-1){var n=e.split("?")[1];Object(w.b)({url:"/pages/vpaymember_t/memberDay/index?"+n})}else Object(m.showToast)({icon:"none",title:"抱歉，暂不支持跳转"});Object(j.a)({page_name:"vpayMembermemberDay",create_time:new Date,click_id:"clickBrand"})}},{key:"render",value:function render(){var e=this,t=this.state,n=t.platformList,o=t.isLoading,a=t.merchantList,i=t.tipType,c=t.tipMsg,r=t.isMoreMerchant,s=t.isMorePlatForm,u=t.memberDayBrandMapUrl,l=t.memberDayCategoryMapUrl,d=t.isNoneData,p=t.cmsToUrl,m=t.memberDayVenueMapUrl;return i?Object(y.jsx)(R.a,{type:i,msg:c,style:{height:"100vh"},longitude:this.state.paramsPageObj.longitude,cityId:this.state.paramsPageObj.cityId,latitude:this.state.paramsPageObj.latitude,jumpUrl:this.jumpUrl,handlerReload:this._getVenuePageFun.bind(this)}):Object(y.jsxs)(b.j,{className:"".concat(h.a.memberDay),children:[m?Object(y.jsx)(b.j,{className:"".concat(h.a.memberDay_top),style:{backgroundImage:"url(".concat(m,")")}}):"",o?Object(y.jsx)(D.a,{}):Object(y.jsxs)(b.j,{className:"".concat(h.a.mgT10),children:[a&&a.length>0?Object(y.jsxs)(b.j,{className:"".concat(h.a.coupon_title),children:[Object(y.jsx)(b.j,{className:"".concat(h.a.icon)}),Object(y.jsx)(b.j,{className:"".concat(h.a.title),children:"商家大额券"}),Object(y.jsx)(b.j,{className:"".concat(h.a.icon)})]}):null,a&&a.length>0?Object(y.jsxs)(b.j,{className:h.a.business_coupon,children:[a.map((function(t,n){return Object(y.jsx)(T,{item:t,getProgressWidth:e.getProgressWidth.bind(e),couponState:e.couponState.bind(e),clickBtn:e.clickBtn.bind(e,t,n,2)},"".concat(n,"mer"))})),r?Object(y.jsx)(C,{getMoreList:this.getMoreList.bind(this),type:"0"}):null]}):null,n&&n.length>0?Object(y.jsxs)(b.j,{className:"".concat(h.a.coupon_title),children:[Object(y.jsx)(b.j,{className:"".concat(h.a.icon)}),Object(y.jsx)(b.j,{className:"".concat(h.a.title),children:"平台券"}),Object(y.jsx)(b.j,{className:"".concat(h.a.icon)})]}):null,n&&n.length>0?Object(y.jsxs)(b.j,{className:"".concat(h.a.platform_coupon),children:[Object(y.jsx)(b.j,{className:"".concat(h.a.platform_coupon_con),children:n.map((function(t,n){return Object(y.jsx)(O,{item:t,getProgressWidth:e.getProgressWidth.bind(e),couponState:e.couponState.bind(e),clickBtn:e.clickBtn.bind(e,t,n,1)},"".concat(n,"plat"))}))}),s?Object(y.jsx)(C,{getMoreList:this.getMoreList.bind(this),type:"1"}):null]}):null,u?Object(y.jsxs)(b.j,{children:[Object(y.jsxs)(b.j,{className:"".concat(h.a.coupon_title),children:[Object(y.jsx)(b.j,{className:"".concat(h.a.icon)}),Object(y.jsx)(b.j,{className:"".concat(h.a.title),children:"品牌券"}),Object(y.jsx)(b.j,{className:"".concat(h.a.icon)})]}),Object(y.jsx)(b.j,{className:h.a.banner_coupon,onClick:this.goToByCoupon.bind(this,p),children:Object(y.jsx)(b.c,{className:"".concat(h.a.image),src:u})})]}):null,l?Object(y.jsxs)(b.j,{children:[Object(y.jsxs)(b.j,{className:"".concat(h.a.coupon_title),children:[Object(y.jsx)(b.j,{className:"".concat(h.a.icon)}),Object(y.jsx)(b.j,{className:"".concat(h.a.title),children:"品类券"}),Object(y.jsx)(b.j,{className:"".concat(h.a.icon)})]}),Object(y.jsx)(b.j,{className:h.a.banner_coupon,onClick:this.goToByCoupon.bind(this,p),children:Object(y.jsx)(b.c,{className:"".concat(h.a.image),src:l})})]}):null,d?Object(y.jsx)(I,{}):null]}),Object(y.jsx)(b.j,{className:"".concat(h.a.blank)})]})}}]),memberDay}(p.Component);t.default=J},34:function(e,t,n){e.exports={loading:"index-module__loading___2Il2F",loadSize:"index-module__loadSize___3_zN-",loaderWrap:"index-module__loaderWrap___1PH_Q",loader:"index-module__loader___mMqg3"}},46:function(e,t,n){e.exports={memberDay:"index-module__memberDay___1Aepi",memberDay_top:"index-module__memberDay_top___2IVVK",title:"index-module__title___2lk7a",platform_coupon:"index-module__platform_coupon___dJKqu",platform_coupon_con:"index-module__platform_coupon_con___ept55",business_coupon:"index-module__business_coupon___OMNju",banner_coupon:"index-module__banner_coupon___34NfA",image:"index-module__image___SKX2R",coupon_title:"index-module__coupon_title___2x0gF",icon:"index-module__icon___31549",blank:"index-module__blank___tf8FY",mgT10:"index-module__mgT10___pLYdn"}},50:function(e,t,n){"use strict";var o=n(6),a=n(7),i=n(8),c=n(9),r=n(1),s=n(34),u=n.n(s),l=n(5),d=n(0),p=function(e){Object(i.a)(Loading,e);var t=Object(c.a)(Loading);function Loading(e){var n;return Object(o.a)(this,Loading),(n=t.call(this,e)).state={loadImg:"https://storage.360buyimg.com/wximg/common/loading.gif"},n}return Object(a.a)(Loading,[{key:"render",value:function render(){var e=this.state.loadImg;return this.props.selfStyle?Object(d.jsx)(r.j,{className:u.a.loaderWrap,children:Object(d.jsx)(r.j,{className:u.a.loader})}):Object(d.jsx)(r.j,{className:u.a.loading,children:Object(d.jsx)(r.c,{className:u.a.loadSize,src:e})})}}]),Loading}(l.default.Component);t.a=p},59:function(e,t,n){e.exports={platformCoupon:"index-module__platformCoupon___gEd20",item:"index-module__item___2m6An",remarkCon:"index-module__remarkCon___3rIM1",remark:"index-module__remark___3etgN",price:"index-module__price___1FjJ2",yuan:"index-module__yuan___2lh0V",useRemark:"index-module__useRemark___3NWxl",btnCon:"index-module__btnCon___3pLJf",btn:"index-module__btn___13NQt",disableBtn:"index-module__disableBtn___3fqt9",btnText:"index-module__btnText___28RnD",progress:"index-module__progress___2_2Oi",bar:"index-module__bar___3Nzn7",currentProgree:"index-module__currentProgree___2tibj",barText:"index-module__barText___2dquE",overIcon:"index-module__overIcon___DMVpC"}},60:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return x}));var o=n(6),a=n(7),i=n(15),c=n(8),r=n(9),s=n(10),u=n(5),l=n(33),d=n(3),p=n.n(d),m=n(19),_=n.n(m),b=n(1),g=n(61),h=n(12),j=n.n(h),f=(n(4),n(0)),x=function(e){Object(c.a)(Tip,e);var t=Object(r.a)(Tip);function Tip(e){var n;return Object(o.a)(this,Tip),n=t.call(this,e),Object(s.a)(Object(i.a)(n),"handlerReload",(function(){n.props.handlerReload&&n.props.handlerReload()})),n}return Object(a.a)(Tip,[{key:"goLogin",value:function goLogin(){var e=this.props.jumpUrl;e?Object(l.a)({localTargetUrl:e}):Object(l.a)({localTargetUrl:"/pages/vpaymember_t/home/index?latitude=".concat(this.props.latitude||"","&longitude=").concat(this.props.longitude||"","&cityId=").concat(this.props.cityId)})}},{key:"getMsg",value:function getMsg(){var e=this.props,t=e.msg,n=e.type;return t||{unLogin:"您还没有登录",noWifi:"网络开小差，请稍后再试哦~[0001]",noSearch:"没有找到符合的商品[0001]",noShop:"附近暂无商家[0001]",noOpen:"当前城市未开通服务[0001]",close:"关闭当前页"}[n]}},{key:"closeWb",value:function closeWb(){p.a.navigateBack({delta:3})}},{key:"render",value:function render(){var e=this.props,t=e.type,n=e.customClass,o=e.btnText,a=e.btnHref,i=e.style,c=e.msg;return Object(f.jsx)(b.j,{className:"".concat(j.a["tip-wrap"]," ").concat(n),style:i,children:Object(f.jsxs)(b.j,{className:j.a["tip-box"],children:[Object(f.jsx)(b.j,{className:"".concat(j.a["tip-icon"]," ").concat(j.a["tip-icon-"+t])}),Object(f.jsx)(b.j,{className:j.a["tip-message"],children:c||"网络开小差，请稍后再试哦~"}),"close"==t?Object(f.jsx)(b.j,{className:j.a.tipBtn,onClick:this.closeWb.bind(this),children:Object(f.jsx)(b.i,{className:j.a.tipText,children:o})}):Object(f.jsx)(g.a,{type:t,btnText:o,btnHref:a,handlerReload:this.handlerReload,goLogin:this.goLogin.bind(this)})]})})}}]),Tip}(u.default.Component);Object(s.a)(x,"propTypes",{msg:_.a.string,btnText:_.a.string,type:_.a.string.isRequired,customClass:_.a.string,handlerReload:_.a.func,btnHref:_.a.string}),Object(s.a)(x,"defaultProps",{msg:"",type:"",btnText:"",customClass:"",handlerReload:function handlerReload(){e&&e.location.reload()}})}).call(this,n(11).window)},61:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var o=n(6),a=n(7),i=n(8),c=n(9),r=n(10),s=(n(3),n(1)),u=n(26),l=n(12),d=n.n(l),p=n(19),m=n.n(p),_=n(5),b=n(0),g=function(e){Object(i.a)(TipBtn,e);var t=Object(c.a)(TipBtn);function TipBtn(){return Object(o.a)(this,TipBtn),t.apply(this,arguments)}return Object(a.a)(TipBtn,[{key:"goLogin",value:function goLogin(){this.props.goLogin()}},{key:"render",value:function render(){var e=this.props,t=e.type,n=e.btnText,o=e.btnHref;return"unLogin"===t?Object(b.jsx)(s.j,{className:d.a.tipBtn,onClick:this.goLogin.bind(this),children:Object(b.jsx)(s.i,{className:d.a.tipText,children:"立即登录"})}):"noWifi"===t?Object(b.jsx)(s.j,{className:d.a.tipBtn,onClick:this.props.handlerReload,children:Object(b.jsx)(s.i,{className:d.a.tipText,children:"重新加载"})}):"noLocation"===t?Object(b.jsx)(s.j,{className:d.a.tipBtn,onClick:function onClick(){return Object(u.a)({to:"home"})},children:Object(b.jsx)(s.i,{className:d.a.tipText,children:"手动搜索地址"})}):"noShop"===t||"noOpen"===t||"empty"===t?Object(b.jsx)(s.j,{className:d.a.tipBtn,onClick:function onClick(){return Object(u.a)({to:o||"home"})},children:Object(b.jsx)(s.i,{children:n||"回首页"})}):"search"===t?Object(b.jsx)(s.i,{className:d.a["search-tip-span"],children:"换个关键词试试吧"}):"close"===t?Object(b.jsx)(s.i,{className:d.a["search-tip-span"],children:n}):Object(b.jsx)(s.j,{className:d.a.tipBtn,onClick:function onClick(){return Object(u.a)({to:o||"home"})},children:Object(b.jsx)(s.i,{className:d.a.tipText,children:n||"返回首页"})})}}]),TipBtn}(_.Component);Object(r.a)(g,"propTypes",{btnText:m.a.string,type:m.a.string.isRequired,handlerReload:m.a.func,btnHref:m.a.string}),Object(r.a)(g,"defaultProps",{msg:"",type:"",btnText:"",customClass:"",handlerReload:function handlerReload(){}})},64:function(e,t,n){e.exports={shopCoupon:"index-module__shopCoupon___3Foe9",price:"index-module__price___-31m5",yuan:"index-module__yuan___3DxLl",info:"index-module__info___5mO39",couponTitle:"index-module__couponTitle___XH17H",couponRemark:"index-module__couponRemark___3gXFc",btnCon:"index-module__btnCon___1tISj",btn:"index-module__btn___1nqNz",disableBtn:"index-module__disableBtn___1B4A2",btnText:"index-module__btnText___2-1yt",progress:"index-module__progress___1ssKN",bar:"index-module__bar___2U0Yp",currentProgree:"index-module__currentProgree___oxbHT",barText:"index-module__barText___1lOtI",overIcon:"index-module__overIcon___BVILq"}}},[[201,0,17]]]);