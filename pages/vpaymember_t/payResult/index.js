require("../runtime"),require("../vendors"),(wx["webpackJsonp/pages/vpaymember_t/"]=wx["webpackJsonp/pages/vpaymember_t/"]||[]).push([[16],{106:function(t,e,n){t.exports={container:"index-module__container___o6Ogw",statusImage:"index-module__statusImage___2xiw2",title:"index-module__title___2kj-M",subTitle:"index-module__subTitle___2MdsJ",statusBtn:"index-module__statusBtn___3JT-j"}},112:function(t,e,n){t.exports={container:"index-module__container___jtCOh",loadingBox:"index-module__loadingBox___3FQme",loading:"index-module__loading___ri9aT",text:"index-module__text___3X27l"}},16:function(t,e,n){"use strict";n.d(e,"j",(function(){return i})),n.d(e,"C",(function(){return o})),n.d(e,"l",(function(){return r})),n.d(e,"d",(function(){return u})),n.d(e,"f",(function(){return c})),n.d(e,"e",(function(){return s})),n.d(e,"m",(function(){return d})),n.d(e,"c",(function(){return l})),n.d(e,"g",(function(){return p})),n.d(e,"h",(function(){return f})),n.d(e,"q",(function(){return b})),n.d(e,"L",(function(){return g})),n.d(e,"i",(function(){return m})),n.d(e,"G",(function(){return y})),n.d(e,"K",(function(){return v})),n.d(e,"I",(function(){return O})),n.d(e,"F",(function(){return h})),n.d(e,"p",(function(){return j})),n.d(e,"b",(function(){return S})),n.d(e,"w",(function(){return x})),n.d(e,"k",(function(){return _})),n.d(e,"A",(function(){return I})),n.d(e,"B",(function(){return P})),n.d(e,"J",(function(){return N})),n.d(e,"y",(function(){return T})),n.d(e,"a",(function(){return C})),n.d(e,"z",(function(){return k})),n.d(e,"n",(function(){return R})),n.d(e,"u",(function(){return w})),n.d(e,"v",(function(){return J})),n.d(e,"x",(function(){return B})),n.d(e,"E",(function(){return E})),n.d(e,"t",(function(){return F})),n.d(e,"r",(function(){return M})),n.d(e,"s",(function(){return L})),n.d(e,"M",(function(){return D})),n.d(e,"D",(function(){return V})),n.d(e,"H",(function(){return q})),n.d(e,"o",(function(){return G}));var a=n(2),i=function api_nearbystore_list(t){return Object(a.a)({functionId:"vip/store/nearList",body:t})},o=function get_purchasePage_info(t){return Object(a.a)({functionId:"pay/vip/purchasePage",method:"POST",body:JSON.stringify(t)})},r=function api_plus_vipPurchase(t){return Object(a.a)({functionId:"pay/vip/purchase",body:t})},u=function api_buy_record(t){return Object(a.a)({functionId:"pay/vip/record",body:t||{}})},c=function api_convertCouponCheck(t){return Object(a.a)({functionId:"vip/convertCouponCheck",method:"POST",body:JSON.stringify(t)})},s=function api_convertCoupon(t){return Object(a.a)({functionId:"vip/convertCoupon",method:"POST",body:JSON.stringify(t)})},d=function api_undoExchange(t){return Object(a.a)({functionId:"vip/exchange/undo",method:"POST",body:JSON.stringify(t)})},l=function api_allowanceList(t){return Object(a.a)({functionId:"pay/vip/allowance/detail",body:t||{}})},p=function api_exchangeconCheck(t){return Object(a.a)({functionId:"pay/vip/exchange/check",body:t||{}})},f=function api_exchangeconFirm(t){return Object(a.a)({functionId:"pay/vip/exchange/confirm",body:t||{}})},b=function discountListCont(t){return Object(a.a)({functionId:"pay/vip/red/packet/discount",body:t||{}})},g=function tabContentFun(t){return Object(a.a)({functionId:"pay/vip/red/packet/tab",body:t||{}})},m=function api_getCouponData(t){return Object(a.a)({functionId:"vip/exchange/queryPageList",body:t||{}})},y=function protocolFun(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(a.a)({functionId:"pay/vip/protocol",body:t})},v=function storeInfoFun(t){return Object(a.a)({functionId:"pay/vip/store",method:"POST",body:JSON.stringify(t)})},O=function queryPayStatusFun(t){return console.log(JSON.stringify(t),"------参数"),Object(a.a)({functionId:"tx/core/queryPayStatus",body:JSON.stringify(t)})},h=function payModesFun(t){return Object(a.a)({functionId:"pay/cashier/pay-modes",method:"POST",body:JSON.stringify(t)})},j=function directPayFun(t){return Object(a.a)({functionId:"pay/cashier/direct-pay",method:"POST",body:JSON.stringify(t),isNeedDealError:1})},S=function abStrategyFun(){return Object(a.a)({functionId:"pay/cashier/ab-strategy",method:"POST"})},x=function getPayInfoFun(t){return Object(a.a)({functionId:"pay/cashier/get-pay-info",method:"POST",body:t})},_=function api_plus_main_new(t){return Object(a.a)({functionId:"pay/vip/main-page",method:"POST",body:t})},I=function getVenuePageFun(t){return Object(a.a)({functionId:"pay/vip/venuePage",method:"GET",body:JSON.stringify(t)})},P=function getVenueReceiveFun(t){return Object(a.a)({functionId:"pay/vip/venueReceive",method:"POST",body:JSON.stringify(t)})},N=function showMoreFun(t){return Object(a.a)({functionId:"pay/vip/showMore",method:"GET",body:JSON.stringify(t)})},T=function getRights(t){return Object(a.a)({functionId:"vip/benefit/all",method:"GET",body:JSON.stringify(t)})},C=function abProductList(t){return Object(a.a)({functionId:"vip/ab/product-list",method:"GET",body:JSON.stringify(t)})},k=function getSharePic(t){return Object(a.a)({functionId:"vip/share/image",method:"GET",body:JSON.stringify(t)})},R=function api_vip_goods_list(t){return Object(a.a)({functionId:"vip/sku/vipPrice",method:"POST",body:t})},w=function getNearBigCouponList(t){return Object(a.a)({functionId:"vip/member/price/nearList",method:"POST",body:JSON.stringify(t)})},J=function getNearBigCouponListMore(t){return Object(a.a)({functionId:"vip/member/price/loadMore",method:"POST",body:JSON.stringify(t)})},B=function getQueryStatusForV(t){return Object(a.a)({functionId:"vip/contract/queryStatusForV",method:"GET",body:JSON.stringify(t)})},E=function noticeResult(t){return Object(a.a)({functionId:"vip/contract/noticeResult",method:"GET",body:JSON.stringify(t)})},F=function getContractInfoPage(t){return Object(a.a)({functionId:"vip/contract/infoPage",method:"GET",body:JSON.stringify(t)})},M=function getContractCancel(t){return Object(a.a)({functionId:"vip/contract/cancel",method:"GET",body:JSON.stringify(t)})},L=function getContractHistoryState(t){return Object(a.a)({functionId:"vip/contract/historyState",method:"GET",body:JSON.stringify(t)})},D=function vipMarket(t){return Object(a.a)({functionId:"vip/market/orderGuide",method:"GET",body:JSON.stringify(t),isNeedDealError:1})},V=function layerIndex(t){return Object(a.a)({functionId:"vip/layer/index",method:"GET",body:JSON.stringify(t)})},q=function queryPageList(t){return Object(a.a)({functionId:"vip/exchange/queryPageList",method:"GET",body:JSON.stringify(t)})},G=function dealButton(t){return Object(a.a)({functionId:"pay/vip/dealButton",method:"POST",body:JSON.stringify(t)})}},20:function(t,e,n){"use strict";(function(t){n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return u})),n.d(e,"a",(function(){return c}));var a=n(4),i=n(3),o=n.n(i),r=function navigateTo(t){var e=t.url;return(e.indexOf("testpdjm.jd.com")>-1||e.indexOf("prepdjm.jd.com")>-1||e.indexOf("daojia.jd.com")>-1||e.indexOf("prepdj-three.jddj.com")>-1)&&(e="/pages/"+e.split("/pages/")[1]),o.a.navigateTo({url:e})},u=function postMsgUpdateV(){a.c&&_isCompatible(String(a.a),String("8.6.0"))>=0&&(a.d?a.h&&t.webkit.messageHandlers.MobileNavi.postMessage({method:"updateVPlusPage",callBackName:null,callBackId:null}):a.b&&t.djJava.closeWebview&&t.djJava.updateVPlusPage())},c=function closeWebView(){a.c&&_isCompatible(String(a.a),String("8.6.0"))>=0&&(a.d?a.h&&t.webkit.messageHandlers.MobileNavi.postMessage({method:"closeWebview",callBackName:null,callBackId:null}):a.b&&t.djJava.closeWebview&&t.djJava.closeWebview())};function _isCompatible(t,e){t=t.split("."),e=e.split(".");for(var n=Math.max(t.length,e.length);t.length<n;)t.push("0");for(;e.length<n;)e.push("0");for(var a=0;a<n;a++){var i=parseInt(t[a]),o=parseInt(e[a]);if(i>o)return 1;if(i<o)return-1}return 0}}).call(this,n(11).window)},216:function(t,e,n){"use strict";n.r(e);n(68);var a=n(13),i=n(11),o=n(42),r=n(5);i.container.get(i.SERVICE_IDENTIFIER.Hooks).initNativeApiImpls=[a.c.initNativeApi];var u={pages:["pages/index/index"],subPackages:[{root:"pages/vipChannel-t/",pages:["index"],independent:!0},{root:"pages/merchant-t/",pages:["agreement/index"],independent:!0},{root:"pages/vpaymember_t/",pages:["home/index","memberGoods/index","packageSelection/index","rightsInstruction/index","memberDay/index","couponTab/index","couponTabNew/index","exchangePage/index","instructions/index","envelopesRecord/index","bountyList/index","discountList/index","manageRenew/index","payResult/index","toVPlusCenterPage/index"],independent:!0},{root:"pages/test-t/",pages:["hy/index"]}],permission:{"scope.userLocation":{desc:"你的位置信息将用获取最近的门店信息"}},plugins:{loginPlugin:{version:"1.5.1",provider:"wxefe655223916819e"},"live-player-plugin":{version:"1.3.5",provider:"wx2b03c6e691cd7370"}},window:{backgroundTextStyle:"light",navigationBarBackgroundColor:"#fff",navigationBarTitleText:"WeChat",navigationBarTextStyle:"black"}};i.window.__taroAppConfig=u;class App extends r.Component{render(){return this.props.children}}Object(o.a)(App,r,r.default,u);var c=n(222).default;Page(Object(i.createPageConfig)(c,"pages/vpaymember_t/payResult/index",{},{navigationBarBackgroundColor:"#ffffff",navigationBarTextStyle:"black",navigationBarTitleText:"开通会员",disableSwipeBack:!0}||{}))},222:function(t,e,n){"use strict";n.r(e);var a=n(6),i=n(7),o=n(15),r=n(8),u=n(9),c=n(10),s=n(5),d=n(3),l=n.n(d),p=n(1),f=n(112),b=n.n(f),g=n(0),m=function(t){Object(r.a)(Loading,t);var e=Object(u.a)(Loading);function Loading(t){var n;return Object(a.a)(this,Loading),(n=e.call(this,t)).state={},n}return Object(i.a)(Loading,[{key:"componentDidMount",value:function componentDidMount(){}},{key:"componentDidShow",value:function componentDidShow(){}},{key:"render",value:function render(){return Object(g.jsx)(p.j,{className:b.a.container,children:Object(g.jsxs)(p.j,{className:b.a.loadingBox,children:[Object(g.jsx)(p.c,{src:"https://storage.360buyimg.com/wximg/vpayMember/payResult_loading.gif",className:b.a.loading}),Object(g.jsx)(p.j,{className:b.a.text,children:"查询结果中，请耐心等待"})]})})}}]),Loading}(s.Component),y=n(106),v=n.n(y),O=function(t){Object(r.a)(StatusResult,t);var e=Object(u.a)(StatusResult);function StatusResult(t){var n;return Object(a.a)(this,StatusResult),(n=e.call(this,t)).state={},n}return Object(i.a)(StatusResult,[{key:"componentDidMount",value:function componentDidMount(){}},{key:"componentDidShow",value:function componentDidShow(){}},{key:"toPage",value:function toPage(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";"查看会员权益"==t?this.props.toVpHome():this.props.toVpSelection()}},{key:"render",value:function render(){var t=this,e=this.props.statusState;return Object(g.jsxs)(p.j,{className:v.a.container,children:[Object(g.jsx)(p.c,{className:v.a.statusImage,src:e.statusImage}),Object(g.jsx)(p.j,{className:v.a.title,children:e.title}),Object(g.jsx)(p.i,{className:v.a.subTitle,children:e.subTitle}),Object(g.jsx)(p.j,{className:v.a.statusBtn,onClick:function onClick(){return t.toPage(e.btnName)},children:e.btnName})]})}}]),StatusResult}(s.Component),h=n(16),j=(n(4),n(20),function(t){Object(r.a)(PayResult,t);var e=Object(u.a)(PayResult);function PayResult(t){var n;return Object(a.a)(this,PayResult),n=e.call(this,t),Object(c.a)(Object(o.a)(n),"time",void 0),Object(c.a)(Object(o.a)(n),"endInterval",void 0),Object(c.a)(Object(o.a)(n),"params",void 0),Object(c.a)(Object(o.a)(n),"interval",void 0),Object(c.a)(Object(o.a)(n),"startInterval",(function(){n.interval&&clearInterval(n.interval),n.queryRequestResult(),n.interval=setInterval((function(){n.time+=1,n.queryRequestResult(),n.checkResult(),n.time>=10&&!n.endInterval&&n.reportResult(),n.endInterval&&n.succeedResult()}),1e3)})),Object(c.a)(Object(o.a)(n),"checkResult",(function(){var t=n.state,e=t.contractStatus;t.payStatus&&e&&(n.endInterval=!0)})),Object(c.a)(Object(o.a)(n),"reportResult",(function(){var t=n.state,e=t.contractStatus,a=t.payStatus;return clearInterval(n.interval),e?a?void 0:(n.setState({succeedResult:!0,statusState:{statusImage:"https://storage.360buyimg.com/wximg/member/payResult_fail.png",title:"会员购买失败",subTitle:"不要放弃哦，再重新购买试试把~",btnName:"重新购买"}}),void n.payFail()):(n.setState({succeedResult:!0,statusState:{statusImage:"https://storage.360buyimg.com/wximg/member/payResult_not.png",title:"未开通续费协议",subTitle:"哇，发生了什么，要不要继续开通试试~",btnName:"继续开通"}}),void n.payFail())})),Object(c.a)(Object(o.a)(n),"succeedResult",(function(){n.setState({succeedResult:!0,statusState:{statusImage:"https://storage.360buyimg.com/wximg/member/payResult_succeed.png",title:"已开通连续包月",subTitle:"别担心，可以随时关闭自动续费的哦~",btnName:"查看会员权益"}}),clearInterval(n.interval)})),Object(c.a)(Object(o.a)(n),"toVpHome",(function(){var t=n.params,e=(t.payFrom,t.fromChannel),a=JSON.parse(JSON.stringify(n.params)),i=n.getParams(a);e?l.a.redirectTo({url:"/pages/vpaymember_t/home/index?".concat(i)}):l.a.reLaunch({url:"/pages/vpaymember_t/home/index?".concat(i)})})),Object(c.a)(Object(o.a)(n),"toVpSelection",(function(){var t=JSON.parse(JSON.stringify(n.params));t.businessContractCode&&delete t.businessContractCode;n.getParams(t);l.a.navigateBack({delta:1})})),n.params=l.a.getCurrentInstance().router.params,n.time=0,n.endInterval=!1,n.interval=null,n.state={statusState:{statusImage:"https://storage.360buyimg.com/wximg/member/payResult_not.png",title:"未开通续费协议",subTitle:"哇，发生了什么，要不要继续开通试试~",btnName:"继续开通"},succeedResult:!1,contractStatus:!1,payStatus:!1},n}return Object(i.a)(PayResult,[{key:"componentDidMount",value:function componentDidMount(){}},{key:"componentDidShow",value:function componentDidShow(){this.startInterval()}},{key:"queryRequestResult",value:function queryRequestResult(){var t=this,e={pageSource:"vPlus",businessContractCode:this.params.businessContractCode};Object(h.x)(e).then((function(e){if(0==e.code){var n=e.result,a=n.contractStatus,i=n.payStatus;t.setState({contractStatus:a,payStatus:i})}}))}},{key:"payFail",value:function payFail(){var t={pageSource:"vPlus",businessContractCode:this.params.businessContractCode};Object(h.E)(t).then((function(t){}))}},{key:"getParams",value:function getParams(t){var e="";return Object.keys(t).forEach((function(n){e=""===e?"".concat(n,"=").concat(t[n]):"".concat(e,"&").concat(n,"=").concat(t[n])})),e}},{key:"render",value:function render(){var t=this.state,e=t.statusState,n=t.succeedResult;return Object(g.jsxs)(p.j,{children:[!n&&Object(g.jsx)(m,{}),n&&Object(g.jsx)(O,{statusState:e,toVpHome:this.toVpHome,toVpSelection:this.toVpSelection})]})}}]),PayResult}(s.Component));e.default=j}},[[216,0,17]]]);