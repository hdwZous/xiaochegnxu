"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _class,_temp2,_createClass=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}(),_get=function t(e,n,i){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);return void 0!==o?"value"in o?o.value:void 0!==(o=o.get)?o.call(i):void 0:null!==(o=Object.getPrototypeOf(e))?t(o,n,i):void 0},_index=require("../../npm/@tarojs/taro-weapp/index.js"),_index2=_interopRequireDefault(_index),_indexWeapp=(require("../../api/orchard.js"),require("../../npm/@jd/djmp/common-t/js/share/index.weapp.js"),require("../../npm/@jd/djmp/common-t/js/taroapi/index.weapp.js")),_indexModuleScssMap=require("./index.module.scss.map.js"),_indexModuleScssMap2=_interopRequireDefault(_indexModuleScssMap),_indexWeapp2=require("../../npm/@jd/djmp/common-t/js/bi/index.weapp.js"),_indexWeapp3=require("../../npm/@jd/djmp/common-t/js/storage/index.weapp.js");function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(t)return!e||"object"!=typeof e&&"function"!=typeof e?t:e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var REPORT={showSeriesPopup:function(t,e,n){(0,_indexWeapp2.clickReport)({click_id:"showLayer",click_par:{type:"lottery",timing:t,reset:e,daycount:n}})},clickSeriesPopup:function(t,e,n){(0,_indexWeapp2.clickReport)({click_id:"clickLayer",click_par:{type:"lottery",timing:t,reset:e,daycount:n}})}},isWeapp=!0,weapp=!0,SeriesWatering=(_temp2=_class=function(){function a(){var t,e;_classCallCheck(this,a);for(var n=arguments.length,i=Array(n),o=0;o<n;o++)i[o]=arguments[o];return(t=e=_possibleConstructorReturn(this,(e=a.__proto__||Object.getPrototypeOf(a)).call.apply(e,[this].concat(i)))).$usedState=["anonymousState__temp","anonymousState__temp2","anonymousState__temp3","anonymousState__temp4","anonymousState__temp5","anonymousState__temp6","anonymousState__temp7","anonymousState__temp8","anonymousState__temp9","style","isShowlight","seriesWaterData","isShowBag","undefined","transition","transitionBtn","transitionTitle","transitionSecTitle","transitionHand","layerShowFlag","handleShowPriorityPopFlag","handlePriorityPop","statusBarH"],e.customComponents=[],_possibleConstructorReturn(e,t)}return _inherits(a,_index.Component),_createClass(a,[{key:"_constructor",value:function(t){_get(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"_constructor",this).call(this,t),this.state={transition:{opacity:"0"},transitionBtn:{opacity:"0"},transitionTitle:{opacity:"0"},transitionSecTitle:{opacity:"0"},transitionHand:{opacity:"0"},layerShowFlag:!1,isShowlight:!1,isShowBag:!1},this.isNewerAfterL=0,this.shareFlag=!0,this.$$refs=[]}},{key:"callSuperPriority",value:function(){var t=this;setTimeout(function(){t.props.handleShowPriorityPopFlag(),t.props.handlePriorityPop()},500)}},{key:"_throttle",value:function(t,e){var n=this;this.shareFlag&&(this.shareFlag=!1,t.apply(this,arguments),setTimeout(function(){n.shareFlag=!0},e||2e3))}},{key:"handleClick",value:function(){var e=this;this.setState({layerShowFlag:!1,isShowlight:!1,isShowBag:!1,transition:{opacity:"0"},transitionBtn:{opacity:"0"},transitionTitle:{opacity:"0"},transitionSecTitle:{opacity:"0"},transitionHand:{opacity:"0"}},function(){e.callSuperPriority();var t=e.props.seriesWaterData;e._throttle(function(){REPORT.clickSeriesPopup(e.isNewerAfterL?1:0,t.isReset,t.finishNum)},1e3)})}},{key:"componentWillReceiveProps",value:function(t){}},{key:"componentDidMount",value:function(){}},{key:"componentDidShow",value:function(){}},{key:"componentDidHide",value:function(){}},{key:"setStateForAni",value:function(t){var e=this,n=this.props.seriesWaterData;this.isNewerAfterL=t,REPORT.showSeriesPopup(t?1:0,n.isReset,n.finishNum),_index2.default.createSelectorQuery();_index2.default.createSelectorQuery().in(this.$scope).selectAll("#seriesAni").boundingClientRect(function(t){t[0]&&(t=t[0].height+t[0].top+20,e.setState({transition:{opacity:"1",transform:"translateY("+-t+"px)"},layerShowFlag:!0},function(){setTimeout(function(){e.setState({transition:{opacity:"1",transform:"translateY(0px)",transition:"0.85s linear 0s"},transitionTitle:{opacity:"1",transform:"scale(0)"},transitionBtn:{opacity:"1",transform:"scale(0)"}},function(){setTimeout(function(){e.setState({transitionTitle:{opacity:"1",transform:"scale(1)",transition:"0.8s linear 0s"}})},450),setTimeout(function(){e.setState({transitionSecTitle:{opacity:"1"}})},1e3),setTimeout(function(){e.setState({isShowBag:!0,transitionBtn:{opacity:"1",transform:"scale(1)",transition:"0.4s linear 0s"},isShowlight:!0},function(){setTimeout(function(){e.setState({transitionHand:{opacity:"1"}})},750)})},850)})},300)}))}).exec()}},{key:"handlePopClick",value:function(){var t=this.props.seriesWaterData;(0,_indexWeapp3.setStorageSync)("series_water_rules",t.rules);(0,_indexWeapp.navigateTo)("/pages/orchard-t/seriesStrategy/index")}},{key:"_createData",value:function(){this.__state=arguments[0]||this.state||{},this.__props=arguments[1]||this.props||{};this.$prefix;var t=this.__state,e=t.layerShowFlag,n=t.transition,i=t.transitionBtn,o=t.transitionTitle,a=(t.isShowlight,t.transitionSecTitle),s=t.transitionHand,t=(t.isShowBag,this.__props),r=t.seriesWaterData,t=t.statusBarH,e=(0,_index.internal_inline_style)(e?"":"visibility: hidden;"),o=(0,_index.internal_inline_style)(o),l=(0,_index.internal_inline_style)(a),n=(0,_index.internal_inline_style)(n),a=(0,_index.internal_inline_style)(a),i=(0,_index.internal_inline_style)(i),s=(0,_index.internal_inline_style)(s),t=(0,_index.internal_inline_style)({top:t+"px"}),p=r&&null!=r.todayFinishNum?(0,_index.internal_inline_style)({width:(r.todayFinishNum/r.todayTotalNum*100).toFixed(2)+"%"}):null;return Object.assign(this.__state,{anonymousState__temp:e,anonymousState__temp2:o,anonymousState__temp3:l,anonymousState__temp4:n,anonymousState__temp5:a,anonymousState__temp6:i,anonymousState__temp7:s,anonymousState__temp8:t,anonymousState__temp9:p,style:_indexModuleScssMap2.default,seriesWaterData:r,undefined:void 0}),this.__state}}]),a}(),_class.$$events=["handleClick","handlePopClick"],_class.$$componentPath="pages/orchard-t/components/SeriesWatering/index",_temp2);exports.default=SeriesWatering,Component(require("../../npm/@tarojs/taro-weapp/index.js").default.createComponent(SeriesWatering));